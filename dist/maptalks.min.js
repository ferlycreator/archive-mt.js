(function() {
  var c = window.Z = c || {};
  c.Rj = !0;
  c.Im = function(a, b) {
    var d = ".min.js";
    c.Rj && (d = ".js");
    c.a.Ga.Pb(c.host + "/engine/js/build/v2/modules/carto" + d, function() {
      a.call(b);
    });
  };
  c.defaultCoordinateType = c.uo = "gcj02";
  c.a = {um:0, extend:function(a) {
    var b = Array.prototype.slice.call(arguments, 1), d, c, f, g;
    c = 0;
    for (f = b.length;c < f;c++) {
      for (d in g = b[c] || {}, g) {
        g.hasOwnProperty(d) && (a[d] = g[d]);
      }
    }
    return a;
  }, wj:function(a, b) {
    a.hasOwnProperty("options") || (a.options = a.options ? c.a.create(a.options) : {});
    for (var d in b) {
      a.options[d] = b[d];
    }
    return a.options;
  }, trim:function(a) {
    return a.trim ? a.trim() : a.replace(/^\s+|\s+$/g, "");
  }, un:function(a) {
    return c.a.trim(a).split(/\s+/);
  }, yo:function() {
  }, je:function() {
    return "___GLOBAL_" + c.a.um++;
  }, Sp:function(a) {
    a.nh = a.nh || ++c.a.Gm;
    return a.nh;
  }, Gm:0, ld:function(a) {
    return a && c.a.fb(a) ? JSON.parse(a) : null;
  }, create:Object.create || function() {
    function a() {
    }
    return function(b) {
      a.prototype = b;
      return new a;
    };
  }(), bind:function(a, b) {
    var d = Array.prototype.slice;
    if (a.bind) {
      return a.bind.apply(a, d.call(arguments, 1));
    }
    var c = d.call(arguments, 2);
    return function() {
      return a.apply(b, c.length ? c.concat(d.call(arguments)) : arguments);
    };
  }, mi:function(a, b, d) {
    if (!this.isArray(a)) {
      return null;
    }
    for (var e = [], f = 0, g = a.length;f < g;f++) {
      var h = a[f];
      if (!c.a.f(h)) {
        if (c.a.isArray(h)) {
          for (var k = [], l = 0, m = h.length;l < m;l++) {
            c.a.f(h[l]) || k.push(d.call(b, h[l]));
          }
          e.push(k);
        } else {
          h = d.call(b, h), e.push(h);
        }
      }
    }
    return e;
  }, qj:function(a, b) {
    if (!a || b) {
      return -1;
    }
    for (var d = 0, c = b.length;d < c;d++) {
      if (b[d] == a) {
        return d;
      }
    }
    return -1;
  }, mb:function(a) {
    return .5 + a << .5;
  }, Ld:function(a) {
    return a instanceof c.J || a && !c.a.f(a.x) && !c.a.f(a.y) ? !0 : !1;
  }, f:function(a) {
    return void 0 === a || null === a;
  }, fa:function(a) {
    return "number" === typeof a && !isNaN(a);
  }, bf:function(a) {
    return .5 + a << 0;
  }, aa:function(a) {
    return this.isArray(a) && 0 < a.length;
  }, isArray:function(a) {
    return a ? "array" == typeof a || null !== a.constructor && a.constructor == Array : !1;
  }, fb:function(a) {
    return null === a || void 0 === a ? !1 : "string" == typeof a || null !== a.constructor && a.constructor == String;
  }, Pe:function(a) {
    return this.f(a) ? !1 : "function" == typeof a || null !== a.constructor && a.constructor == Function;
  }, Be:function(a, b) {
    if (!a) {
      return null;
    }
    var d;
    d = "minus" === b ? this.$h : this.zl;
    var c = {}, f;
    for (f in a) {
      a.hasOwnProperty(f) && "" !== f && (c[d(f)] = a[f]);
    }
    return c;
  }, zl:function(a) {
    if (!a) {
      return null;
    }
    for (var b = !1, d = [], e = 0, f = a.length;e < f;e++) {
      var g = a[e];
      c.a.f(g) && (g = a.charAt(e));
      "-" === g ? b = !0 : b ? (d.push(g.toUpperCase()), b = !1) : d.push(g);
    }
    return d.join("");
  }, $h:function(a) {
    if (!a) {
      return null;
    }
    for (var b = [], d = 0, c = a.length;d < c;d++) {
      var f = a[d];
      f || (f = a.charAt(d));
      f && 65 <= f.charCodeAt(0) && 90 >= f.charCodeAt(0) ? (b.push("-"), b.push(f.toLowerCase())) : b.push(f);
    }
    return b.join("");
  }, vm:function(a) {
    var b = document.createElement("script");
    b.text = a;
    document.head.appendChild(b).parentNode.removeChild(b);
  }};
  (function() {
    function a(a) {
      return window["webkit" + a] || window["moz" + a] || window["ms" + a];
    }
    function b(a) {
      var b = +new Date, c = Math.max(0, 16 - (b - d));
      d = b + c;
      return window.setTimeout(a, c);
    }
    var d = 0, e = window.requestAnimationFrame || a("RequestAnimationFrame") || b, f = window.cancelAnimationFrame || a("CancelAnimationFrame") || a("CancelRequestAnimationFrame") || function(a) {
      window.clearTimeout(a);
    };
    c.a.zp = function(a) {
      return e.call(window, a);
    };
    c.a.no = function(a) {
      a && f.call(window, a);
    };
  })();
  c.a.Ga = function(a, b, d, c, f) {
    this.kh = a;
    this.eh = d;
    this.nj = f;
    if (this.Nb = this.Ll()) {
      var g = this.Nb, h = this;
      window.XDomainRequest && 8 === document.documentMode || void 0 !== g.withCredentials ? g.onload = function() {
        h.Ci(g, b, c);
      } : g.onreadystatechange = function() {
        h.Ci(g, b, c);
      };
    } else {
      alert("error");
    }
  };
  c.a.Ga.prototype = {Ll:function() {
    if (c.D.Kd && 8 == document.documentMode) {
      try {
        return new XDomainRequest;
      } catch (a) {
      }
    }
    try {
      return new XMLHttpRequest;
    } catch (b) {
    }
    try {
      return new ActiveXObject("Msxml2.XMLHTTP");
    } catch (d) {
    }
    try {
      return new ActiveXObject("Microsoft.XMLHTTP");
    } catch (e) {
    }
    return null;
  }, get:function() {
    var a = this.Nb, b = this.eh;
    a.open("GET", this.kh + (b ? "?" + b : ""), !0);
    this.nj && a.responseType && (a.responseType = this.responseType);
    a.send(null);
  }, Vd:function() {
    var a = this.eh;
    this.Nb.open("POST", this.kh, !0);
    this.nj && this.Nb.responseType && (this.Nb.responseType = this.responseType);
    window.XDomainRequest || this.Nb.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    this.Nb.send(a);
  }, Ci:function(a, b, d) {
    void 0 !== a.withCredentials || window.XDomainRequest && c.D.Kd && 8 === document.documentMode ? d(a.responseText) : 4 == a.readyState && (200 == a.status ? d(b ? a.responseXML : a.responseText) : 0 !== a.status && d('{"success":false,"error":"Status:' + a.status + "," + a.statusText + '"}'));
  }};
  c.a.Ga.ta = function(a, b, d) {
    a = new c.a.Ga(a, 0, null, function(a) {
      b && (d ? b.call(d, a) : b(a));
    });
    a.get();
    a = null;
  };
  c.a.Ga.Pb = function(a, b) {
    c.a.Ga.ta(a, function(a) {
      c.a.vm(a);
      b && b();
    }, void 0);
  };
  c.b = {M:function(a) {
    return document.createElement(a);
  }, cb:function(a, b, d) {
    a = this.M(a);
    b && this.ba(a, b);
    d && d.appendChild(a);
    return a;
  }, ma:function(a) {
    if (a) {
      if (c.D.Kd) {
        var b = c.b.M("div");
        b.appendChild(a);
        b.innerHTML = "";
      } else {
        a.parentNode && a.parentNode.removeChild(a);
      }
    }
  }, Za:function(a, b, d, c) {
    function f(b) {
      b || (b = window.event);
      return d.call(c || a, b);
    }
    if (!a || !b || !d) {
      return this;
    }
    b = b.split(" ");
    for (var g = b.length - 1;0 <= g;g--) {
      var h = b[g];
      if (h) {
        a["Z__" + h] || (a["Z__" + h] = []);
        if (0 <= this.Di(a, h, d)) {
          break;
        }
        a["Z__" + h].push({Rh:f, src:d});
        "addEventListener" in a ? ("mousewheel" === h && void 0 !== document.mozHidden && (h = "DOMMouseScroll"), a.addEventListener(h, f, !1)) : "attachEvent" in a && a.attachEvent("on" + h, f);
      }
    }
    return this;
  }, Yd:function(a, b, d) {
    function c(b, d) {
      "removeEventListener" in a ? ("mousewheel" === b && void 0 !== document.mozHidden && (b = "DOMMouseScroll"), a.removeEventListener(b, d, !1)) : "detachEvent" in a && a.detachEvent("on" + b, d);
    }
    if (a && b) {
      var f = b.split(" ");
      for (b = f.length - 1;0 <= b;b--) {
        var g = f[b];
        if (g) {
          if (!d && a["Z__" + g]) {
            d = a["Z__" + g];
            b = 0;
            for (f = d.length;b < f;b++) {
              c(d[b].Rh);
            }
            delete a["Z__" + g];
            return;
          }
          var h = this.Di(a, g, d);
          if (0 > h) {
            return;
          }
          c(g, a["Z__" + g][h].Rh);
          a["Z__" + g].splice(h, 1);
        }
      }
      return this;
    }
  }, Di:function(a, b, d) {
    if (!a || !a["Z__" + b] || !d) {
      return -1;
    }
    a = a["Z__" + b];
    b = 0;
    for (var c = a.length;b < c;b++) {
      if (a[b].src == d) {
        return b;
      }
    }
    return -1;
  }, preventDefault:function(a) {
    a.preventDefault ? a.preventDefault() : a.returnValue = !1;
  }, stopPropagation:function(a) {
    a.stopPropagation ? a.stopPropagation() : a.cancelBubble = !0;
    return this;
  }, Sd:function(a, b) {
    return a ? b ? (a.style.left = b.left + "px", a.style.top = b.top + "px", b) : {left:parseInt(a.style.left, 0), top:parseInt(a.style.top, 0)} : null;
  }, kp:function(a, b) {
    if (c.D.An) {
      return b ? (a.style[this.of] = "translate3d(" + b.left + "px," + b.top + "px,0px)", b) : this.Pm(a);
    }
  }, Pm:function(a) {
    a = a.style[this.of];
    if (!a) {
      return {left:0, top:0};
    }
    a = a.split(",");
    return {left:parseInt(a[0].split("(")[1], 0), top:parseInt(a[1], 0)};
  }, km:function(a) {
    for (var b = 0, d = 0;a;) {
      d += parseInt(a.offsetLeft, 0), b += parseInt(a.offsetTop, 0), a = a.offsetParent;
    }
    return {left:d, top:b};
  }, $l:function(a) {
    a = window.event || a;
    if (a.pageX || a.pageY) {
      return {x:a.pageX, y:a.pageY};
    }
    var b = document.body, d = document.documentElement;
    return {x:a.clientX + (d.scrollLeft ? d.scrollLeft : b.scrollLeft) - (d.clientLeft ? d.clientLeft : b.clientLeft), y:a.clientY + (d.scrollTop ? d.scrollTop : b.scrollTop) - (d.clientTop ? d.clientTop : b.clientTop)};
  }, Gb:function(a, b) {
    a || (a = window.event);
    var d = c.b.km(b), e = c.b.$l(a);
    return {left:e.x - d.left, top:e.y - d.top};
  }, Ej:function(a) {
    for (var b = document.documentElement.style, d = 0;d < a.length;d++) {
      if (a[d] in b) {
        return a[d];
      }
    }
    return !1;
  }, sj:function(a, b) {
    a.style[this.of] = b;
  }, Zl:function(a) {
    return a.style[this.hh];
  }, Fg:function(a, b) {
    a.style[this.hh] = b;
  }, so:function(a) {
    if (c.a.f(a)) {
      return null;
    }
    for (var b = [], d = 0, e = a.length;d < e;d++) {
      var f = a[d];
      c.a.f(f) && (f = a.charAt(d));
      f && 65 <= f.charCodeAt(0) && 90 >= f.charCodeAt(0) ? (b.push("-"), b.push(f.toLowerCase())) : b.push(f);
    }
    return b.join("");
  }, ba:function(a, b) {
    var d = a.style.cssText, c = d.length - 1;
    0 <= c && d.indexOf(";", c) == c || (d += ";");
    a.style.cssText = d + b;
  }, yp:function(a) {
    a.style.cssText = "";
  }, eo:function(a, b, d) {
    var c = a.style.cssText;
    b && d && (a.style.cssText = c + (b + ":" + d + ";"));
  }, wm:function(a, b) {
    if (void 0 !== a.classList) {
      return a.classList.contains(b);
    }
    var d = c.b.$f(a);
    return 0 < d.length && (new RegExp("(^|\\s)" + b + "(\\s|$)")).test(d);
  }, Ab:function(a, b) {
    if (void 0 !== a.classList) {
      for (var d = c.a.un(b), e = 0, f = d.length;e < f;e++) {
        a.classList.add(d[e]);
      }
    } else {
      c.b.wm(a, b) || (d = c.b.$f(a), c.b.rj(a, (d ? d + " " : "") + b));
    }
  }, sp:function(a, b) {
    void 0 !== a.classList ? a.classList.remove(b) : c.b.rj(a, c.a.trim((" " + c.b.$f(a) + " ").replace(" " + b + " ", " ")));
  }, rj:function(a, b) {
    void 0 === a.className.Jf ? a.className = b : a.className.Jf = b;
  }, $f:function(a) {
    return void 0 === a.className.Jf ? a.className : a.className.Jf;
  }, Oo:function(a) {
    return a && 2 < a.length ? parseInt(a.substring(0, a.length - 2)) : 0;
  }};
  c.b.of = c.b.Ej(["transform", "WebkitTransform", "OTransform", "MozTransform", "msTransform"]);
  c.b.hh = c.b.Ej(["transformOrigin", "WebkitTransformOrigin", "OTransformOrigin", "MozTransformOrigin", "msTransformOrigin"]);
  c.b.vo = function() {
    c.b.g(window, "dragstart", c.b.preventDefault);
  };
  c.b.wo = function() {
    c.b.I(window, "dragstart", c.b.preventDefault);
  };
  c.b.qp = function(a) {
    c.b.Bg();
    this.wf = a;
    this.Bh = a.style.outline;
    a.style.outline = "none";
    c.b.g(window, "keydown", c.b.Bg, this);
  };
  c.b.Bg = function() {
    this.wf && (this.wf.style.outline = this.Bh, delete this.wf, delete this.Bh, c.b.I(window, "keydown", c.b.Bg, this));
  };
  c.b.g = c.b.Za;
  c.b.I = c.b.Yd;
  (function() {
    var a = "ActiveXObject" in window, b = a && !document.addEventListener, d = navigator.userAgent.toLowerCase(), e = -1 !== d.indexOf("webkit"), f = -1 !== d.indexOf("chrome"), g = -1 !== d.indexOf("phantom"), h = -1 !== d.indexOf("android"), k = -1 !== d.search("android [23]"), d = -1 !== d.indexOf("gecko"), l = "undefined" !== typeof orientation, m = window.navigator && window.navigator.msPointerEnabled && window.navigator.msMaxTouchPoints && !window.ta, n = window.ta && window.navigator.Pb && 
    window.navigator.ta || m, q = "devicePixelRatio" in window && 1 < window.devicePixelRatio || "matchMedia" in window && window.matchMedia("(min-resolution:144dpi)") && window.matchMedia("(min-resolution:144dpi)").matches, p = document.documentElement, v = a && "transition" in p.style, r = "WebKitCSSMatrix" in window && "m11" in new window.WebKitCSSMatrix && !k, w = "MozPerspective" in p.style, t = "OTransition" in p.style, u = !window.L_DISABLE_3D && (v || r || w || t) && !g, z = navigator.browserLanguage ? 
    navigator.browserLanguage : navigator.language, g = !window.Pb && !g && function() {
      if (n || "ontouchstart" in p) {
        return !0;
      }
      var a = document.createElement("div"), b = !1;
      if (!a.setAttribute) {
        return !1;
      }
      a.setAttribute("ontouchstart", "return;");
      "function" === typeof a.ontouchstart && (b = !0);
      a.removeAttribute("ontouchstart");
      return b;
    }();
    c.D = {Kd:a, mg:b, bq:e, Bo:d && !e && !window.opera && !a, fo:h, ho:k, chrome:f, $o:v, cq:r, Co:w, np:t, io:u, Ri:l, hp:l && e, ip:l && r, gp:l && window.opera, Xp:g, jp:m, pp:n, oj:q, language:z, An:u && !a};
  })();
  (function() {
    for (var a = document.getElementsByTagName("head")[0], b = a.childNodes, d = null, e = 0, f = b.length;e < f;e++) {
      "meta" === b[e].nodeName.toLowerCase() && "viewport" === (b[e].getAttribute ? b[e].getAttribute("name") : null) && (d = b[e]);
    }
    c.host = "";
    for (var b = document.getElementsByTagName("script"), g = /(?:\/engine).*[\/]maptalks(?:\.min)?\.js/, e = 0, f = b.length;e < f;e++) {
      var h = b[e].getAttribute ? b[e].getAttribute("src") : null;
      if (null !== h && h.match(g)) {
        c.host = h.split(g)[0];
        c.host || (c.host = window.location.protocol + "//" + window.location.host);
        break;
      }
    }
    c.D.Ri && (null === d ? (d = c.b.M("meta"), d.setAttribute("viewport"), d.setAttribute("content", "user-scalable=no"), a.appendChild(d)) : (e = d.getAttribute("content"), 0 > e.indexOf("user-scalable=no") && d.setAttribute("content", e + ",user-scalable=no")));
    d = c.b.M("link");
    d.href = c.host + "/engine/css/controls.min.css";
    d.rel = "stylesheet";
    d.type = "text/css";
    a.appendChild(d);
    c.D.mg && (d = c.b.M("meta"), d.setAttribute("http-equiv", "X-UA-Compatible"), d.setAttribute("content", "IE=edge,chrome=1"), a.appendChild(d));
    window.JSON || (d = document.createElement("script"), d.type = "text/javascript", d.src = c.host + "/engine/js/build/v2/json3.min.js", a.appendChild(d));
  })();
  c.V = {addEventListener:function(a, b, d) {
    if (!a || !b) {
      return this;
    }
    this.Ja || (this.Ja = {});
    a = a.split(" ");
    var e;
    d || (d = this);
    for (var f = 0, g = a.length;f < g;f++) {
      e = a[f];
      var h = this.Ja[e];
      h || (h = [], this.Ja[e] = h);
      e = 0;
      for (var k = h.length;e < k;e++) {
        if (b == h[e].Ne && (d && h[e].context == d || c.a.f(d) && c.a.f(h[e].context))) {
          return this;
        }
      }
      h.push({Ne:b, context:d});
    }
    return this;
  }, removeEventListener:function(a, b, d) {
    if (!a || !this.Ja || !b) {
      return this;
    }
    a = a.split(" ");
    var e;
    d || (d = this);
    for (var f = 0, g = a.length;f < g;f++) {
      e = a[f];
      e = this.Ja[e];
      if (!e) {
        break;
      }
      for (var h = [], k = 0, l = e.length;k < l;k++) {
        b == e[k].Ne && (d && e[k].context == d || c.a.f(d)) && h.push(k);
      }
      if (0 < h.length) {
        for (l = h.length, k = l - 1;0 <= k;k--) {
          e.splice(h[k], 1);
        }
      }
    }
    return this;
  }, qo:function(a) {
    this.Ja && this.Ja[a] && (this.Ja[a] = null);
  }, po:function() {
    this.Ja = null;
  }, zc:function(a) {
    return this.Ja ? (a = this.Ja[a]) ? a && 0 < a.length : !1 : !1;
  }, oi:function(a, b) {
    if (this.Ja && this.zc(a)) {
      var d = this.Ja[a];
      if (d) {
        for (var c = 0, f = d.length;c < f;c++) {
          if (d[c]) {
            var g = d[c].context;
            g ? (b || (b = {}), d[c].Ne.call(g, b)) : d[c].Ne(b);
          }
        }
      }
    }
  }};
  c.V.g = c.V.addEventListener;
  c.V.I = c.V.removeEventListener;
  c.V.bind = c.V.addEventListener;
  c.V.Yp = c.V.removeEventListener;
  c.V.oa = c.V.oi;
  c.V.cp = c.V.zc;
  c.U = function() {
  };
  c.U.extend = function(a) {
    function b() {
      if (this.options) {
        var a = this.options;
        this.options = {};
        c.a.extend(this.options, a);
      }
      this.o && this.o.apply(this, arguments);
      this.Sc && this.Lf();
      this.exceptionDefs && (this.ob = this.exceptionDefs[c.D.language]);
    }
    var d = b.ta = this.prototype, e = c.a.create(d);
    e.constructor = b;
    b.prototype = e;
    for (var f in this) {
      this.hasOwnProperty(f) && "prototype" !== f && (b[f] = this[f]);
    }
    a.yb && (c.a.extend(b, a.yb), delete a.yb);
    a.$ && (c.a.extend.apply(null, [e].concat(a.$)), delete a.$);
    e.options && (a.options = c.a.extend(c.a.create(e.options), a.options));
    c.a.extend(e, a);
    e.Sc = [];
    e.Lf = function() {
      if (!this.Lk) {
        d.Lf && d.Lf.call(this);
        this.Lk = !0;
        for (var a = 0, b = e.Sc.length;a < b;a++) {
          e.Sc[a].call(this);
        }
      }
    };
    return b;
  };
  c.U.Hi = function(a) {
    c.a.extend(this.prototype, a);
  };
  c.U.Yb = function(a) {
    c.a.extend(this.prototype.options, a);
  };
  c.U.xd = function(a) {
    var b = Array.prototype.slice.call(arguments, 1);
    this.prototype.Sc = this.prototype.Sc || [];
    this.prototype.Sc.push("function" === typeof a ? a : function() {
      this[a].apply(this, b);
    });
  };
  c.Coordinate = c.J = function(a, b) {
    c.a.isArray(a) ? (this.x = parseFloat(a[0]), this.y = parseFloat(a[1])) : (this.x = parseFloat(a), this.y = parseFloat(b));
  };
  c.J.Ee = function(a, b) {
    return c.a.Ld(a) && c.a.Ld(b) ? a.x === b.x && a.y === b.y : !1;
  };
  c.J.ta = function(a) {
    if (!c.a.isArray(a)) {
      return null;
    }
    for (var b = 0, d = a.length;b < d;b++) {
      var e = a[b];
      c.a.isArray(e) && c.a.isArray(e[0]);
    }
  };
  c.Point = c.jk = c.U.extend({o:function(a, b) {
    this.left = a;
    this.top = b;
  }});
  c.rd = {hm:function(a) {
    if (!a) {
      return null;
    }
    var b = null, d;
    for (d in c.X) {
      if (c.X.hasOwnProperty(d) && ("" + a).toUpperCase() === c.X[d].ef) {
        b = c.X[d];
        break;
      }
    }
    b ? c.a.extend(b, c.rd.a) : b = this.ri();
    return b;
  }, ri:function() {
    return c.a.extend(c.X.Vg, c.rd.a);
  }};
  c.rd.a = {Dc:function(a) {
    return c.a.mi(a, this, this.C);
  }, kf:function(a) {
    return c.a.mi(a, this, this.W);
  }};
  c.X = {};
  c.X.Nc = {};
  c.X.Nc.mf = {Ra:function(a, b) {
    if (!a || !b) {
      return 0;
    }
    try {
      var d = this.Ec(a.y), c = this.Ec(b.y), d = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin((d - c) / 2), 2) + Math.cos(d) * Math.cos(c) * Math.pow(Math.sin((this.Ec(a.x) - this.Ec(b.x)) / 2), 2)));
      return Math.round(6378137E4 * d) / 1E4;
    } catch (f) {
      return 0;
    }
  }, cm:function(a) {
    var b = 6378137 * Math.PI / 180, d = 0, c = a.length;
    if (3 > c) {
      return 0;
    }
    for (var f = 0;f < c - 1;f++) {
      var g = a[f], h = a[f + 1], d = d + (g.x * b * Math.cos(g.y * Math.PI / 180) * h.y * b - h.x * b * Math.cos(h.y * Math.PI / 180) * g.y * b)
    }
    c = a[f];
    a = a[0];
    d += c.x * b * Math.cos(c.y * Math.PI / 180) * a.y * b - a.x * b * Math.cos(a.y * Math.PI / 180) * c.y * b;
    return .5 * Math.abs(d);
  }, ga:function(a, b, d) {
    if (!a) {
      return null;
    }
    b || (b = 0);
    d || (d = 0);
    if (!b && !d) {
      return a;
    }
    var c = Math.abs(b), f = this.Ec(a.y);
    a = this.Ec(a.x);
    f += 2 * Math.sin(Math.abs(d) / 12756274) * (0 < d ? 1 : -1);
    a += 2 * Math.sqrt(Math.pow(Math.sin(c / 12756274), 2) / Math.pow(Math.cos(f), 2)) * (0 < b ? 1 : -1);
    return {x:180 * a / Math.PI, y:180 * f / Math.PI};
  }};
  c.X.Nc.nf = {Ra:function(a, b) {
    if (!a || !b) {
      return 0;
    }
    try {
      return Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));
    } catch (d) {
      return 0;
    }
  }, cm:function(a) {
    if (!c.a.aa(a)) {
      return 0;
    }
    for (var b = 0, d = 0, e = a.length;d < e;d++) {
      var f = a[d], g = null, g = d === e - 1 ? a[0] : a[d + 1], b = b + (f.x * g.y - f.y * g.x)
    }
    return Math.abs(b / 2);
  }, ga:function(a, b, d) {
    if (!a) {
      return null;
    }
    b || (b = 0);
    d || (d = 0);
    return b || d ? {x:a.x + b, y:a.y + d} : a;
  }};
  c.X.Vg = {ef:"ESPG:3857", Ug:2.003750834E7, C:function(a) {
    var b = a.x, d = a.y;
    if (!b || !d) {
      return null;
    }
    a = this.Ug;
    d = Math.log(Math.tan((90 + d) * Math.PI / 360)) / (Math.PI / 180);
    return new c.J(b * a / 180, d * a / 180);
  }, W:function(a) {
    var b = a.x, d = a.y;
    if (!b || !d) {
      return null;
    }
    a = this.Ug;
    d = 180 / Math.PI * (2 * Math.atan(Math.exp(d / a * 180 * Math.PI / 180)) - Math.PI / 2);
    return new c.J(b / a * 180, d);
  }, Ec:function(a) {
    return a * Math.PI / 180;
  }};
  c.a.extend(c.X.Vg, c.X.Nc.mf);
  c.X.Wj = {ef:"ESPG:4326", C:function(a) {
    return new c.J(a.x, a.y);
  }, W:function(a) {
    return new c.J(a.x, a.y);
  }};
  c.a.extend(c.X.Wj, c.X.Nc.mf);
  c.X.Qg = {ef:"BAIDU", C:function(a) {
    return this.hj.xl(a);
  }, W:function(a) {
    return this.hj.yl(a);
  }, Ec:function(a) {
    return a * Math.PI / 180;
  }};
  c.a.extend(c.X.Qg, c.X.Nc.mf);
  c.X.Qg.hj = {Hn:6370996.81, Yg:[1.289059486E7, 8362377.87, 5591021, 3481989.83, 1678043.12, 0], me:[75, 60, 45, 30, 15, 0], ek:[[1.410526172116255E-8, 8.98305509648872E-6, -1.9939833816331, 200.9824383106796, -187.2403703815547, 91.6087516669843, -23.38765649603339, 2.57121317296198, -.03801003308653, 1.73379812E7], [-7.435856389565537E-9, 8.983055097726239E-6, -.78625201886289, 96.32687599759846, -1.85204757529826, -59.36935905485877, 47.40033549296737, -16.50741931063887, 2.28786674699375, 1.026014486E7], 
  [-3.030883460898826E-8, 8.98305509983578E-6, .30071316287616, 59.74293618442277, 7.357984074871, -25.38371002664745, 13.45380521110908, -3.29883767235584, .32710905363475, 6856817.37], [-1.981981304930552E-8, 8.983055099779535E-6, .03278182852591, 40.31678527705744, .65659298677277, -4.44255534477492, .85341911805263, .12923347998204, -.04625736007561, 4482777.06], [3.09191371068437E-9, 8.983055096812155E-6, 6.995724062E-5, 23.10934304144901, -2.3663490511E-4, -.6321817810242, -.00663494467273, 
  .03430082397953, -.00466043876332, 2555164.4], [2.890871144776878E-9, 8.983055095805407E-6, -3.068298E-8, 7.47137025468032, -3.53937994E-6, -.02145144861037, -1.234426596E-5, 1.0322952773E-4, -3.23890364E-6, 826088.5]], Xg:[[-.0015702102444, 111320.7020616939, 0x60e374c3105a3, -0x24bb4115e2e164, 0x5cc55543bb0ae8, -0x7ce070193f3784, 0x5e7ca61ddf8150, -0x261a578d8b24d0, 0x665d60f3742ca, 82.5], [8.277824516172526E-4, 111320.7020463578, 6.477955746671607E8, -4.082003173641316E9, 1.077490566351142E10, 
  -1.517187553151559E10, 1.205306533862167E10, -5.124939663577472E9, 9.133119359512032E8, 67.5], [.00337398766765, 111320.7020202162, 4481351.045890365, -2.339375119931662E7, 7.968221547186455E7, -1.159649932797253E8, 9.723671115602145E7, -4.366194633752821E7, 8477230.501135234, 52.5], [.00220636496208, 111320.7020209128, 51751.86112841131, 3796837.749470245, 992013.7397791013, -1221952.21711287, 1340652.697009075, -620943.6990984312, 144416.9293806241, 37.5], [-3.441963504368392E-4, 111320.7020576856, 
  278.2353980772752, 2485758.690035394, 6070.750963243378, 54821.18345352118, 9540.606633304236, -2710.55326746645, 1405.483844121726, 22.5], [-3.218135878613132E-4, 111320.7020701615, .00369383431289, 823725.6402795718, .46104986909093, 2351.343141331292, 1.58060784298199, 8.77738589078284, .37238884252424, 7.45]], yl:function(a) {
    var b, d;
    b = Math.abs(a.y);
    for (var e = 0, f = this.Yg.length;e < f;e++) {
      if (b >= this.Yg[e]) {
        d = this.ek[e];
        break;
      }
    }
    a = this.ai(a, d);
    return a = new c.J(a.x.toFixed(6), a.y.toFixed(6));
  }, xl:function(a) {
    var b, d;
    a.x = this.im(a.x, -180, 180);
    a.y = this.mm(a.y, -74, 74);
    b = new c.J(a.x, a.y);
    for (var e = 0, f = this.me.length;e < f;e++) {
      if (b.y >= this.me[e]) {
        d = this.Xg[e];
        break;
      }
    }
    if (!d) {
      for (e = this.me.length - 1;0 <= e;e--) {
        if (b.y <= -this.me[e]) {
          d = this.Xg[e];
          break;
        }
      }
    }
    a = this.ai(a, d);
    return a = new c.J(a.x.toFixed(2), a.y.toFixed(2));
  }, ai:function(a, b) {
    if (a && b) {
      var d = b[0] + b[1] * Math.abs(a.x), e = Math.abs(a.y) / b[9], e = b[2] + b[3] * e + b[4] * e * e + b[5] * e * e * e + b[6] * e * e * e * e + b[7] * e * e * e * e * e + b[8] * e * e * e * e * e * e, d = d * (0 > a.x ? -1 : 1), e = e * (0 > a.y ? -1 : 1);
      return new c.J(d, e);
    }
  }, Wp:function(a) {
    return Math.PI * a / 180;
  }, Up:function(a) {
    return 180 * a / Math.PI;
  }, mm:function(a, b, d) {
    null != b && (a = Math.max(a, b));
    null != d && (a = Math.min(a, d));
    return a;
  }, im:function(a, b, d) {
    for (;a > d;) {
      a -= d - b;
    }
    for (;a < b;) {
      a += d - b;
    }
    return a;
  }};
  c.X.nf = {ef:"PIXEL", C:function(a) {
    return new c.J(a.x, a.y);
  }, W:function(a) {
    return new c.J(a.x, a.y);
  }};
  c.a.extend(c.X.nf, c.X.Nc.nf);
  c.dc = c.U.extend({$:c.V, o:function(a) {
    this.map = a;
  }, enable:function() {
    this.wd();
  }, disable:function() {
    this.Zd();
  }});
  c.dc.lf = c.dc.extend({o:function(a, b) {
    this.Sb = a;
    b && c.a.extend(this, b);
  }, enable:function() {
    this.Sb && c.b.g(this.Sb, "mousedown", this.Xi, this);
  }, disable:function() {
    this.Sb && c.b.I(this.Sb, "mousedown", this.Xi);
  }, Xi:function(a) {
    var b = this.Sb;
    b.setCapture ? b.setCapture() : window.captureEvents && window.captureEvents(window.Event.fk | window.Event.gk);
    b.ondragstart = function() {
      return !1;
    };
    c.b.g(b, "mousemove", this.Yi, this);
    c.b.g(b, "mouseup", this.$i, this);
    b.style.cursor && "default" !== b.style.cursor || (b.style.cursor = "move");
    this.oa("dragstart", {mousePos:{left:parseInt(a.clientX, 0), top:parseInt(a.clientY, 0)}});
  }, Yi:function(a) {
    this.oa("dragging", {mousePos:{left:parseInt(a.clientX, 0), top:parseInt(a.clientY, 0)}});
  }, $i:function(a) {
    var b = this.Sb;
    c.b.I(b, "mousemove", this.Yi);
    c.b.I(b, "mouseup", this.$i);
    b.releaseCapture ? b.releaseCapture() : window.captureEvents && window.captureEvents(window.Event.fk | window.Event.gk);
    "move" === b.style.cursor && (b.style.cursor = "default");
    this.oa("dragend", {mousePos:{left:parseInt(a.clientX, 0), top:parseInt(a.clientY, 0)}});
  }});
  c.DrawTool = c.Sg = c.U.extend({$:[c.V], o:function(a, b) {
    c.a.extend(this, a);
    b && this.ua(b);
    return this;
  }, Ce:{strokeSymbol:{stroke:"#474cf8", strokeWidth:3, strokeOpacity:1}}, ua:function(a) {
    if (this.map = a) {
      return this.N = a.P(), this.enable(), this;
    }
  }, enable:function() {
    if (this.map) {
      return this.Rl = this.Ge(), this.Nf(), this.$b(), this;
    }
  }, disable:function() {
    this.map && (this.Vf(), this.map.yg(this.Ge()), this.Nf());
  }, Jp:function(a) {
    this.c && (this.c.remove(), delete this.c);
    this.mode = a;
    this.Nf();
    this.$b();
  }, ya:function() {
    return this.symbol ? this.symbol : this.Ce;
  }, S:function(a) {
    a && (this.symbol = a, this.c && this.c.S(a));
  }, l:function() {
    return this.N ? this.N.gb : null;
  }, $b:function() {
    this.Wm();
    var a = this.mode;
    c.a.f(a) && (a = c.i.TYPE_CIRCLE);
    c.i.TYPE_POLYGON == a || c.i.TYPE_POLYLINE == a ? (this.map.g("click", this.Wh, this), this.map.g("mousemove", this.Ti, this), this.map.g("dblclick", this.fi, this)) : c.i.TYPE_POINT == a ? this.map.g("click", this.Xh, this) : this.map.g("mousedown", this.Si, this);
  }, Wm:function() {
    this.map.Ql();
    this.map.doubleClickZoom = !1;
  }, Nf:function() {
    this.map.I("click", this.Wh, this);
    this.map.I("click", this.Xh, this);
    this.map.I("mousemove", this.Ti, this);
    this.map.I("dblclick", this.fi, this);
    this.map.I("mousedown", this.Si, this);
    this.map.Sl();
    this.map.doubleClickZoom = !0;
  }, Xh:function(a) {
    a = this.xc(a);
    a = {coordinate:this.Gc(a), pixel:a};
    this.Hf && this.Hf(a);
    this.fireEvent("afterdraw", a);
    this.kl && this.disable();
  }, Wh:function(a) {
    a = this.xc(a);
    var b = this.Gc(a);
    if (this.c) {
      this.gg().push(b), this.map.zc("drawring") && this.fireEvent("drawring", {target:this.c, coordinate:b, pixel:a});
    } else {
      this.c = new c.zb([b]);
      var d = this.ya();
      d && this.c.S(d);
      this.fireEvent("startdraw", {coordinate:b, pixel:a});
    }
  }, Ti:function(a) {
    if (this.c && (a = this.xc(a), this.Pd(a))) {
      a = this.Gc(a);
      var b = this.Ge(), d = this.gg();
      1 === d.length ? (d.push(a), b.Na(this.c)) : d[d.length - 1] = a;
      this.kn(d);
    }
  }, fi:function(a) {
    if (this.c && (a = this.xc(a), this.Pd(a))) {
      var b = this.Gc(a), d = this.gg();
      d.push(b);
      if (!(2 > d.length)) {
        for (var e = [], f = 1, g = d.length;f < g;f++) {
          d[f].x === d[f - 1].x && d[f].y === d[f - 1].y && e.push(f);
        }
        for (f = e.length - 1;0 <= f;f--) {
          d.splice(e[f], 1);
        }
        2 > d.length || c.i.TYPE_POLYGON == this.mode && 3 > d.length || (this.c.remove(), c.i.TYPE_POLYGON == this.mode ? (this.c = new c.ca(d), (d = this.ya()) && this.c.S(d), this.Rl.Na(this.c)) : this.c.Hg(d), this.Vf(b, a));
      }
    }
  }, Si:function(a) {
    function b(a) {
      var b = e.ya(), d = e.c, f = e.Ge(), g = e.map;
      switch(e.mode) {
        case c.i.TYPE_CIRCLE:
          if (!d) {
            d = new c.La(a, 0);
            d.S(b);
            f.Na(d);
            break;
          }
          f = d.u();
          a = g.$a(f, a);
          d.Jg(a);
          break;
        case c.i.TYPE_ELLIPSE:
          if (!d) {
            d = new c.jb(a, 0, 0);
            d.S(b);
            f.Na(d);
            break;
          }
          f = d.u();
          b = g.$a(f, {x:a.x, y:f.y});
          a = g.$a(f, {x:f.x, y:a.y});
          d.ce(b);
          d.ae(a);
          break;
        case c.i.TYPE_RECT:
          if (!d) {
            d = new c.Lb(a, 0, 0);
            d.S(b);
            f.Na(d);
            break;
          }
          f = d.Da;
          b = g.$a(f, {x:a.x, y:f.y});
          a = g.$a(f, {x:f.x, y:a.y});
          d.ce(b);
          d.ae(a);
      }
      e.c = d;
    }
    function d(a) {
      if (!this.c) {
        return !1;
      }
      a = this.xc(a);
      if (this.Pd(a)) {
        return a = this.Gc(a), b(a), !1;
      }
    }
    var e = this, f;
    f = function(a) {
      if (!this.c) {
        return !1;
      }
      a = this.xc(a);
      if (this.Pd(a)) {
        var c = this.Gc(a);
        b(c);
        this.map.I("mousemove", d, this);
        this.map.I("mouseup", f, this);
        this.Vf(c, a);
        return !1;
      }
    };
    a = this.xc(a);
    if (this.Pd(a)) {
      var g = this.Gc(a);
      this.fireEvent("startdraw", {coordinate:g, pixel:a});
      b(g);
      this.map.g("mousemove", d, this);
      this.map.g("mouseup", f, this);
      return !1;
    }
  }, Vf:function(a, b) {
    if (this.c) {
      var d = this.c.Al();
      this.c.remove();
      delete this.c;
      d = {target:d, coordinate:a, pixel:b};
      this.Hf && this.Hf(d);
      this.fireEvent("afterdraw", d);
      this.kl && this.disable();
    }
  }, gg:function() {
    return this.c.cd ? this.c.cd() : this.c.Le();
  }, kn:function(a) {
    this.c.Ic ? this.c.Ic(a) : this.c.Hg(a);
  }, xc:function(a) {
    c.b.stopPropagation(a);
    return c.b.Gb(a, this.map.la);
  }, Gc:function(a) {
    var b = this.l();
    a = this.map.transform(a);
    return b.W(a);
  }, Pd:function(a) {
    var b = this.map.Ub(), d = b.width, b = b.height;
    return 0 > a.left || 0 > a.top || a.left > d || a.top > b ? !1 : !0;
  }, Ge:function() {
    var a = this.map.ea("____system_layer_drawtool");
    a || (a = new c.sa("____system_layer_drawtool"), this.map.Vc(a));
    return a;
  }, fireEvent:function(a, b) {
    b || (b = {});
    this.oa(a, b);
  }});
  c.DistanceTool = c.ie = c.U.extend({$:[c.V], o:function(a, b) {
    c.a.extend(this, a);
    b && this.ua(b);
    return this;
  }, ua:function(a) {
    if (this.map = a) {
      return this.wa = "____system_layer_distancetool", this.qc = this.da = null, this.xb = [], this.enable(), this;
    }
  }, enable:function() {
    if (this.map) {
      var a = this.qc;
      this.da = this.map.ea(this.wa);
      null != this.da && null != a ? a.enable() : (null != this.da && this.map.yg(this.wa), this.da = new c.sa(this.wa), this.map.Vc(this.da), a = (new c.Sg({mode:c.i.ok, symbol:{strokeSymbol:{stroke:"#ff0000", "stroke-width":3, opacity:.6}}, afterdrawdisable:!0})).ua(this.map), a.g("startdraw", c.a.bind(this.Mg, this)), a.g("drawring", c.a.bind(this.pg, this)), a.g("afterdraw", c.a.bind(this.Gf, this)), this.bb = 0, this.xb = [], this.hb = []);
    }
  }, disable:function() {
    if (this.map) {
      this.clear();
      var a = this.qc;
      this.map.ol || this.Xc("default");
      null != a && a.disable();
    }
  }, Mg:function(a) {
    var b = this.outline("\u8d77\u70b9", 28), d = a.coordinate;
    this.xb.push(d);
    a = this.vc(d, this.wa + "_startp_" + this.bb);
    d = new c.na(d, this.wa + "_start_" + this.bb);
    d.Gg({type:"html", content:b});
    this.da.Na([a, d]);
    this.hb.push(a);
    this.hb.push(d);
  }, pg:function(a) {
    var b = null;
    a = a.coordinate;
    rings.push(a);
    var b = this.Qh(), b = 1E3 < b ? (b / 1E3).toFixed(1) + "\u516c\u91cc" : b + "\u7c73", b = this.outline(b, 50), d = this.vc(a, this.wa + "_ringp_" + this.xb.length + "_" + this.bb);
    a = new c.na(a, _this.wa + "_ring_" + this.xb.length + "_" + this.bb);
    a.Gg({type:"html", content:b});
    this.da.Na([d, a]);
    this.hb.push(d);
    this.hb.push(a);
  }, Gf:function(a) {
    var b = a.target;
    a = a.coordinate;
    this.xb.push(a);
    var d = "\u603b\u957f", c = this.Qh(), d = 1E3 < c ? d + ((c / 1E3).toFixed(1) + "\u516c\u91cc") : d + (c.toFixed(1) + "\u7c73");
    this.De(a, d, b);
    this.Xc("default");
    this.bb++;
    this.xb = [];
    this.oa("aftermeasure", {result:c});
  }, Qh:function() {
    var a = this.xb;
    if (1 >= a.length) {
      return 0;
    }
    for (var b = 0, d = this.map.l(), c = 1, f = a.length;c < f;c++) {
      b += d.Ra(a[c - 1], a[c]);
    }
    return parseFloat(b);
  }, vc:function(a, b) {
    var d = new c.na(a, b);
    d.S({icon:{type:"picture", url:c.host + "/engine/images/point.png", width:16, height:17, offset:{x:0, y:-8}}});
    return d;
  }, clear:function() {
    null != this.da && null != this.map && this.da.clear();
    this.xb = [];
    this.bb = 0;
    this.hb = [];
  }, outline:function(a, b, d, c) {
    null == d && (d = -10);
    null == c && (c = 10);
    return '<div class="MAP_CONTROL_PointTip" style="top:' + d + "px;left:" + c + "px;width:" + b + 'px">' + a + "</div>";
  }, De:function(a, b, d) {
    var e = this.bb, f = this.hb, g = this.vc(a, this.wa + "_endp_" + e), h;
    d.Le ? h = d.Le() : d.cd && (h = d.cd());
    var k;
    k = 0 < h[h.length - 1].x - h[h.length - 2].x ? 15 : -20;
    h = this.outline("<b>" + b + "<b>", 80, 0 < h[h.length - 1].y - h[h.length - 2].y ? -30 : 10);
    b = new c.na(a, this.wa + "_end_" + e);
    b.S({icon:{type:"html", content:h}});
    var l = new c.na(a, this.wa + "_close_" + e);
    l.S({icon:{type:"picture", url:c.host + "/engine/images/m_close.png", width:12, height:12, offset:{x:k, y:-6}}});
    l.Cp(e);
    l.g("click", function() {
      d.remove();
      for (var a = 0, b = f.length;a < b;a++) {
        var c = this.hb[a].Hb(), e = "_" + l.Do();
        (null == c || "" == c || 0 == c.length || e.length > c.length ? 0 : c.substring(c.length - e.length) === e) && this.hb[a].remove();
      }
    });
    if (f && 0 < f.length) {
      k = f[f.length - 1].u();
      a = [f.length - 1];
      for (e = f.length - 3;0 < e;e -= 2) {
        if (f[e].H.x === k.x && f[e].H.y === k.y) {
          a.push(e);
        } else {
          break;
        }
      }
      e = 0;
      for (k = a.length;e < k;e++) {
        f[a[e]].remove();
      }
    }
    this.da.Na([g, l, b, d]);
    f.push(b);
    f.push(g);
    f.push(l);
  }, Xc:function() {
  }});
  c.ComputeAreaTool = c.Gn = c.U.extend({$:[c.V], o:function(a, b) {
    c.a.extend(this, a);
    b && this.ua(b);
    return this;
  }, ua:function(a) {
    if (this.map = a) {
      return this.mode || (this.mode = c.i.jh), this.wa = "____system_layer_computeareatool", this.qc = this.da = null, this.xb = [], this.enable(), this;
    }
  }, enable:function() {
    this.map && (this.da = this.map.ea(this.wa), null != this.da && null != this.qc ? this.qc.enable() : (null != this.da && this.map.yg(this.wa), this.da = new c.sa(this.wa), this.map.Vc(this.da), drawTool = (new c.Sg({mode:c.i.jh, symbol:{strokeSymbol:{stroke:"#ff0000", "stroke-width":2, opacity:1}, fillSymbol:{fill:"#ff0000", "fill-opacity":.2}}, afterdrawdisable:!0})).ua(this.map), drawTool.g("startdraw", c.a.bind(this.Mg, this)), drawTool.g("drawring", c.a.bind(this.pg, this)), drawTool.g("afterdraw", 
    c.a.bind(this.Gf, this)), this.ug = this.bb = 0, this.hb = []));
  }, disable:function() {
    this.clear();
    null != this.qc && this.qc.disable();
  }, pg:function(a) {
    a = a.coordinate;
    this.ug++;
    a = this.vc(a, this.wa + "_ringp_" + this.ug + "_" + this.bb);
    this.da.Na([a]);
    this.hb.push(a);
  }, Mg:function(a) {
    a = this.vc(a.coordinate, this.wa + "_ringp_" + this.ug + "_" + this.bb);
    this.da.Na([a]);
    this.hb.push(a);
  }, Gf:function(a) {
    var b = a.coordinate;
    a = a.target;
    var d = this.map.nb(a), c = null;
    1E6 < d ? c = (d / 1E6).toFixed(1) + "\u5e73\u65b9\u516c\u91cc" : c = d.toFixed(1) + "\u5e73\u65b9\u7c73";
    this.De(b, c, a);
    this.Xc("default");
    this.bb++;
    this.oa("aftermeasure", {result:d});
  }, clear:function() {
    this.map && (null != this.da && this.da.clear(), this.map.ol || this.Xc("default"), this.xb = []);
  }, outline:c.ie.prototype.outline, vc:c.ie.prototype.vc, De:c.ie.prototype.De, Xc:c.ie.prototype.Xc});
  c.LodInfo = {crs3857:{projection:"ESPG:3857", maxZoomLevel:18, minZoomLevel:1, resolutions:[156543.0339, 78271.51695, 39135.758475, 19567.8792375, 9783.93961875, 4891.969809375, 2445.9849046875, 1222.99245234375, 611.496226171875, 305.7481130859375, 152.87405654296876, 76.43702827148438, 38.21851413574219, 19.109257067871095, 9.554628533935547, 4.777314266967774, 2.388657133483887, 1.1943285667419434, .5971642833709717], origin:{top:2.003750834E7, left:-2.003750834E7, bottom:-2.003750834E7, right:2.003750834E7}, 
  tileSize:{width:256, height:256}}, globalmercator:{projection:"ESPG:3857", maxZoomLevel:18, minZoomLevel:1, resolutions:[156543.0339, 78271.51695, 39135.758475, 19567.8792375, 9783.93961875, 4891.969809375, 2445.9849046875, 1222.99245234375, 611.496226171875, 305.7481130859375, 152.87405654296876, 76.43702827148438, 38.21851413574219, 19.109257067871095, 9.554628533935547, 4.777314266967774, 2.388657133483887, 1.1943285667419434, .5971642833709717], origin:{top:2.003750834E7, left:-2.003750834E7, 
  bottom:-2.003750834E7, right:2.003750834E7}, tileSize:{width:256, height:256}}, baidu:{projection:"BAIDU", maxZoomLevel:19, minZoomLevel:1, resolutions:function() {
    for (var a = Math.pow(2, 18), b = [], d = 0;20 > d;d++) {
      b[d] = a, a *= .5;
    }
    return b;
  }(), origin:{top:33554432, left:-33554432, bottom:-33554432, right:33554432}, tileSize:{width:256, height:256}}};
  c.ne = {Oj:{mo:function(a) {
    var b = [], d = [], c = this.rp, f = this.resolutions;
    a || (a = {x:121.45634, y:31.22787});
    for (var g = c.C({x:a.x, y:a.y}), h = 0, k = f.length;h < k;h++) {
      var l = c.W({x:g.x + f[h], y:g.y}), m = c.W(g.x, g.y + f[h]), m = c.Ra(a, m);
      b.push(c.Ra(a, l));
      d.push(m);
    }
  }}, Sj:{wc:function(a, b) {
    if (!a || null === b || void 0 === b) {
      return null;
    }
    var d = this.resolutions[b], c = this.tileSize, f = this.Jd(a, b), g = f.y, f = f.x;
    return {x:f, y:g, offsetLeft:Math.abs(Math.round((a.x - (c.width * f * d + this.origin.left)) / d)), offsetTop:Math.abs(Math.round((a.y - (this.origin.top - g * d * c.height)) / d))};
  }, Jd:function(a, b) {
    var d = this.tileSize, c = this.origin, f = this.resolutions[b];
    return {y:Math.ceil((c.top - a.y) / (f * d.height)) - 1, x:Math.floor((a.x - c.left) / (f * d.width))};
  }, hg:function(a, b, d, c) {
    return {y:a + d, x:b + c};
  }, jg:function(a, b, d) {
    d = this.resolutions[d];
    var c = this.tileSize, f = this.origin;
    return this.gb.W({x:b * d * c.width + f.left, y:f.top - a * d * c.height});
  }}, ak:{wc:function(a, b) {
    var d = this.tileSize, c = this.resolutions[b], f = this.Jd(a, b), g = f.y, f = f.x;
    return {y:g, x:f, offsetLeft:Math.round((a.x - (d.width * f * c + this.origin.left)) / c), offsetTop:Math.round(((g + 1) * c * d.height + this.origin.bottom - a.y) / c)};
  }, Jd:function(a, b) {
    var d = this.origin, c = this.tileSize, f = this.resolutions[b];
    return {y:Math.floor((a.y - d.bottom) / (f * c.height)), x:Math.floor((a.x - d.left) / (f * c.width))};
  }, hg:function(a, b, d, c) {
    return {y:a - d, x:b + c};
  }, jg:function(a, b, d) {
    var c = this.tileSize;
    d = this.resolutions[d];
    return this.gb.W({x:b * d * c.width + this.origin.left, y:(a + 1) * d * c.height + this.origin.bottom});
  }}, Lj:{wc:function(a, b) {
    var d = this.tileSize, c = this.resolutions[b], f = this.Jd(a, b), g = f.y, f = f.x;
    return {y:g, x:f, offsetLeft:Math.round((a.x - d.width * f * c) / c), offsetTop:Math.round(((g + 1) * c * d.height - a.y) / c)};
  }, Jd:function(a, b) {
    var d = this.tileSize, c = this.resolutions[b];
    return {y:Math.floor(a.y / (c * d.height)), x:Math.floor(a.x / (c * d.width))};
  }, hg:function(a, b, d, c) {
    return {y:a - d, x:b + c};
  }, jg:function(a, b, d) {
    var c = this.tileSize;
    d = this.resolutions[d];
    return this.gb.W({x:b * d * c.width, y:(a + 1) * d * c.height});
  }}};
  c.dk = c.U.extend({$:c.ne.Oj, o:function(a) {
    if (this.ql(a)) {
      var b = null;
      c.a.fb(a) && (b = a, a = c.LodInfo[a.toLowerCase()]);
      c.a.extend(this, a);
      this.padding || (this.padding = {width:0, height:0});
      this.gb = c.rd.hm(a.projection);
      "baidu" === a.projection.toLowerCase() ? c.a.extend(this, c.ne.Lj) : b && "globalmercator" === b ? c.a.extend(this, c.ne.ak) : c.a.extend(this, c.ne.Sj);
      this.origin && (this.Tf = this.origin.right >= this.origin.left ? 1 : -1, this.Uf = this.origin.top >= this.origin.bottom ? 1 : -1);
    }
  }, ql:function(a) {
    return a ? c.a.fb(a) && c.LodInfo[a.toLowerCase()] ? !0 : a.srs ? !0 : !1 : !1;
  }, load:function(a) {
    this.resolutions && a && a();
  }, Ee:function(a, b) {
    try {
      return a.resolutions[b] === this.resolutions[b] && this.projection === a.projection;
    } catch (d) {
      return !1;
    }
  }, Ro:function() {
    return this.gb;
  }, pm:function(a) {
    return this.resolutions ? this.resolutions[a] : 0;
  }});
  c.lk = c.U.extend({$:c.V, pc:null, o:function(a) {
    this.rb = a;
    this.ac = {};
    this.Ml = "/engine/images/marker.png";
  }, load:function(a, b) {
    this.Ng = a;
    this.Dj = b;
    if (this.pc) {
      this.Oi();
    } else {
      var d = this;
      this.pc = new Image;
      this.pc.onload = function() {
        d.Oi();
      };
      this.pc.src = c.host + this.Ml;
    }
  }, jl:function(a) {
    c.a.fb(a) && (this.rb || (this.rb = []), this.ac[a] || this.rb.push(a));
  }, Oi:function() {
    function a(a) {
      a || (a = this);
      a instanceof Image || (a = this);
      a && a["in"] && (d.ac[a["in"]] = a);
      d.check();
    }
    function b() {
      d.ac[this["in"]] = this.pc;
    }
    if (this.rb && c.a.isArray(this.rb)) {
      for (var d = this, e = !1, f = 0, g = this.rb.length;f < g;f++) {
        if (this.rb[f] && !this.ac[this.rb[f]]) {
          var e = !0, h = new Image;
          h["in"] = this.rb[f];
          h.onload = a;
          h.onerror = b;
          h.onabort = b;
          h.src = this.rb[f];
          h.complete && a(h);
        }
      }
      e || this.check();
    } else {
      this.Vi();
    }
  }, gm:function(a) {
    if (!this.ac || !a) {
      return this.pc;
    }
    a = this.ac[a];
    a || (a = this.pc);
    return a;
  }, check:function() {
    var a = !0, b;
    for (b in this.ac) {
      if (!this.ac[b].complete) {
        a = !1;
        break;
      }
    }
    a && this.Vi();
  }, Vi:function() {
    this.lc && clearTimeout(this.lc);
    var a = this;
    this.lc = setTimeout(function() {
      a.Ng && (this.Dj ? a.Ng.call(this.Dj) : a.Ng());
    }, 10);
  }});
  c.Layer = c.qd = c.U.extend({$:c.V, Ed:{Wg:"layerloaded"}, Wa:function(a, b) {
    a && (this.map = a, this.za(b), c.a.f(this.visible) && (this.visible = !0));
  }, Wo:function() {
    return this.zIndex;
  }, Hb:function() {
    return this.identifier;
  }, df:function(a) {
    this.identifier = a;
  }, h:function() {
    return this.map ? this.map : null;
  }, eb:function() {
    return this.Fd ? this.Fd : null;
  }, ko:function() {
    var a = this.fg(), b = this.ui(a);
    if (b !== a.length - 1) {
      0 <= b && (a.splice(b, 1), a.push(this));
      for (var b = 0, d = a.length;b < d;b++) {
        a[b].za(a[b].Ph + b);
      }
    }
  }, jo:function() {
    var a = this.fg(), b = this.ui(a);
    if (0 !== b) {
      0 < b && (a.splice(b, 1), a.push(this));
      for (var b = 0, d = a.length;b < d;b++) {
        a[b].za(a[b].Ph + b);
      }
    }
  }, ui:function(a) {
    if (!a) {
      return -1;
    }
    for (var b = -1, d = 0, c = a.length;d < c;d++) {
      if (a[d] == this) {
        b = d;
        break;
      }
    }
    return b;
  }, fg:function() {
    return this.map ? this instanceof c.sa ? this.map.cc : this instanceof c.Aa || this instanceof c.Aa.Rg ? this.map.jc : this instanceof c.Tg ? this.rc : this instanceof c.pe ? this.op : this instanceof c.Jn ? this.map.Zo : null : null;
  }});
  c.TileLayer = c.pe = c.qd.extend({ze:15, options:{opacity:1, errorTileUrl:c.host + "/engine/images/error.png", showOnTileLoadComplete:!0}, o:function(a, b) {
    this.df(a);
    this.N = new c.dk(b.crs);
    delete b.crs;
    c.a.wj(this, b);
    this.options.urlTemplate && (this.options.urlTemplate = this.options.urlTemplate.replace(/{X}/g, "{x}").replace(/{Y}/g, "{y}").replace(/{Z}/g, "{z}").replace(/{S}/g, "{s}"));
  }, P:function() {
    return !this.N && this.map ? this.map.P() : this.N;
  }, Me:function(a, b, d) {
    if (!this.options.urlTemplate) {
      return this.options.errorTileUrl;
    }
    var e = this.options.urlTemplate, f = "";
    if (this.options.subdomains) {
      var g = this.options.subdomains;
      c.a.isArray(g) && 0 < g.length && (f = g[Math.round(Math.random() * (g.length - 1))]);
    }
    return e.replace(/{x}/g, a).replace(/{y}/g, b).replace(/{z}/g, d).replace(/{s}/g, f);
  }, za:function(a) {
    this.zIndex = a;
    this.Jc && (this.Jc.style.zIndex = this.ze + a);
  }, Cc:function() {
    this.Gd(!1);
  }, ub:function() {
    this.Gd(!1);
  }, vb:function(a) {
    this.Vh();
    !a && this.Jc && this.clear();
  }, Ea:function() {
    this.load();
  }, hd:function() {
    this.Gd(!1);
  }, gj:function() {
    return !0;
  }, load:function() {
    if (this.h() && (this.Jc || this.Bm(), this.clear(), this.gj())) {
      this.Vh();
      var a = this;
      this.Fj = setTimeout(function() {
        a.Gd(a.options.showOnTileLoadComplete);
      }, 20);
    }
  }, clear:function() {
    this.de = {};
    this.Jc.innerHTML = "";
  }, zi:function() {
    return this.P().tileSize;
  }, Ke:function() {
    var a = this.P().padding;
    a || (a = {width:0, height:0});
    return a;
  }, Vh:function() {
    this.Fj && clearTimeout(this.Fj);
    this.Fe && clearTimeout(this.Fe);
    this.lc && clearTimeout(this.lc);
  }, Gd:function(a) {
    function b() {
      for (var a = h.length, b = 0, d = 0;d < a;d++) {
        h[d].complete && b++;
      }
      b > 2 * a / 3 && (g.lc && clearTimeout(g.lc), g.Fe && clearTimeout(g.Fe), g.lc = setTimeout(function() {
        c.appendChild(k);
        g.Fe = setTimeout(function() {
          g.oa(g.Ed.Wg, {target:this});
        }, 500);
      }, 10));
    }
    var d = this.map;
    if (d) {
      var c = this.Jc, f = this.P();
      if (c && f) {
        var g = this, h = [], k = document.createDocumentFragment(), l = this.zi(), m = d.w, n = d.ja(), q = n.left, n = n.top, p = d.width, v = d.height, d = f.wc(d.Ba(), m), r, w;
        r = Math.round(parseFloat(v / 2 - d.offsetTop));
        w = Math.round(parseFloat(p / 2 - d.offsetLeft));
        for (var t = Math.ceil(Math.abs(r) / l.width), v = Math.ceil(Math.abs(v - r) / l.height), p = Math.ceil(Math.abs(p - w) / l.width), u = this.de, z = -Math.ceil(Math.abs(w) / l.height);z < p;z++) {
          for (var A = -t;A <= v;A++) {
            var x = f.hg(d.y, d.x, A, z), y = x.y + "," + x.x, B = w + l.width * z - q, C = r + l.height * A - n;
            if (u[y]) {
              if (x = u[y].zn, B != u[y].left || C != u[y].top) {
                x.style.left = B + "px", x.style.top = C + "px", u[y].left = B, u[y].top = C;
              }
            } else {
              if (x = this.Me(x.x, x.y, m), x = this.Kl(B, C, x, a ? b : null)) {
                x.id = y, a && h.push(x), k.appendChild(x), u[y] = {left:B, top:C, zn:x};
              }
            }
          }
        }
        a ? b() : c.appendChild(k);
        this.kj && clearTimeout(this.kj);
        this.kj = setTimeout(function() {
          g.$m();
        }, 500);
      }
    }
  }, Kl:function(a, b, d, e) {
    var f = new Image, g = this.zi(), h = this.Ke(), k = c.host + "/engine/images/transparent.gif";
    f.style.cssText = "width:" + (g.width + h.width) + "px;height:" + (g.height + h.height) + "px;unselectable:on;position:absolute;left: " + (a - h.width / 2) + "px;top: " + (b - h.height / 2) + "px;max-width:none;-moz-user-select: -moz-none;-webkit-user-select: none;";
    f.className = "MAP_FADE_ANIM";
    f.onload = function() {
      this.style.cssText += ";opacity:1;";
      e && e();
    };
    f.onerror = function() {
      this.onabort = this.onerror = this.onload = null;
      this.src = k;
      e && e();
    };
    f.onabort = function() {
      this.onabort = this.onerror = this.onload = null;
      this.src = k;
      e && e();
    };
    f.src = d;
    return f;
  }, $m:function() {
    if (!this.map.Ji) {
      var a = this.Jc;
      if (a) {
        var b = this.map, d = b.height, e = b.width, f = b.ja(), b = f.left, f = f.top, g = this.P().tileSize, h = this.Ke(), k = null;
        try {
          k = a.firstChild;
        } catch (l) {
        }
        if (k) {
          for (a = [];k;) {
            if (this.de[k.id]) {
              var m = this.de[k.id].left + h.width / 2 + b, n = this.de[k.id].top + h.height / 2 + f;
              if (m >= e || m <= -g.width || n > d || n < -g.height) {
                a.push(k), delete this.de[k.id];
              }
            }
            k = k.nextSibling;
          }
          d = a.length;
          if (0 !== d) {
            for (e = 0;e < d;e++) {
              c.b.ma(a[e]);
            }
          }
        }
      }
    }
  }, Bm:function() {
    var a = this.map.A.Qd;
    if (a) {
      var b = c.b.M("div");
      b.style.cssText = "position:absolute;top:0px;left:0px;z-index:" + (this.ze + this.zIndex);
      var d = a.childNodes;
      d && 0 < d.length ? a.insertBefore(b, d[0]) : a.appendChild(b);
      c.D.Kd && (b.onselectstart = function() {
        return !1;
      }, b.setAttribute("unselectable", "on"), b.ondragstart = function() {
        return !1;
      });
      this.Jc = b;
    }
  }});
  c.DynamicLayer = c.Tg = c.pe.extend({ze:50, options:{showOnTileLoadComplete:!1}, o:function(a, b) {
    this.df(a);
    this.kg = this.je();
    c.a.extend(this.options, b);
    this.n = 0;
  }, je:function() {
    return (new Date).getTime() + "" + (65536 * (1 + Math.random()) + (new Date).getTime() | 0).toString(16).substring(1);
  }, reload:function() {
    this.n += 1;
    this.load();
  }, gj:function() {
    var a = this.h().w, b = this.Je(), d = this.Ie();
    if (!c.a.f(b) && 0 <= b && a < b || !c.a.f(d) && 0 <= d && a > d || !this.options.layers || !this.options.mapdb) {
      return !1;
    }
    var e = this, a = c.host + "/dynamic/index", b = null;
    (d = this.qm()) && (b = JSON.stringify(d.Xa()));
    var b = this.Yf(this.Xl(), b), f = new c.a.Ga(a, 0, b, function(a) {
      (a = c.a.ld(a)) && a.success && e.Gd(e.options.showOnTileLoadComplete);
    });
    this.Ni && clearTimeout(this.Ni);
    this.Ni = setTimeout(function() {
      f.Vd();
      e.Ei || (e.Ei = new c.a.Ga(c.host + "/dynamic/heartbeat", 0, "guid=" + e.kg, function() {
      }), setInterval(function() {
        e.Ei.get();
      }, 6E4));
    }, 230);
    return !1;
  }, Uo:function() {
    return this.options.padding;
  }, Me:function(a, b, d) {
    return this.nm(b, a, d);
  }, nm:function(a, b, d) {
    var e = c.host + "/dynamic/tile?";
    return e += this.om(a, b, d);
  }, om:function(a, b, d) {
    var c = this.h();
    a = c.P().jg(a, b, d);
    b = "guid=" + this.kg;
    b += "&nw=" + a.x + "," + a.y;
    b += "&z=" + c.w;
    return b += "&c=" + this.n;
  }, Yf:function(a, b) {
    var d = this.h(), e = d.P(), f = this.Ke(), d = {coordinateType:c.a.f(this.options.coordinateType) ? null : this.options.coordinateType, projection:e.projection, guid:this.kg, encoding:"utf-8", mapdb:this.options.mapdb, padding:f.width + "," + f.height, len:e.tileSize.width, res:e.resolutions[d.w], layers:this.options.layers, condition:a, spatialFilter:c.a.f(b) ? null : encodeURIComponent(b), opacity:c.a.f(this.vi()) ? null : this.vi(), symbolConfig:c.a.f(this.options.symbolConfig) ? null : encodeURIComponent(JSON.stringify(this.options.symbolConfig))}, 
    e = [], g;
    for (g in d) {
      d.hasOwnProperty(g) && !c.a.f(d[g]) && e.push(g + "=" + d[g]);
    }
    return e.join("&");
  }, Ke:function() {
    var a = this.options.padding;
    a || (a = {width:0, height:0});
    return a;
  }, Np:function(a) {
    this.options.padding = a;
    return this;
  }, Je:function() {
    var a = this.h(), b = this.options.minZoomLevel;
    c.a.f(b) && (b = a.Je());
    return b;
  }, Ie:function() {
    var a = this.h(), b = this.options.maxZoomLevel;
    c.a.f(b) && (b = a.Ie());
    return b;
  }, mn:function(a) {
    if (this.map) {
      var b = this.map.Je();
      a < b && (a = b);
    }
    this.options.minZoomLevel = a;
    return this;
  }, ln:function(a) {
    if (this.map) {
      var b = this.map.Ie();
      a > b && (a = b);
    }
    this.options.maxZoomLevel = a;
    return this;
  }, Mp:function(a) {
    this.options.opacity = a;
    return this;
  }, vi:function() {
    return this.options.opacity;
  }, Ep:function(a) {
    this.options.condition = a;
    return this;
  }, Xl:function() {
    return this.options.condition;
  }, Op:function(a) {
    this.options.spatialFilter = a;
    return this;
  }, qm:function() {
    return this.options.spatialFilter;
  }});
  c.oe = c.qd.extend({exceptionDefs:{"en-US":{DUPLICATE_GEOMETRY_ID:"Duplicate ID for the geometry"}, "zh-CN":{DUPLICATE_GEOMETRY_ID:"\u91cd\u590d\u7684Geometry ID"}}, dm:function(a) {
    return c.a.f(a) || "" === a || !this.Rc[a] ? null : this.Rc[a];
  }, Wl:function() {
    var a = this.ic, b = [], d;
    for (d in a) {
      a.hasOwnProperty(d) && b.push(a[d]);
    }
    return b;
  }, Na:function(a, b) {
    if (a) {
      if (c.a.isArray(a)) {
        for (var d = 0, e = 0, f = 0, g = null, h = 0, k = a.length;h < k;h++) {
          var l = a[h];
          if (l) {
            var m = l.Hb();
            if (m) {
              if (!c.a.f(this.Rc[m])) {
                throw Error(this.ob.DUPLICATE_GEOMETRY_ID + ":" + m);
              }
              this.Rc[m] = l;
            }
            m = c.a.je();
            l.jn(m);
            this.ic[m] = l;
            l.Wa(this);
            b && (m = l.u(), l = l.eb(), m && l && (e += m.x, f += m.y, g = c.B.Bd(g, l), d++));
          }
        }
        if (h = this.h()) {
          this.We(a), b && (g = h.bm(g), h.dn({x:e / d, y:f / d}, g));
        }
        return this;
      }
      this.Na([a], b);
    }
  }, Db:function(a, b) {
    var d = this.ic;
    b || (b = this);
    for (var c in d) {
      d.hasOwnProperty(c) && a.call(b, d[c]);
    }
  }, tp:function(a) {
    a instanceof c.i || (a = this.dm(a));
    if (a && this == a.ea()) {
      return a.remove(), this;
    }
  }, clear:function() {
    this.Db(function(a) {
      a.remove();
    });
    this.Rc = {};
    this.ic = {};
    return this;
  }, Mm:function(a) {
    if (a && this == a.ea()) {
      var b = a.Ii;
      c.a.f(b) || (a = a.Hb(), c.a.f(a) || delete this.Rc[a], delete this.ic[b]);
    }
  }, Ud:function() {
    this.clear();
    delete this.map;
  }, Io:function() {
    return this.ic;
  }});
  c.oe.xd(function() {
    this.ic = {};
    this.Rc = {};
  });
  c.SVGLayer = c.sa = c.oe.extend({ze:200, o:function(a) {
    this.identifier = a;
  }, show:function() {
    if (!this.visible) {
      return this.Db(function(a) {
        a.show();
      }), this.visible = !0, this;
    }
  }, F:function() {
    if (this.visible) {
      return this.Db(function(a) {
        a.F();
      }), this.visible = !1, this;
    }
  }, Xb:function() {
    return this.visible && this.Se && "none" !== this.Se.style.display;
  }, We:function(a) {
    for (var b = 0, d = a.length;b < d;b++) {
      var c = a[b];
      c && c.K && c.K.Ve(this.Se, this.zIndex);
    }
  }, ua:function() {
    this.Db(function(a) {
      a.K && a.K.Ve(this.Se, this.zIndex);
    });
  }, load:function() {
    var a = this.h();
    this.Se = a.A.hf;
    a.ei();
    this.ua();
  }, za:function(a) {
    this.zIndex = a;
    this.Db(function(b) {
      b.K && b.K.za(a);
    });
  }, mp:function() {
  }, Cc:function() {
  }, ub:function() {
  }, vb:function() {
  }, Ea:function() {
    this.Db(function(a) {
      a.Ea();
    });
  }, hd:function() {
  }});
  c.CanvasLayer = c.Aa = c.oe.extend({o:function(a) {
    this.identifier = a;
  }, show:function() {
    if (!this.visible) {
      return this.visible = !0, this.We(), this;
    }
  }, F:function() {
    if (this.visible) {
      return this.visible = !1, this.We(), this;
    }
  }, Xb:function() {
    return this.visible;
  }, za:function() {
  }, We:function() {
    this.h().zg();
  }});
  c.Aa.Rg = c.oe.extend({bo:0, o:function() {
    this.Ag = new c.lk;
  }, load:function() {
    this.Re = this.h().A.Mf;
    this.Dl();
    this.$d();
  }, Dl:function() {
    if (!this.Jb) {
      var a = this.h();
      this.Re && a && (a = c.b.M("canvas"), a.style.cssText = "position:absolute;top:0px;left:0px;", this.Hh(a), this.Re.appendChild(a), this.Jb = a, this.Wc = this.Jb.getContext("2d"), this.Wc.translate(.5, .5), c.D.oj && this.Wc.scale(2, 2));
    }
  }, Hh:function(a) {
    var b = this.map.Ub(), d = c.D.oj ? 2 : 1;
    a.height = d * b.height;
    a.width = d * b.width;
    a.style.width = b.width + "px";
    a.style.height = b.height + "px";
  }, $d:function(a) {
    var b = this;
    a ? b.ii() : (this.mj && clearTimeout(this.mj), this.mj = setTimeout(function() {
      b.ii();
    }, 10));
  }, ii:function() {
    this.Jm(function() {
      var a = this.h(), b = a.Ub();
      this.Wc.clearRect(0, 0, b.width, b.height);
      b = a.eb();
      this.Hh(this.Jb);
      a = a.ja();
      this.Jb.style.left = -a.left + "px";
      this.Jb.style.top = -a.top + "px";
      this.an(b);
    });
  }, an:function(a) {
    var b = this, d = b.h().eb();
    a && c.B.Od(a, d) && (this.tl(a), b.Db(function(d) {
      if (d && d.Xb()) {
        var f = d.mc(d.l());
        f && c.B.Od(f, a) && d.K.Ve(b.Wc, b.Ag);
      }
    }));
  }, tl:function(a) {
    var b = this.h(), d = b.l(), c = d.C({x:a.xmin, y:a.ymin});
    a = d.C({x:a.xmax, y:a.ymax});
    c = b.ge(c);
    b = b.ge(a);
    this.Wc.clearRect(Math.min(c.left, b.left), Math.min(c.top, b.top), Math.abs(c.left - b.left), Math.abs(c.top - b.top));
  }, Jm:function(a) {
    var b = this, d = b.h().eb();
    b.Db(function(a) {
      if (a && a.Xb()) {
        var f = a.eb();
        f && c.B.Od(f, d) && (a = a.am()) && b.Ag.jl(a);
      }
    });
    b.Ag.load(function() {
      b.Ap = !0;
      a.call(b);
    });
  }, Db:function(a, b) {
    var d = this.fg();
    if (c.a.aa(d)) {
      b || (b = this);
      for (var e = 0, f = d.length;e < f;e++) {
        if (d[e] && d[e].Xb()) {
          var g = d[e].ic;
          if (g) {
            for (var h in g) {
              g.hasOwnProperty(h) && a.call(b, g[h]);
            }
          }
        }
      }
    }
  }, F:function() {
    this.Jb && (this.Jb.style.display = "none");
  }, show:function() {
    this.Jb && (this.Jb.style.display = "");
  }, Cc:function() {
  }, ub:function() {
    this.$d();
  }, hd:function() {
    this.$d();
  }, vb:function() {
    this.F();
    var a = this.h().Ub();
    this.Wc.clearRect(0, 0, a.width, a.height);
  }, Ea:function() {
    this.$d();
    this.show();
  }, za:function() {
  }});
  c.VisualizerLayer = c.Wn = c.qd.extend({});
  c.HeatmapLayer = c.bk = c.qd.extend({yb:{Nj:function() {
    for (var a = c.b.M("div"), b = ["transform", "WebkitTransform", "MozTransform", "OTransform", "msTransform"], d = 0;d < b.length;d++) {
      var e = b[d];
      if (void 0 !== a.style[e]) {
        return e;
      }
    }
    return b[0];
  }()}, o:function(a) {
    this.Oa = a;
    this.hc = c.b.M("div");
    this.sd = [];
    this.td = 1;
    this.Oa.Ia = this.hc;
  }, lp:function(a) {
    var b = a.Ub();
    this.G = a;
    this.el = b.width;
    this.Kk = b.height;
    this.hc.style.width = this.el + "px";
    this.hc.style.height = this.Kk + "px";
    this.hc.style["z-index"] = 300;
    this.zf();
    a.A.ed.appendChild(this.hc);
    this.xh || (this.xh = h337.create(this.Oa));
    a.g("zoomend", this.zf, this);
    a.g("dragend", this.Qc, this);
    this.Qc();
  }, Ud:function(a) {
    a.A.ed.removeChild(this.hc);
    a.I("zoomend", this.zf, this);
    a.I("dragend", this.Qc, this);
  }, Qc:function() {
    if (this.G) {
      var a = this.G.nc(this.Tk);
      this.hc.style[c.bk.Nj] = "translate(" + -Math.round(a.left) + "px," + -Math.round(a.top) + "px)";
      this.ye();
    }
  }, ye:function() {
    var a, b;
    a = this.G.eb();
    b = Math.pow(2, this.G.w);
    if (0 != this.sd.length) {
      var d = {max:this.td}, e = [];
      b = this.Oa.Bp ? b : 1;
      for (var f = 0, g = this.Oa.Gj, h = this.sd.length;h--;) {
        var k = this.sd[h], l = k[g], m = k.bi;
        c.Oc.Qe(m, a) && (l > f && (f = l), c.Oc.Qe(m, a) && (m = this.G.nc(m), m = {x:Math.round(m.left), y:Math.round(m.top)}, m[g] = l, m.s = k.s ? k.s * b : (this.Oa.s || 2) * b, e.push(m)));
      }
      this.Oa.Zp && (d.max = f);
      d.data = e;
      this.xh.setData(d);
    }
  }, setData:function(a) {
    this.td = a.max || this.td;
    var b = this.Oa.Dn || "y", d = this.Oa.Cn || "x", e = this.Oa.Gj || "value";
    a = a.data;
    for (var f = a.length, g = [];f--;) {
      var h = a[f], k = {bi:new c.J(h[d], h[b])};
      k[e] = h[e];
      h.s && (k.s = h.s);
      g.push(k);
    }
    this.sd = g;
    this.Qc();
  }, hl:function(a) {
    if (0 < a.length) {
      for (var b = a.length;b--;) {
        this.hl(a[b]);
      }
    } else {
      var b = this.Oa.Gj || "value", d = {bi:new c.J(a[this.Oa.Cn || "x"], a[this.Oa.Dn || "y"])};
      d[b] = a[b];
      this.td = Math.max(this.td, d[b]);
      a.s && (d.s = a.s);
      this.sd.push(d);
      this.Qc();
    }
  }, zf:function() {
    this.Tk = this.G.Cg(new c.jk(0, 0));
    this.Qc();
  }});
  c.kb = {};
  c.kb.a = {jf:function(a) {
    if (!c.a.isArray(a)) {
      return null;
    }
    for (var b = [], d = 0, e = a.length;d < e;d++) {
      b.push([a[d].x, a[d].y]);
    }
    return b;
  }};
  c.kb.Xj = {Aj:function(a) {
    this.Wf();
    this.Dd = new c.Yj(this, a);
    this.Dd.start();
  }, Wf:function() {
    this.Dd && this.Dd.stop();
  }, Wb:function() {
    return this.Dd ? this.Dd.Wb() : !1;
  }, zj:function() {
    this.G = this.h();
    this.F();
    if (this.type === c.i.ih) {
      this.gc = new c.na(this.u());
      var a = this.He(), b = a ? a.type : null;
      "picture" !== b && "text" === b && (b = a.textStyle, this.gc.Gg({type:"text", Tp:{color:b.color, padding:b.padding, size:b.size, font:b.font, weight:b.weight, background:b.background, stroke:"#ff0000", strokewidth:b.strokewidth, placement:b.placement}, content:a.content, offset:a.offset}));
    } else {
      a = this.To(), a.stroke = "#ff0000", this.gc.Qp(a);
    }
    this.uh().Na(this.gc);
    this.G.g("mousemove", this.sh, this).g("mouseup", this.th, this);
    this.oa("dragstart", {target:this});
  }, sh:function(a) {
    this.Md = !0;
    this.Xf = c.b.Gb(a, this.G.la);
    this.ff || (this.ff = this.Xf);
    a = {left:this.Xf.left - this.ff.left, top:this.Xf.top - this.ff.top};
    var b = this.G.nc(this.gc.u()), d = this.G.ja();
    this.ff = a = {left:b.left + a.left - d.left, top:b.top + a.top - d.top};
    a = this.G.od(a);
    this.gc.Hc(a);
    this.gc.Fa();
    this.Hc(a);
    this.Fa();
    this.oa("dragging", {target:this});
  }, th:function() {
    this.gc.remove();
    this.uh().clear();
    this.show();
    this.Md = !1;
    this.G.I("mousemove", this.sh, this).I("mouseup", this.th, this);
    this.oa("dragend", {target:this});
  }, Md:function() {
    return this.Md ? this.Md : !1;
  }, uh:function() {
    var a = this.h();
    if (a) {
      return a.ea("__mt__internal_drag_layer") || a.Vc(new c.sa("__mt__internal_drag_layer")), a.ea("__mt__internal_drag_layer");
    }
  }};
  c.kb.le = {hn:function(a) {
    this.map = this.h();
    this.Vb = new c.le(a);
    this.Vb.ua(this);
    a.beforeopen && this.sk();
    return this;
  }, sk:function() {
    var a = this.u(), b = this.Qo(), a = {coordinate:a, pixel:b};
    this.Vb.Lc.showPosition = b;
    this.Vb.Ae(a);
    return this;
  }, ta:function() {
    return this.Vb ? this.Vb : null;
  }, Pb:function(a) {
    this.Vb.show(a);
  }, Yh:function() {
    this.Vb && this.Vb.F();
  }};
  c.kb.ec = {xo:function(a) {
    this.map = this.h();
    this.ia = new c.ec(a);
    this.ia.ua(this);
    a.beforeopen && this.tk();
    return this;
  }, tk:function() {
    var a = this.u(), b = this.map.nc(a), a = {coordinate:a, pixel:b};
    this.ia.Kg = b;
    this.ia.Ae(a);
    return this;
  }, ta:function(a) {
    a || (a = this.rn);
    this.ia.show(a);
  }, Pb:function(a) {
    this.ia.tj(a);
    return this;
  }, kc:function() {
    this.ia && this.ia.kc();
  }};
  c.kb.$j = {Wi:function(a) {
    if (this.h()) {
      var b = a.Ue || a;
      a = b.type;
      "contextmenu" === a ? a = "rightclick" : "click" === a && 2 === b.button && (a = "rightclick");
      b = this.dg(b);
      this.fireEvent(a, b);
    }
  }, dg:function(a) {
    var b = this.h();
    a = c.b.Gb(a, b.ro);
    b = b.transform(a);
    return {target:this, pixel:a, coordinate:b};
  }, Zi:function(a) {
    this.h() && (a = this.dg(a.Ue || a), this.fireEvent("mouseover", a));
  }, qg:function(a) {
    this.h() && (a = this.dg(a.Ue || a), this.fireEvent("mouseout", a));
  }};
  c.Ma = {};
  c.Geometry = c.i = c.U.extend({$:[c.V, c.kb.a, c.kb.ec, c.kb.le, c.kb.Xj, c.kb.$j], exceptionDefs:{"en-US":{DUPLICATE_LAYER:"Geometry cannot be added to two or more layers at the same time.", INVALID_GEOMETRY_IN_COLLECTION:"Geometry is not valid for collection,index:"}, "zh-CN":{DUPLICATE_LAYER:"Geometry\u4e0d\u80fd\u88ab\u91cd\u590d\u6dfb\u52a0\u5230\u591a\u4e2a\u56fe\u5c42\u4e0a.", INVALID_GEOMETRY_IN_COLLECTION:"\u6dfb\u52a0\u5230\u96c6\u5408\u4e2d\u7684Geometry\u662f\u4e0d\u5408\u6cd5\u7684, index:"}}, 
  yb:{TYPE_POINT:1, TYPE_POLYLINE:2, TYPE_POLYGON:3, TYPE_MULTIPOINT:4, TYPE_MULTIPOLYLINE:5, TYPE_MULTIPOLYGON:6, TYPE_GEOMETRYCOLLECTION:7, TYPE_RECT:100, TYPE_CIRCLE:101, TYPE_ELLIPSE:102, TYPE_SECTOR:103, Zf:function(a) {
    c.a.fb(a) && (a = c.a.ld(a));
    if (c.a.isArray(a)) {
      for (var b = [], d = 0, e = a.length;d < e;d++) {
        var f = this.pi(a[d]);
        b.push(f);
      }
      return b;
    }
    return this.pi(a);
  }, zo:function(a) {
    c.a.fb(a) && (a = c.a.ld(a));
    if (c.a.isArray(a)) {
      var b = [], d = 0;
      for (a = a.length;d < a;d++) {
        b.push(geo);
      }
      return b;
    }
  }, pi:function(a) {
    if (!a || c.a.f(a.type)) {
      return null;
    }
    switch(a.type) {
      case this.TYPE_POINT:
        var b = a.center;
        delete a.center;
        return new c.na(b, a);
      case this.TYPE_POLYGON:
        b = a.rings;
        delete a.rings;
        if (!c.a.aa(b)) {
          return new c.ca([], a);
        }
        var d = b.shift();
        a.holes = b;
        return new c.ca(d, a);
      case this.TYPE_POLYLINE:
        return b = a.path, delete a.path, new c.zb(b, a);
      case this.TYPE_RECT:
        var b = a.nw, d = a.width, e = a.height;
        delete a.nw;
        delete a.width;
        delete a.height;
        return new c.Lb(b, d, e, a);
      case this.TYPE_CIRCLE:
        return b = a.center, d = a.radius, delete a.center, delete a.radius, new c.La(b, d, a);
      case this.TYPE_ELLIPSE:
        return b = a.center, d = a.width, e = a.height, delete a.center, delete a.width, delete a.height, new c.jb(b, d, e, a);
      case this.TYPE_SECTOR:
        var b = a.center, d = a.radius, e = a.startAngle, f = a.endAngle;
        delete a.center;
        delete a.radius;
        delete a.startAngle;
        delete a.endAngle;
        return new c.Pc(b, d, e, f, a);
      case this.TYPE_MULTIPOINT:
        return b = a.multiPoints, delete a.multiPoints, new c.hk(b, a);
      case this.TYPE_MULTIPOLYGON:
        return b = a.multiRings, delete a.multiRings, new c.$g(b, a);
      case this.TYPE_MULTIPOLYLINE:
        return b = a.multiPaths, delete a.multiPaths, new c.ah(b, a);
      case this.TYPE_GEOMETRYCOLLECTION:
        return b = a.geometries, delete a.geometries, new c.pd(b, a);
    }
    return null;
  }, Ao:function(a) {
    if (!a || c.a.f(a.type)) {
      return null;
    }
    switch(a.type) {
      case this.TYPE_POINT:
        return new c.na(new c.J(a.coordinates), a);
      case this.TYPE_POLYGON:
        return new c.ca(a.rings, a);
      case this.TYPE_POLYLINE:
        return new c.zb(a.path, a);
      case this.TYPE_RECT:
        return new c.Lb(a.nw, a.width, a.height, a);
      case this.TYPE_CIRCLE:
        return new c.La(a.center, a.radius, a);
      case this.TYPE_ELLIPSE:
        return new c.jb(a.center, a.width, a.height, a);
      case this.TYPE_SECTOR:
        return new c.Pc(a.center, a.radius, a.startAngle, a.endAngle, a);
      case this.TYPE_MULTIPOINT:
        return new c.hk(a.multiPoints, a);
      case this.TYPE_MULTIPOLYGON:
        return new c.$g(a.multiRings, a);
      case this.TYPE_MULTIPOLYLINE:
        return new c.ah(a.multiPaths, a);
      case this.TYPE_GEOMETRYCOLLECTION:
        return new c.pd(a.geometries, a);
    }
    return null;
  }}, Yc:{"marker-file":c.host + "/engine/images/marker.png", "marker-height":30, "marker-width":22, "marker-offset":{x:0, y:0}}, Nl:{"line-color":"#474cf8", "line-width":3, "line-opacity":1}, o:function() {
  }, Ib:function(a) {
    a && (this.jd = a, a.symbol && this.S(a.symbol), c.a.f(a.id) || this.df(a.id), a.infoWindow && this.hn(a.infoWindow), a.label && this.Ip(a.label), a.properties && this.on(a.properties));
  }, Wa:function(a) {
    this.pj(a);
  }, pj:function(a) {
    if (this.ea()) {
      throw Error(this.Ul.DUPLICATE_LAYER);
    }
    this.Fa();
    this.Ca = a;
    this.zd();
    this.K = this.Ob();
  }, Hb:function() {
    return this.identifier;
  }, df:function(a) {
    var b = this.Hb();
    this.identifier = a;
    this.fireEvent("_idchanged", {target:this, oldId:b, newId:a});
    return this;
  }, ea:function() {
    return this.Ca ? this.Ca : null;
  }, h:function() {
    return this.Ca ? this.Ca.h() : null;
  }, Vo:function() {
    return this.type;
  }, ng:function() {
    return c.i.ih !== this.type;
  }, ya:function() {
    return this.symbol ? this.symbol : null;
  }, S:function(a) {
    a ? this.symbol = c.a.Be(a, "camel") : this.symbol = null;
    this.bj();
    return this;
  }, eb:function() {
    return this.Fd ? this.Fd : this.ab(this.l());
  }, xi:function() {
    var a = this.eb(), b = this.l();
    return a ? new c.B(b.C({x:a.xmin, y:a.ymin}), b.C({x:a.xmax, y:a.ymax})) : null;
  }, u:function() {
    return this.Cd(this.l());
  }, cg:function() {
    return this.Nl;
  }, ig:function() {
    return this.ij ? this.ij : null;
  }, on:function(a) {
    this.ij = a;
    return this;
  }, show:function() {
    this.visible = !0;
    this.K && this.K.show();
    return this;
  }, F:function() {
    this.visible = !1;
    this.K && this.K.F();
    return this;
  }, Xb:function() {
    return c.a.f(this.visible) ? !0 : this.visible;
  }, Al:function() {
    var a = this.Xa();
    return c.i.Zf(a);
  }, remove:function() {
    var a = this.ea();
    if (a) {
      this.kc();
      this.Yh();
      var b = this.K;
      b && b.remove();
      delete this.K;
      a.Mm(this);
      delete this.Ca;
      this.fireEvent("remove", {target:this});
    }
  }, Ko:function() {
    return this.Ii;
  }, jn:function(a) {
    this.Ii = a;
  }, l:function() {
    var a = this.h();
    return a ? a.l() : c.rd.ri();
  }, am:function() {
    var a = this.ya();
    if (!a) {
      return null;
    }
    var b = a.icon;
    return b && "picture" === b.type ? b.url : (a = a.fillSymbol) && (a = a.fill) && 7 < a.length && "url" === a.substring(0, 3) ? a.substring(5, a.length - 2) : null;
  }, Mo:function() {
    return this.K;
  }, xp:function() {
    delete this.K;
  }, Ea:function() {
    this.K && this.K.refresh();
  }, Ka:function() {
    var a = this.K;
    a && a.refresh();
    this.Fd = null;
    this.Wb && this.Wb() || this.fireEvent("shapechanged", {target:this});
  }, rg:function() {
    var a = this.K;
    a && a.refresh();
    this.Fd = null;
    this.Wb && this.Wb() || this.fireEvent("positionchanged", {target:this});
  }, bj:function() {
    var a = this.K;
    a && a.Ze();
    this.fireEvent("symbolchanged", {target:this});
  }, fireEvent:function(a, b) {
    b || (b = {});
    b.target = this;
    this.oa(a, b);
  }, Xa:function(a) {
    a || (a = {});
    var b = {};
    if (void 0 === a.geometry || a.geometry) {
      b = this.Eb(a);
    }
    b || (b = {});
    if (void 0 === a.symbol || a.symbol) {
      var d = this.ya();
      d && (b.symbol = d);
    }
    (void 0 === a.properties || a.properties) && (a = this.ig()) && (b.properties = a);
    return b;
  }, Vp:function(a) {
    a || (a = {});
    var b = {type:"Feature", geometry:null};
    if (void 0 === a.geometry || a.geometry) {
      var d = this.uc(a);
      b.geometry = d;
    }
    d = {};
    if (void 0 === a.symbol || a.symbol) {
      var c = this.ya();
      c && (d.symbol = c);
    }
    if (void 0 === a.properties || a.properties) {
      if (a = this.ig()) {
        for (var f in a) {
          a.hasOwnProperty(f) && (d[f] = a[f]);
        }
      }
    }
    b.properties = d;
    return b;
  }});
  c.Extent = c.B = c.i.extend({yb:{Ee:function(a, b) {
    return a && b && a instanceof c.B && b instanceof c.B ? a.xmin == b.xmin && a.xmax == b.xmax && a.ymin == b.ymin && a.ymax == b.ymax : !1;
  }, Bd:function(a, b) {
    if (!a || !b) {
      return a ? a : b ? b : null;
    }
    if (!(a instanceof c.B && b instanceof c.B)) {
      return !1;
    }
    var d = a.xmin;
    c.a.fa(d) ? c.a.fa(b.xmin) && d > b.xmin && (d = b.xmin) : d = b.xmin;
    var e = a.xmax;
    c.a.fa(e) ? c.a.fa(b.xmax) && e < b.xmax && (e = b.xmax) : e = b.xmax;
    var f = a.ymin;
    c.a.fa(f) ? c.a.fa(b.ymin) && f > b.ymin && (f = b.ymin) : f = b.ymin;
    var g = a.ymax;
    c.a.fa(g) ? c.a.fa(b.ymax) && g < b.ymax && (g = b.ymax) : g = b.ymax;
    return new c.B(d, f, e, g);
  }, Od:function(a, b) {
    if (!(a && b && a instanceof c.B && b instanceof c.B && a.Li() && b.Li())) {
      return !1;
    }
    var d = Math.max(a.xmin, b.xmin), e = Math.max(a.ymin, b.ymin), f = Math.min(a.xmax, b.xmax), g = Math.min(a.ymax, b.ymax);
    return !(d > f || e > g);
  }, contains:function() {
  }, expand:function(a, b) {
    return a && a instanceof c.B ? new c.B(a.xmin - b, a.ymin - b, a.xmax + b, a.ymax + b) : null;
  }}, o:function(a, b, d, e) {
    this.ymax = this.ymin = this.xmax = this.xmin = null;
    c.a.fa(a) && c.a.fa(b) && c.a.fa(d) && c.a.fa(e) ? (this.xmin = a, this.ymin = b, this.xmax = d, this.ymax = e) : !a || !b || c.a.f(a.x) || c.a.f(b.x) || c.a.f(a.y) || c.a.f(b.y) || (a.x > b.x ? (this.xmin = b.x, this.xmax = a.x) : (this.xmin = a.x, this.xmax = b.x), a.y > b.y ? (this.ymin = b.y, this.ymax = a.y) : (this.ymin = a.y, this.ymax = b.y));
  }, Xa:function() {
    return {xmin:this.xmin, ymin:this.ymin, xmax:this.xmax, ymax:this.ymax};
  }, Li:function() {
    return c.a.fa(this.xmin) && c.a.fa(this.ymin) && c.a.fa(this.xmax) && c.a.fa(this.ymax);
  }});
  c.Mb = c.i.extend({mc:function(a) {
    var b = this.xi(), d = this.h();
    return (b = c.B.expand(b, 0 * d.P().pm(d.w))) ? new c.B(a.W({x:b.xmin, y:b.ymin}), a.W({x:b.xmax, y:b.ymax})) : null;
  }});
  c.i.he = {Id:function() {
    var a = this.Ba();
    if (!a) {
      return null;
    }
    var b = this.h();
    return b ? b.O(a) : null;
  }, u:function() {
    return this.H;
  }, Eg:function(a) {
    if ((this.H = a) && this.h()) {
      return a = this.l(), this.Hc(a.C(this.H)), this;
    }
  }, Ba:function() {
    var a = this.l();
    if (!a) {
      return null;
    }
    !this.wb && this.H && (this.wb = a.C(this.H));
    return this.wb;
  }, Hc:function(a) {
    this.wb = a;
    this.rg();
  }, Fa:function() {
    var a = this.l();
    this.wb && a && (this.H = a.W(this.wb));
  }, zd:function() {
    this.wb = null;
  }, Cd:function() {
    return this.H;
  }};
  c.i.dh = {O:function(a) {
    var b = this.h();
    if (!b || !c.a.aa(a)) {
      return null;
    }
    for (var d = [], e = !1, f = 0, g = a.length;f < g;f++) {
      var h = a[f];
      if (!c.a.f(h)) {
        if (c.a.isArray(h)) {
          for (var e = !0, k = [], l = 0, m = h.length;l < m;l++) {
            c.a.f(h[l]) || k.push(b.O(h[l]));
          }
          h = c.fh.yj(k, 2, !1);
          d.push(h);
        } else {
          h = b.O(h), d.push(h);
        }
      }
    }
    return e ? d : c.fh.yj(d, 2, !1);
  }, Ig:function(a) {
    this.Xe = a;
    this.Ka();
  }, qb:function() {
    if (!this.Xe) {
      var a = this.xa();
      this.Xe = this.Dc(a);
    }
    return this.Xe;
  }, Fa:function() {
    this.l() && (this.qa = this.kf(this.qb()), this.Ac && (this.Ac = this.kf(this.yi())));
  }, zd:function() {
    this.Xe = null;
    this.Wd && (this.Wd = null);
  }, Dc:function(a) {
    var b = this.l();
    return b ? b.Dc(a) : null;
  }, kf:function(a) {
    var b = this.l();
    return b ? b.kf(a) : null;
  }, Cd:function() {
    var a = this.xa();
    if (!c.a.aa(a)) {
      return null;
    }
    for (var b = 0, d = 0, e = 0, f = 0, g = a.length;f < g;f++) {
      a[f] && c.a.fa(a[f].x) && c.a.fa(a[f].y) && (b += a[f].x, d += a[f].y, e++);
    }
    return {x:b / e, y:d / e};
  }, ab:function(a) {
    var b = this.xa();
    if (!c.a.aa(b)) {
      return null;
    }
    this.Oe && this.Oe() && (b = b.concat(this.si()));
    return this.vl(b, a);
  }, vl:function(a) {
    for (var b = null, d, e = 0, f = a.length;e < f;e++) {
      if (c.a.isArray(a[e])) {
        for (var g = 0, h = a[e].length;g < h;g++) {
          d = new c.B(a[e][g]), b = c.B.Bd(b, d);
        }
      } else {
        d = new c.B(a[e], a[e]), b = c.B.Bd(b, d);
      }
    }
    return b;
  }};
  c.Marker = c.na = c.i.extend({$:[c.i.he], o:function(a, b) {
    this.type = c.i.TYPE_POINT;
    this.H = a;
    this.Ib(b);
  }, Fm:function() {
    var a = this.He();
    return a ? "vector" === a.type : !1;
  }, cg:function() {
    return {icon:this.Yc};
  }, Gg:function(a) {
    this.symbol || (this.symbol = {});
    this.symbol.icon = a;
    this.bj();
    return this;
  }, He:function() {
    return this.symbol && this.symbol.icon ? this.symbol.icon : null;
  }, ab:function() {
    var a = this.u();
    return a ? new c.B({x:a.x, y:a.y}, {x:a.x, y:a.y}) : null;
  }, mc:function(a) {
    var b = this.h();
    if (!b) {
      return null;
    }
    a || (a = b.l());
    var d = this.He();
    d || (d = this.Yc);
    var c = this.u(), f = d.offset;
    f || (f = {x:0, y:0});
    if (!c) {
      return null;
    }
    var g, h;
    g = d.type;
    if ("picture" === g) {
      h = d.height ? parseInt(d.height, 10) : 0, g = d.width ? parseInt(d.width, 10) : 0, d = {top:h + f.y, left:g / 2 - f.x}, f = {top:-f.y, left:g / 2 + f.x};
    } else {
      if ("vector" === g) {
        g = d.size;
        if (!g) {
          return null;
        }
        d = {top:g + f.y, left:g - f.x};
        f = {top:g - f.y, left:g + f.x};
      } else {
        if ("text" === g) {
          if (f = this.K.Qi()) {
            g = 0;
            try {
              g = d.textStyle.padding;
            } catch (k) {
            }
            g || (g = 0);
            d = {top:f.offset.y, left:-f.offset.x};
            f = {top:f.height - f.offset.y + 2 * g, left:f.width + f.offset.x + 2 * g};
          } else {
            d = {top:0, left:0}, f = {top:0, left:0};
          }
        } else {
          h = this.Yc.height, g = this.Yc.width, d = {top:h + f.y, left:g / 2 - f.x}, f = {top:-f.y, left:g / 2 + f.x};
        }
      }
    }
    a = a.C(c);
    return b.ul(a, d, f);
  }, wl:function(a) {
    var b = a.l(), b = this.mc(b), d = b.xmin, e = b.xmax, f = b.ymin, g = b.ymax, b = new c.J(d, g), e = new c.J(e, g), d = new c.J(d, f), f = a.$a(b, e), b = a.$a(b, d);
    a = a.Pa(f, b);
    return {width:a.px, height:a.py};
  }, Bb:function() {
    return 0;
  }, nb:function() {
    return 0;
  }, Ob:function() {
    if (this.Ca) {
      if (this.Ca instanceof c.sa) {
        return new c.na.j(this);
      }
      if (this.Ca instanceof c.Aa) {
        return new c.na.T(this);
      }
    }
  }, Eb:function() {
    return {type:c.i.TYPE_POINT, center:this.u()};
  }, uc:function() {
    var a = this.u();
    return {type:"Point", coordinates:[a.x, a.y]};
  }});
  c.Polygon = c.ca = c.Mb.extend({$:[c.i.dh], o:function(a, b) {
    this.type = c.i.TYPE_POLYGON;
    this.Ic(a);
    this.Ib(b);
    b && b.holes && this.gn(b.holes);
  }, xa:function() {
    return this.qa;
  }, Ic:function(a) {
    this.qa = a;
    this.sl();
    if (!this.h()) {
      return this;
    }
    this.Ig(this.Dc(this.qa));
    return this;
  }, sl:function() {
    if (c.a.isArray(this.qa) && !(3 > this.qa.length)) {
      var a = this.qa[this.qa.length - 1];
      a || (a = this.qa[this.qa.length - 2]);
      this.qa[0].x == a.x && this.qa[0].y == a.y || this.qa.push({x:this.qa[0].x, y:this.qa[0].y});
    }
  }, cd:function() {
    return this.xa();
  }, gn:function(a) {
    this.Ac = a;
    if (!this.h()) {
      return this;
    }
    this.nn(this.Dc(this.Ac));
    return this;
  }, si:function() {
    return this.Oe() ? this.Ac : null;
  }, Oe:function() {
    return c.a.aa(this.Ac) && c.a.aa(this.Ac[0]) ? !0 : !1;
  }, nn:function(a) {
    this.Wd = a;
    this.Ka();
  }, yi:function() {
    this.Wd || (this.Wd = this.Dc(this.Ac));
    return this.Wd;
  }, Bb:function() {
    return 0;
  }, nb:function() {
    return 0;
  }, Ob:function() {
    if (this.Ca) {
      if (this.Ca instanceof c.sa) {
        return new c.ca.j(this);
      }
      if (this.Ca instanceof c.Aa) {
        return new c.ca.T(this);
      }
    }
  }, Eb:function() {
    var a = this.xa(), b = this.si(), a = [a];
    b && (a = a.concat(b));
    return {type:c.i.TYPE_POLYGON, rings:a};
  }, uc:function() {
    var a = this.xa();
    return {type:"Polygon", coordinates:this.jf(a)};
  }});
  c.Polyline = c.zb = c.Mb.extend({$:[c.i.dh], o:function(a, b) {
    this.type = c.i.TYPE_POLYLINE;
    this.Hg(a);
    this.Ib(b);
  }, Hg:function(a) {
    this.qa = a;
    this.h() && this.Ig(this.Dc(this.qa));
    return this;
  }, Le:function() {
    return this.xa();
  }, xa:function() {
    return this.qa;
  }, Ob:function() {
    if (this.Ca) {
      if (this.Ca instanceof c.sa) {
        return new c.zb.j(this);
      }
      if (this.Ca instanceof c.Aa) {
        return new c.zb.T(this);
      }
    }
  }, Eb:function() {
    return {type:c.i.TYPE_POLYLINE, path:this.xa()};
  }, uc:function() {
    var a = this.xa();
    return {type:"LineString", coordinates:this.jf(a)};
  }});
  c.Ellipse = c.jb = c.ca.extend({$:[c.i.he], hi:60, o:function(a, b, d, e) {
    this.type = c.i.TYPE_ELLIPSE;
    this.H = a;
    this.width = b;
    this.height = d;
    this.Ib(e);
  }, tm:function() {
    return this.width;
  }, ce:function(a) {
    this.width = a;
    this.Ka();
    return this;
  }, em:function() {
    return this.height;
  }, ae:function(a) {
    this.height = a;
    this.Ka();
    return this;
  }, xa:function() {
  }, Ic:function() {
    return this;
  }, ab:function(a) {
    if (!a || !this.H || c.a.f(this.width) || c.a.f(this.height)) {
      return null;
    }
    var b = this.width, d = this.height;
    return new c.B(a.ga(this.H, b / 2, d / 2), a.ga(this.H, -b / 2, -d / 2));
  }, Bb:function() {
    return c.a.f(this.width) || c.a.f(this.height) ? 0 : 2 * Math.PI * (this.width > this.height ? this.width : this.height) / 2 - 4 * Math.abs(this.width - this.height);
  }, nb:function() {
    return c.a.f(this.width) || c.a.f(this.height) ? 0 : Math.PI * this.width * this.height / 4;
  }, Ob:function() {
    var a = this.ea();
    if (a) {
      if (a instanceof c.sa) {
        return new c.jb.j(this);
      }
      if (a instanceof c.Aa) {
        return new c.jb.T(this);
      }
    }
  }, Eb:function() {
    return {type:c.i.TYPE_ELLIPSE, center:this.u(), width:this.width, height:this.height};
  }});
  c.Circle = c.La = c.ca.extend({$:[c.i.he], hi:60, o:function(a, b, d) {
    this.type = c.i.TYPE_CIRCLE;
    this.H = a;
    this.s = b;
    this.Ib(d);
  }, lm:function() {
    return this.s;
  }, Jg:function(a) {
    this.s = a;
    this.Ka();
    return this;
  }, xa:function() {
  }, Ic:function() {
    return this;
  }, ab:function(a) {
    if (!a || !this.H || c.a.f(this.s)) {
      return null;
    }
    var b = this.s;
    return new c.B(a.ga(this.H, b, b), a.ga(this.H, -b, -b));
  }, Bb:function() {
    return c.a.f(this.s) ? 0 : 2 * Math.PI * this.s;
  }, nb:function() {
    return c.a.f(this.s) ? 0 : Math.PI * Math.pow(this.s, 2);
  }, Ob:function() {
    var a = this.ea();
    if (a) {
      if (a instanceof c.sa) {
        return new c.La.j(this);
      }
      if (a instanceof c.Aa) {
        return new c.La.T(this);
      }
    }
  }, Eb:function() {
    return {type:c.i.TYPE_CIRCLE, center:this.u(), radius:this.s};
  }});
  c.Sector = c.Pc = c.ca.extend({$:[c.i.he], hi:60, o:function(a, b, d, e, f) {
    this.type = c.i.TYPE_SECTOR;
    this.H = a;
    this.s = b;
    this.bc = d;
    this.Tb = e;
    this.Ib(f);
  }, lm:function() {
    return this.s;
  }, Jg:function(a) {
    this.s = a;
    this.Ka();
    return this;
  }, So:function() {
    return this.bc;
  }, Pp:function(a) {
    this.bc = a;
    this.Ka();
    return this;
  }, Go:function() {
    return this.Tb;
  }, Hp:function(a) {
    this.Tb = a;
    this.Ka();
    return this;
  }, xa:function() {
  }, Ic:function() {
    return this;
  }, ab:function(a) {
    if (!a || !this.H || c.a.f(this.s)) {
      return null;
    }
    var b = this.s;
    return new c.B(a.ga(this.H, b, b), a.ga(this.H, -b, -b));
  }, Bb:function() {
    return c.a.f(this.s) ? 0 : 2 * Math.PI * this.s * Math.abs(this.bc - this.Tb) / 360 + 2 * this.s;
  }, nb:function() {
    return c.a.f(this.s) ? 0 : Math.PI * Math.pow(this.s, 2) * Math.abs(this.bc - this.Tb) / 360;
  }, Ob:function() {
    var a = this.ea();
    if (a) {
      if (a instanceof c.sa) {
        return new c.Pc.j(this);
      }
      if (a instanceof c.Aa) {
        return new c.Pc.T(this);
      }
    }
  }, Eb:function() {
    return {type:c.i.TYPE_SECTOR, center:this.u(), radius:this.s, startAngle:this.bc, endAngle:this.Tb};
  }});
  c.Rectangle = c.Lb = c.ca.extend({o:function(a, b, d, e) {
    this.type = c.i.TYPE_RECT;
    this.Da = a;
    this.width = b;
    this.height = d;
    this.Ib(e);
  }, Lo:function() {
    return this.Da;
  }, Lp:function(a) {
    if ((this.Da = a) && this.h()) {
      return a = this.l(), this.xj(a.C(this.Da)), this;
    }
  }, bd:function() {
    var a = this.l();
    if (!a) {
      return null;
    }
    !this.nd && this.Da && (this.nd = a.C(this.Da));
    return this.nd;
  }, xj:function(a) {
    this.nd = a;
    this.rg();
  }, tm:function() {
    return this.width;
  }, ce:function(a) {
    this.width = a;
    this.Ka();
    return this;
  }, em:function() {
    return this.height;
  }, ae:function(a) {
    this.height = a;
    this.Ka();
    return this;
  }, Fa:function() {
    var a = this.l();
    this.nd && a && (this.Da = a.W(this.nd));
  }, zd:function() {
    this.nd = null;
  }, Cd:function(a) {
    return a.ga(this.Da, this.width / 2, -this.height / 2);
  }, xa:function() {
    var a = this.l(), b = this.Da, d = [];
    d.push(b);
    d.push(a.ga(b, this.width, 0));
    d.push(a.ga(b, this.width, this.height));
    d.push(a.ga(b, 0, this.height));
    d.push(b);
    return d;
  }, Ic:function() {
    return this;
  }, ab:function(a) {
    return !a || !this.Da || c.a.f(this.width) || c.a.f(this.height) ? null : new c.B(a.ga(this.Da, this.width, -this.height), this.Da);
  }, Bb:function() {
    return c.a.f(this.width) || c.a.f(this.height) ? 0 : 2 * (this.width + this.height);
  }, nb:function() {
    return c.a.f(this.width) || c.a.f(this.height) ? 0 : this.width * this.height;
  }, Ob:function() {
    var a = this.ea();
    if (a) {
      if (a instanceof c.sa) {
        return new c.Lb.j(this);
      }
      if (a instanceof c.Aa) {
        return new c.Lb.T(this);
      }
    }
  }, Eb:function() {
    return {type:c.i.TYPE_RECT, nw:this.Da, width:this.width, height:this.height};
  }});
  c.GeometryCollection = c.pd = c.i.extend({o:function(a, b) {
    this.type = c.i.TYPE_GEOMETRYCOLLECTION;
    this.cf(a);
    this.Ib(b);
  }, Wa:function(a) {
    this.pj(a);
    this.fj();
  }, fj:function() {
    for (var a = this.ea(), b = 0, d = this.ha().length;b < d;b++) {
      this.Y[b].Wa(a);
    }
  }, cf:function(a) {
    this.Th(a);
    this.Y = a;
    this.fj();
    this.Ka();
    return this;
  }, ha:function() {
    return this.Y || c.a.isArray(this.Y) ? this.Y : [];
  }, Th:function() {
  }, Nd:function() {
    return !c.a.aa(this.Y);
  }, Fa:function() {
    for (var a = 0, b = this.Y.length;a < b;a++) {
      this.Y[a] && this.Y[a].Fa && this.Y[a].Fa();
    }
  }, Cd:function(a) {
    if (!a || this.Nd()) {
      return null;
    }
    for (var b = 0, d = 0, e = 0, f = 0, g = this.Y.length;f < g;f++) {
      if (this.Y[f]) {
        var h = this.Y[f].Cd(a), b = b + h.x, d = d + h.y;
        e++;
      }
    }
    return new c.J(b / e, d / e);
  }, ab:function(a) {
    if (!a || this.Nd()) {
      return null;
    }
    for (var b = null, d = 0, e = this.Y.length;d < e;d++) {
      b = c.B.Bd(this.Y[d].ab(a), b);
    }
    return b;
  }, Bb:function(a) {
    if (!a || this.Nd()) {
      return 0;
    }
    for (var b = 0, d = 0, c = this.Y.length;d < c;d++) {
      b += this.Y[d].Bb(a);
    }
    return b;
  }, nb:function(a) {
    if (!a || this.Nd()) {
      return 0;
    }
    for (var b = 0, d = 0, c = this.Y.length;d < c;d++) {
      b += this.Y[d].nb(a);
    }
    return b;
  }, mc:function(a) {
    if (!a || this.Nd()) {
      return null;
    }
    for (var b = null, d = 0, e = this.Y.length;d < e;d++) {
      b = c.B.Bd(this.Y[d].mc(a), b);
    }
    return b;
  }, wl:function(a) {
    var b = a.l(), b = this.mc(b), d = b.xmin, e = b.xmax, f = b.ymin, g = b.ymax, b = new c.J(d, g), e = new c.J(e, g), d = new c.J(d, f), f = a.$a(b, e), b = a.$a(b, d);
    a = a.Pa(f, b);
    return {width:a.px, height:a.py};
  }, Ob:function() {
    return new c.pd.Ma(this);
  }, Eb:function(a) {
    var b = [], d = this.ha();
    if (c.a.isArray(d)) {
      for (var e = 0, f = d.length;e < f;e++) {
        b.push(d.Eb(a));
      }
    }
    return {type:c.i.TYPE_GEOMETRYCOLLECTION, geometries:b};
  }, uc:function(a) {
    var b = [], d = this.ha();
    if (c.a.isArray(d)) {
      for (var e = 0, f = d.length;e < f;e++) {
        b.push(d.uc(a));
      }
    }
    return {type:"GeometryCollection", geometries:b};
  }, zd:function() {
    var a = this.ha();
    if (c.a.aa(a)) {
      for (var b = 0, a = a.length;b < a;b++) {
        this.Y[b].zd();
      }
    }
  }, Aj:function(a) {
    a.symbol && (this.kd = this.ya(), this.S(a.symbol));
    for (var b = this.ha(), d = 0, c = b.length;d < c;d++) {
      b[d].Aj(a);
    }
    this.tc = !0;
    return this;
  }, Wf:function() {
    for (var a = this.ha(), b = 0, d = a.length;b < d;b++) {
      a[b].Wf();
    }
    void 0 !== this.kd && (this.S(this.kd), delete this.kd);
    this.tc = !1;
    return this;
  }, Wb:function() {
    return this.tc;
  }, zj:function() {
    for (var a = this.ha(), b = 0, d = a.length;b < d;b++) {
      a[b].zj();
    }
    this.ji = !0;
    return this;
  }, Tl:function() {
    for (var a = this.ha(), b = 0, d = a.length;b < d;b++) {
      a[b].Tl();
    }
    this.ji = !1;
    return this;
  }, Md:function() {
    return this.ji;
  }});
  c.Zg = c.pd.extend({o:function(a, b) {
    this.type = c.i.TYPE_MULTIPOLYGON;
    c.a.aa(a) && (a[0] instanceof this.ke ? this.cf(a) : this.en(a));
    this.Ib(b);
  }, Th:function(a) {
    if (c.a.isArray(a)) {
      for (var b = 0, d = a.length;b < d;b++) {
        if (a[b] && !(a[b] instanceof this.ke)) {
          throw Error(this.Ul.INVALID_GEOMETRY_IN_COLLECTION + b);
        }
      }
    }
  }, bg:function() {
    var a = [], b = this.ha();
    if (!c.a.isArray(b)) {
      return null;
    }
    for (var d = 0, e = b.length;d < e;d++) {
      a.push(b.bg());
    }
    return a;
  }, en:function(a) {
    if (c.a.aa(a)) {
      this.cf([]);
    } else {
      for (var b = [], d = 0, e = a.length;d < e;d++) {
        var f = new this.ke(a[d]);
        b.push(f);
      }
      this.cf(b);
    }
    return this;
  }});
  c.MultiPolygon = c.$g = c.Zg.extend({ke:c.ca, uc:function() {
    var a = this.bg();
    return {type:"MultiPolygon", coordinates:this.jf(a)};
  }});
  c.MultiPolyline = c.ah = c.Zg.extend({ke:c.zb, uc:function() {
    var a = this.bg();
    return {type:"MultiLineString", coordinates:this.jf(a)};
  }});
  c.D.Og = !(!document.createElementNS || !document.createElementNS("http://www.w3.org/2000/svg", "svg").createSVGRect);
  c.D.ib = !c.D.Og && function() {
    try {
      var a = document.createElement("div");
      a.innerHTML = '<v:shape adj="1"/>';
      var b = a.firstChild;
      b.style.behavior = "url(#default#VML)";
      return b && "object" === typeof b.ta;
    } catch (d) {
      return !1;
    }
  }();
  c.j = {Ce:{stroke:"#000000", "stroke-width":2}, gi:{"fill-opacity":0}, mh:/^url\(['"]?(.+?)['"]?\)$/i, Qf:function() {
  }, wg:function() {
  }, $e:function() {
  }, Fc:function() {
  }, Ff:function() {
  }, af:function() {
  }};
  c.j.Ad = c.D.ib ? "x" : "Z";
  c.j.j = {Qf:function() {
    var a = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    a.style.overflow = "";
    a.style.position = "absolute";
    a.setAttribute("xmlns", "http://www.w3.org/2000/svg");
    var b = document.createElementNS("http://www.w3.org/2000/svg", "defs");
    a.appendChild(b);
    a.Ol = b;
    return a;
  }, wg:function(a, b) {
    var d = a.ja(), c = -d.left, d = -d.top, f = a.Ub();
    b.setAttribute("width", f.width);
    b.setAttribute("height", f.height);
    b.setAttribute("viewBox", [c, d, f.width, f.height].join(" "));
    b.style.left = c + "px";
    b.style.top = d + "px";
  }, $e:function(a, b) {
    if (a && b) {
      var d = b.path;
      d && a.setAttribute("d", d);
    }
  }, Fc:function(a, b, d, e) {
    var f;
    b || (b = c.j.Ce);
    d || (d = c.j.gi);
    for (f in b) {
      b.hasOwnProperty(f) && a.setAttribute(f, b[f]);
    }
    for (f in d) {
      if (d.hasOwnProperty(f)) {
        if ("fill" === f.toLowerCase() && (b = d[f].match(c.j.mh))) {
          b = c.j.j.Vl(b, a, e);
          a.setAttribute(f, b);
          continue;
        }
        a.setAttribute(f, d[f]);
      }
    }
  }, Vl:function(a, b, d) {
    function e(a, b) {
      if (b) {
        for (var d in b) {
          b.hasOwnProperty(d) && ("xlink:" == d.substring(0, 6) ? a.setAttributeNS("http://www.w3.org/1999/xlink", d.substring(6), b[d]) : a.setAttribute(d, b[d]));
        }
      }
    }
    function f(a) {
      a = document.createElementNS("http://www.w3.org/2000/svg", a);
      a.style && (a.style.webkitTapHighlightColor = "rgba(0,0,0,0)");
      return a;
    }
    function g(a, b) {
      var d = document.createElement("img");
      d.style.cssText = "position:absolute;left:-9999em;top:-9999em";
      d.onload = function() {
        b.call(this);
        this.onload = null;
        document.body.removeChild(this);
      };
      d.onerror = function() {
        document.body.removeChild(this);
      };
      document.body.appendChild(d);
      d.src = a;
    }
    var h = c.a.je(), k = f("pattern");
    k.id = h;
    e(k, {x:0, y:0, patternUnits:"userSpaceOnUse", height:1, width:1});
    var l = f("image");
    e(l, {x:0, y:0, "xlink:href":a[1]});
    k.appendChild(l);
    b.Ch = k;
    (function() {
      g(a[1], function() {
        var a = this.offsetWidth, b = this.offsetHeight;
        e(k, {width:a, height:b});
        e(l, {width:a, height:b});
      });
    })();
    d.Ol.appendChild(k);
    return "url(#" + h + ")";
  }, Ff:function(a, b, d, e) {
    var f = document.createElementNS("http://www.w3.org/2000/svg", "path");
    f.setAttribute("d", b.path);
    c.j.Fc(f, d, e, a);
    a.appendChild(f);
    return f;
  }, af:function(a, b) {
    b.Ch && c.a.ma(b.Ch);
    a && b && a.removeChild(b);
  }};
  c.j.lh = {Qf:function() {
    return document.createElement("div");
  }, wg:function() {
  }, Fc:function(a, b, d) {
    if (!a) {
      return null;
    }
    b || (b = c.j.Ce);
    d || (d = c.j.gi);
    a.stroke && (c.a.ma(a.stroke), delete a.stroke);
    var e = c.j.create("stroke");
    b["stroke-width"] && (e.weight = b["stroke-width"] + "px");
    b.stroke && (e.color = b.stroke);
    b["stroke-opacity"] && (e.opacity = b["stroke-opacity"]);
    b["stroke-dasharray"] && (e.to = b["stroke-dasharray"]);
    a.appendChild(e);
    a.stroke = e;
    a.fill && (c.a.ma(a.fill), delete a.fill);
    d && (b = c.j.create("fill"), d.fill && ((e = d.fill.match(c.j.mh)) ? (b.rotate = !0, b.src = e[1], b.type = "tile") : b.color = d.fill), c.a.f(d["fill-opacity"]) || (b.opacity = d["fill-opacity"]), a.appendChild(b), a.fill = b);
  }, $e:function(a, b) {
    if (a && b) {
      var d = b.path;
      d && (a.path.v = d);
    }
  }, Ff:function(a, b, d, e) {
    if (!a || !b) {
      return null;
    }
    var f = c.j.create("shape");
    f.style.width = "1px";
    f.style.height = "1px";
    f.coordsize = "1 1";
    f.coordorigin = "0 0";
    var g = c.j.create("path");
    g.$p = b.path;
    f.appendChild(g);
    f.path = g;
    this.Fc(f, d, e);
    a.appendChild(f);
    return f;
  }, af:function(a, b) {
    a && b && a.removeChild(b);
  }};
  c.j.lh.create = function() {
    if (c.D.ib) {
      var a = window.document;
      31 > a.styleSheets.length ? a.createStyleSheet().addRule(".zvml", "behavior:url(#default#VML);display: inline-block;position:absolute;") : a.styleSheets[0].addRule(".zvml", "behavior:url(#default#VML);display: inline-block;position:absolute;");
      try {
        return !a.namespaces.zvml && a.namespaces.add("zvml", "urn:schemas-microsoft-com:vml"), function(b) {
          return a.createElement("<zvml:" + b + ' class="zvml">');
        };
      } catch (b) {
        return function(b) {
          return a.createElement("<" + b + ' xmlns="urn:schemas-microsoft.com:vml" class="zvml">');
        };
      }
    }
  }();
  c.D.ib ? c.a.extend(c.j, c.j.lh) : c.D.Og && c.a.extend(c.j, c.j.j);
  c.Ma = c.U.extend({$:[c.V], Ve:function() {
    this.c && this.c.Xb() && (this.ud.apply(this, arguments), this.$b());
  }, S:function(a) {
    a || (a = this.c.ya()) || (a = this.c.cg());
    var b = this.c.h();
    b.options.enableCartoCSS && (b = b.pl(this.c)) && (a = c.a.Be(b, "camel"));
    this.gf = this.Vm(a);
    this.Fb = this.Tm(a);
    this.Fi = this.Um(a);
  }, Vm:function(a) {
    var b = {};
    this.c.ng() ? (b.stroke = a.lineColor, b.strokeWidth = a.lineWidth, b.strokeDasharray = a.lineDasharray, b.strokeOpacity = a.lineOpacity) : a.markerFile || (b.stroke = a.markerLineColor, b.strokeWidth = a.markerLineWidth, b.strokeOpacity = c.a.f(a.markerOpacity) ? a.markerLineOpacity : a.markerOpacity);
    return b;
  }, Tm:function(a) {
    var b = {};
    this.c.ng() ? (b.fill = a.polygonFill, a.polygonPatternFile && (b.fill = a.polygonPatternFile), b.fillOpacity = c.a.f(a.polygonOpacity) ? a.polygonPatternOpacity : a.polygonOpacity) : a.markerFile || (b.fill = a.markerFill, b.fillOpacity = c.a.f(a.markerOpacity) ? a.markerFillOpacity : a.markerOpacity);
    return b;
  }, Um:function(a) {
    var b = null;
    this.c.ng() || (a.markerFile ? b = {type:"picture", url:a.markerFile, width:a.markerWidth, height:a.markerHeight} : a["text-name"] ? b = {type:"text"} : b = {type:"vector", style:a.markerType, size:a.markerWidth});
    return b;
  }, za:function() {
    throw Error("not implemented");
  }, show:function() {
    throw Error("not implemented");
  }, F:function() {
    throw Error("not implemented");
  }, refresh:function() {
    throw Error("not implemented");
  }, remove:function() {
    throw Error("not implemented");
  }, il:function(a) {
    var b = this.c;
    c.b.g(a, "mousedown mouseup click dblclick contextmenu", b.Wi, b);
    c.b.g(a, "mouseover", b.Zi, b);
    c.b.g(a, "mouseout", b.qg, b);
  }});
  c.Ma.j = c.Ma.extend({ki:function(a, b, d) {
    var e = this.Bi();
    if (a && e) {
      return this.ra && c.j.af(e, this.ra), this.ra = c.j.Ff(e, a, c.a.Be(b, "minus"), c.a.Be(d, "minus"));
    }
  }, remove:function() {
    if (this.ra) {
      var a = this.Bi();
      c.j.af(a, this.ra);
      delete this.ra;
    }
    this.R && (c.b.ma(this.R), delete this.R);
  }, Ze:function() {
    this.c && (c.i.TYPE_POINT === this.c.type ? this.Ym() : this.Fc());
  }, refresh:function() {
    if (this.c.type === c.i.TYPE_POINT) {
      this.Xm();
    } else {
      var a = this.Cb();
      c.j.$e(this.ra, a);
    }
    this.$b();
  }, $b:function() {
    var a = this.ra || this.R;
    a && this.il(a);
  }, za:function(a) {
    this.R && (this.R.style.zIndex = a);
    this.ra && (this.ra.style.zIndex = a);
  }, show:function() {
    this.R && (this.R.style.display = "");
    this.ra && this.ra.show();
  }, F:function() {
    this.R && (this.R.style.display = "none");
    this.ra && this.ra.F();
  }, ta:function(a) {
    if (!a) {
      return null;
    }
    var b = {}, d;
    for (d in a) {
      a.hasOwnProperty(d) && "" !== d && (b[c.a.$h(d)] = a[d]);
    }
    return b;
  }, Pb:function(a) {
    this.Mc = a;
  }, Bi:function() {
    if (this.Mc) {
      return this.Mc;
    }
    if (!this.c || !this.c.h()) {
      return null;
    }
    var a = this.c.h();
    a.ei();
    return a.Mc;
  }});
  c.Ma.T = c.Ma.extend({o:function(a) {
    this.c = a;
  }, ud:function(a, b, d) {
    var c = this.c;
    c && a && c.h() && !this.Pl && (this.S(d), this.Sm(a, this.gf, this.Fb), d = this.c.h().ja(), this.Zc(a, b, d));
  }, remove:function() {
    var a = this.c;
    a && a.h() && (this.Pl = !0, this.refresh());
  }, show:function() {
    this.refresh();
  }, F:function() {
    this.refresh();
  }, refresh:function() {
    var a = this.c;
    if (a) {
      var b = a.h();
      b && (b.zg(a.Wb()), this.$b());
    }
  }, Ze:function() {
    this.refresh();
  }, yc:function(a, b) {
    c.a.f(b) && (b = 1);
    return "rgba(" + parseInt(a.slice(1, 3), 16) + "," + parseInt(a.slice(3, 5), 16) + "," + parseInt(a.slice(5, 7), 16) + "," + b + ")";
  }, fn:function(a) {
    a.lineWidth = 1;
    a.strokeStyle = this.yc("#474cf8", 1);
    a.fillStyle = this.yc("#474cf8", 0);
    a.textAlign = "start";
    a.textBaseline = "hanging";
    a.font = "11px SIMHEI";
    a.setLineDash && a.setLineDash([]);
    a.save();
  }, Sm:function(a, b, d) {
    this.fn(a);
    a.restore();
    if (b) {
      var e = b.strokeWidth;
      c.a.f(e) || (a.lineWidth = e);
      var f = b.strokeOpacity;
      0 === e && (f = 0);
      if (e = b.stroke) {
        c.a.f(f) && (f = 1), a.strokeStyle = this.yc(e, f);
      }
      if (a.setLineDash && (b = b.strokeDasharray || b.strokeDashArray) && c.a.fb(b) && 0 < b.length) {
        for (var f = [], e = 0, g = b.length;e < g;e++) {
          var h = b[e];
          null === h && (h = b.charAt(e));
          if ("-" === h) {
            f.push(9);
          } else {
            if ("." === h) {
              f.push(3);
            } else {
              continue;
            }
          }
          f.push(6);
        }
        a.setLineDash(f);
      }
    }
    d && (b = d.fill) && (c.a.f(d.fillOpacity) && (d.fillOpacity = 1), 7 < b.length && "url" === b.substring(0, 3) ? (d = document.createElement("img"), d.src = b.substring(5, b.length - 2), d = a.createPattern(d, "repeat"), a.fillStyle = d) : a.fillStyle = this.yc(b));
  }, $c:function(a, b) {
    b && (c.a.f(b.fillOpacity) || (a.globalAlpha = b.fillOpacity), a.fill("evenodd"), a.globalAlpha = 1);
  }, $b:function() {
  }});
  c.na.bh = {ad:function() {
    var a = this.c.Id();
    if (!a) {
      return null;
    }
    var b = this.ti();
    return [a.left + b.left, a.top + b.top];
  }, ti:function() {
    var a = this.pb();
    a.offset || (a.offset = {x:0, y:0});
    if ("picture" !== a.type) {
      return {top:a.offset.y, left:a.offset.x};
    }
    var b = a.width;
    b || (b = 0);
    var d = a.height;
    d || (d = 0);
    return {top:-d - a.offset.y, left:-Math.round(b / 2) + a.offset.x};
  }, Ai:function(a) {
    var b = this.pb(), d = b.style, e = .5 + b.size << 0, f = Math.PI / 180;
    return "triangle" === d ? (d = [a[0], a[1] - e], b = [c.a.bf(a[0] - Math.cos(30 * f) * e), c.a.bf(a[1] + Math.sin(30 * f) * e)], f = [c.a.bf(a[0] + Math.cos(30 * f) * e), c.a.bf(a[1] + Math.sin(30 * f) * e)], [d, b, f]) : "cross" === d ? (d = [a[0] - e, a[1]], b = [a[0] + e, a[1]], f = [a[0], a[1] - e], a = [a[0], a[1] + e], [d, b, f, a]) : "diamond" === d ? (d = [a[0] - e, a[1]], b = [a[0], a[1] - e], f = [a[0] + e, a[1]], a = [a[0], a[1] + e], [d, b, f, a]) : "square" === d ? (d = [a[0] - e, 
    a[1] + e], b = [a[0] + e, a[1] + e], f = [a[0] + e, a[1] - e], a = [a[0] - e, a[1] - e], [d, b, f, a]) : "x" === d || "X" === d ? (e = Math.round(Math.cos(45 * f) * e), d = [a[0] - e, a[1] + e], b = [a[0] + e, a[1] - e], f = [a[0] + e, a[1] + e], a = [a[0] - e, a[1] - e], [d, b, f, a]) : null;
  }, Zh:function(a, b, d) {
    var c = -a / 2, f = b / 2;
    d && (d = d.placement, "left" === d ? c = -a : "right" === d ? c = 0 : "top" === d ? f = b : "bottom" === d && (f = 0));
    return {x:c, y:f};
  }, pb:function() {
    if (this.Fi) {
      return this.Fi;
    }
    if (this.c) {
      return this.c.He();
    }
  }};
  c.na.j = c.Ma.j.extend({$:c.na.bh, o:function(a) {
    this.c = a;
  }, ud:function(a, b, d) {
    if (this.c) {
      this.Re = a;
      this.S(d);
      var c = this.pb();
      d = c.type;
      this.c.Fm() ? this.sg() : (c = this.El(c), this.Om(c, a), this.za(b), "text" === d && this.oa("_textadded", {}));
    }
  }, Xm:function() {
    if ("vector" === this.pb().type) {
      if (this.ra) {
        var a = this.Cb(this.c);
        c.j.$e(this.ra, a);
      }
    } else {
      this.R && (a = this.ad()) && (this.R.style.left = a[0] + "px", this.R.style.top = a[1] + "px");
    }
  }, Ym:function() {
    this.ud(this.Re, this.R.style.zIndex, this.c.ya());
  }, El:function(a) {
    var b = a.type;
    this.R = null;
    var c = this.c;
    "picture" === b ? this.R = this.Gl(c) : "html" === b ? this.R = this.di(this.ad(), a.content) : "text" === b && (this.R = this.Jl(c));
    return this.R;
  }, Om:function(a, b) {
    this.R && (c.b.ma(this.R), delete this.R);
    b && a && (this.R = a, b.appendChild(this.R), this.Bn = {width:this.R.clientWidth, height:this.R.clientHeight});
  }, Qi:function() {
    return this.Bn;
  }, sg:function() {
    var a = this.gf, b = this.Fb, c = this.Cb(this.c);
    this.ki(c, a, b);
  }, Jl:function() {
    var a = this.ad();
    if (!a) {
      return null;
    }
    var b = this.pb(), d = b.content, e = b.textStyle;
    if (c.a.f(d) || !a) {
      return null;
    }
    var b = "position:relative;", f = 12;
    if (e) {
      var g = [];
      null !== e.size && void 0 !== e.size && (f = e.size);
      g.push("font-size:" + f + "px");
      g.push("line-height:" + (f + 1) + "px");
      e.font && g.push("font-family:" + e.font);
      e.fontstyle && g.push("font-style:" + e.fontstyle);
      null !== e.textStrokeWidth && void 0 !== e.textStrokeWidth && g.push("-webkit-text-stroke-width:" + e.textStrokeWidth);
      e.textStrokeColor ? (g.push("-webkit-text-stroke-color:" + e.textStrokeColor), e.color && g.push("-webkit-text-fill-color:" + e.color)) : e.color && g.push("color:" + e.color);
      f = e.padding;
      if (null === f || void 0 === f) {
        f = 3;
      }
      g.push("padding:" + f + "px");
      (f = e.background) && g.push("background:" + f);
      if (f = e.strokewidth) {
        var h = e.stroke;
        h || (h = "#000000");
        g.push("border:" + f + "px solid " + h);
      }
      g.length && (b += g.join(";"));
    }
    var k = c.b.M("div");
    k.style.cssText = b;
    k.innerHTML = '<pre style="display:inline;">' + d + "</pre>";
    var l = this;
    this.g("_textadded", function() {
      var a = l.Zh(k.offsetWidth, k.offsetHeight, e);
      k.style.left = a.x + "px";
      k.style.top = -a.y + "px";
    });
    return this.di(a, k);
  }, di:function(a, b) {
    if (!a || null === b || void 0 === b) {
      return null;
    }
    var d = null, d = c.b.M("div");
    d.setAttribute("unselectable", "on");
    d.style.cssText = "top:" + a[1] + "px;left:" + a[0] + "px;position: absolute; padding: 0px;-webkit-user-select: none;";
    c.a.fb(b) ? d.innerHTML = b : d.appendChild(b);
    return d;
  }, Cb:function() {
    var a = this.ad();
    if (!a) {
      return null;
    }
    var b = this.pb(), d = b.fontstyle, b = b.size;
    if (!b) {
      return null;
    }
    var e = null, f = this.Ai(a);
    if ("circle" === d) {
      d = null, d = c.D.ib ? "AL " + a[0] + "," + a[1] + " " + b + "," + b + " 0,23592600 x" : "M" + a[0] + "," + a[1] + " a" + b + "," + b + " 0,1,0,0,-0.9 Z", e = {type:"path", path:d};
    } else {
      if ("triangle" === d) {
        e = {type:"path", path:"M" + f[0][0] + "," + f[0][1] + " L" + f[1][0] + "," + f[1][1] + " L" + f[2][0] + "," + f[2][1] + " " + c.j.Ad};
      } else {
        if ("cross" === d || "x" === d || "X" === d) {
          e = {type:"path", path:"M" + f[0][0] + "," + f[0][1] + " L" + f[1][0] + "," + f[1][1] + " M" + f[2][0] + "," + f[2][1] + " L" + f[3][0] + "," + f[3][1]};
        } else {
          if ("diamond" === d || "square" === d) {
            e = {type:"path", path:"M" + f[0][0] + "," + f[0][1] + " L" + f[1][0] + "," + f[1][1] + " L" + f[2][0] + "," + f[2][1] + " L" + f[3][0] + "," + f[3][1] + " " + c.j.Ad};
          }
        }
      }
    }
    c.D.ib && e && (e.path += " e");
    return e;
  }, Gl:function() {
    var a = this.c, b = this.ad();
    if (!b) {
      return null;
    }
    var d = null, e = this.pb();
    e.url || (e.url = a.Yc.url);
    d = c.b.M("span");
    d.setAttribute("unselectable", "on");
    d.style.cssText = "top:" + b[1] + "px;left:" + b[0] + "px;position: absolute; padding: 0px; margin: 0px; border: 0px; text-align:center;vertical-align:bottom;-webkit-user-select: none;";
    var f = c.b.M("img");
    f.Nm = "border:none; position:absolute;top:0px;left:0px;cursor:pointer;max-width:none;-webkit-user-select: none;";
    null !== e.width && void 0 !== e.width && (f.width = parseInt(e.width, 0));
    null !== e.height && void 0 !== e.height && (f.height = parseInt(e.height, 0));
    f.style.cssText = f.Nm;
    f.setAttribute("unselectable", "on");
    f.onerror = function() {
      this.src = a.Yc.url;
    };
    f.onabort = function() {
      this.src = f.src;
    };
    f.src = e.url;
    e.url = f.src;
    a.fp = f;
    d.appendChild(f);
    this.za(a, this.zIndex);
    return d;
  }});
  c.Mb.j = c.Ma.j.extend({Sf:function(a, b, d) {
    if (!a || !c.a.aa(a)) {
      return null;
    }
    for (var e = [], f = 0, g = a.length;f < g;f++) {
      e.push(a[f].left + "," + a[f].top);
    }
    a = null;
    d ? a = "M" + e.reverse().join("L") + c.j.Ad : (a = "M" + e.join("L"), b && (a += c.j.Ad));
    return a;
  }, ud:function(a, b, c) {
    this.c && (this.S(c), a = this.Cb(), this.ki(a, this.gf, this.Fb));
  }, Fc:function() {
    this.c && (this.S(this.c.ya()), c.j.Fc(this.ra, this.gf, this.Fb));
  }});
  c.ca.j = c.Mb.j.extend({o:function(a) {
    this.c = a;
  }, Cb:function() {
    if (!this.c) {
      return null;
    }
    var a = this.c, a = a.O(a.qb()), a = this.Sf(a, !0, !1);
    if (!a) {
      return null;
    }
    var b = this.eg();
    c.a.aa(b) && (a = a + " " + b.join(" "));
    c.D.ib && (a = a + " e");
    return {type:"path", path:a};
  }, eg:function() {
    if (!this.c || !this.c.Oe()) {
      return null;
    }
    for (var a = this.c, b = a.yi(), c = [], e = 0, f = b.length;e < f;e++) {
      var g = a.O(b[e]);
      c.push(this.Sf(g, !0, !0));
    }
    return c;
  }});
  c.zb.j = c.Mb.j.extend({o:function(a) {
    this.c = a;
  }, Cb:function() {
    if (!this.c) {
      return null;
    }
    var a = this.c, a = a.O(a.qb()), a = this.Sf(a, !1, !1);
    c.D.ib && (a = a + " e");
    return a ? {type:"path", path:a} : null;
  }});
  c.jb.j = c.ca.j.extend({o:function(a) {
    this.c = a;
  }, Cb:function() {
    if (!this.c) {
      return null;
    }
    var a = this.c.Id(), b = this.Sa(), d = a.left - b.px + "," + a.top, a = "M" + d + " a" + b.px + "," + b.py + " 0,1,0,0,-0.9Z";
    c.D.ib && (a = "AL " + d + " " + b.px + "," + b.py + " 0,23592600 x ");
    b = this.eg();
    c.a.aa(b) && (a = a + " " + b.join(" "));
    c.D.ib && (a = a + " e");
    return {type:"path", path:a};
  }, Sa:function() {
    var a = this.c;
    return a.h().Pa(a.width / 2, a.height / 2);
  }});
  c.La.j = c.jb.j.extend({o:function(a) {
    this.c = a;
  }, Sa:function() {
    var a = this.c, b = a.s;
    return a.h().Pa(b, b);
  }});
  c.Pc.j = c.La.j.extend({o:function(a) {
    this.c = a;
  }, Cb:function() {
    if (!this.c) {
      return null;
    }
    var a = this.c, b = a.Id(), d = this.Sa(), e;
    e = b.left;
    var b = b.top, d = d.px, f = a.bc, a = a.Tb, g = Math.PI / 180, h = e + d * Math.cos(-f * g), k = e + d * Math.cos(-a * g), l = b + d * Math.sin(-f * g), g = b + d * Math.sin(-a * g), h = c.a.mb(h), k = c.a.mb(k), l = c.a.mb(l), g = c.a.mb(g), d = .5 + d << 0;
    f > a && (f -= a, a = 360);
    e = c.D.Og ? ["M", e, b, "L", h, l, "A", d, d, 0, +(180 < a - f), 0, k, g, "z"].join(" ") : c.D.ib ? "M " + e + "," + b + "AE " + e + "," + b + " " + d + "," + d + " " + 65535 * f + "," + 65535 * (a - f) + " x e" : void 0;
    return {type:"path", path:e};
  }});
  c.Lb.j = c.ca.j.extend({o:function(a) {
    this.c = a;
  }, Cb:function() {
    if (!this.c) {
      return null;
    }
    var a = this.c, a = a.h().O(a.bd()), b = this.Sa(), a = "M" + (a.left + "," + a.top) + " L" + (a.left + b.px) + "," + a.top + " L" + (a.left + b.px) + "," + (a.top + b.py) + " L" + a.left + "," + (a.top + b.py) + " " + c.j.Ad, b = this.eg();
    c.a.aa(b) && (a = a + " " + b.join(" "));
    c.D.ib && (a = a + " e");
    return {type:"path", path:a};
  }, Sa:function() {
    var a = this.c;
    return a.h().Pa(a.width, a.height);
  }});
  c.na.T = c.Ma.T.extend({$:c.na.bh, o:function(a) {
    this.c = a;
  }, Zc:function(a, b) {
    var c = this.c;
    if (c) {
      var e = c.h();
      if (e) {
        var f = this.ad(), e = e.Rf({left:f[0], top:f[1]}), g = (f = this.pb()) ? f.type : null;
        "picture" === g ? this.cj(a, e, f, b) : "text" === g ? this.ej(a, e, !1) : "vector" === g ? this.sg(a, e, c) : this.cj(a, e, c.cg(), b);
      }
    }
  }, cj:function(a, b, c, e) {
    var f = c.width, g = c.height;
    e = e.gm(c.url);
    c.url = e.src;
    f && g ? a.drawImage(e, b.left, b.top, f, g) : a.drawImage(e, b.left, b.top);
    return b;
  }, sg:function(a, b) {
    var c = this.pb(), e = c.fontstyle, f = c.size;
    if (!f) {
      return null;
    }
    c = this.Ai([b.left, b.top]);
    a.beginPath();
    if ("circle" === e) {
      a.arc(b.left, b.top, f, 0, 2 * Math.PI), a.stroke(), this.$c(a, this.Fb);
    } else {
      if ("triangle" === e || "diamond" === e || "square" === e) {
        a.moveTo(c[0][0], c[0][1]);
        e = 1;
        for (f = c.length;e < f;e++) {
          a.lineTo(c[e][0], c[e][1]);
        }
        a.closePath();
        a.stroke();
        this.$c(a, this.Fb);
      } else {
        if ("cross" === e || "x" === e || "X" === e) {
          a.moveTo(c[0][0], c[0][1]), a.lineTo(c[1][0], c[1][1]), a.moveTo(c[2][0], c[2][1]), a.lineTo(c[3][0], c[3][1]), a.stroke();
        }
      }
    }
  }, ej:function(a, b, d) {
    var e = this.pb(), f = e.content;
    if (c.a.f(f)) {
      return null;
    }
    var g = e.textStyle, e = 12, h = "", k = "rgba(0,0,0,1)";
    g || (g = {});
    g.fontstyle ? h += g.fontstyle : h += "normal";
    c.a.f(g.size) || (e = g.size);
    h += " " + e + "px";
    h = g.font ? h + (" " + g.font) : h + " SIMHEI";
    g.color && (k = this.yc(g.color, 1));
    a.font = h;
    h = g.padding;
    c.a.f(h) && (h = 3);
    for (var f = f.split("\n"), l = 0, m = 0, n = 0, q = f.length;n < q;n++) {
      var p = a.measureText(f[n]).width;
      p > l && (l = p);
      m += e;
      0 !== n && (m += 2);
    }
    n = this.Zh(l + 2 * h, m + 2 * h, g);
    if (d) {
      return a = this.ti(), {width:l, height:m, offset:{x:n.x + a.left, y:n.y - a.top}};
    }
    b = {left:b.left + n.x, top:b.top - n.y};
    a.beginPath();
    a.rect(b.left, b.top, l + 2 * h, m + 2 * h);
    if (d = g.background) {
      a.fillStyle = this.yc(d), a.fill();
    }
    if (d = g.strokewidth) {
      (g = g.stroke) || (g = "#000000"), a.lineWidth = d, a.strokeStyle = this.yc(g, 1), a.stroke();
    }
    n = 0;
    for (q = f.length;n < q;n++) {
      k && (a.fillStyle = k, a.fillText(f[n], b.left + h, b.top + h + n * (e + 2)));
    }
  }, Qi:function() {
    var a = this.c;
    if (!a) {
      return null;
    }
    a = a.h();
    if (!a) {
      return null;
    }
    var b = a.yn;
    b || (b = c.b.M("canvas"), b.width = 10, b.height = 10, b = b.getContext("2d"), a.yn = b);
    return this.ej(b, {left:0, top:0}, !0);
  }});
  c.Mb.T = c.Ma.T.extend({dj:function(a, b, d) {
    if (c.a.aa(b)) {
      b = this.c.O(b);
      for (var e = 0, f = b.length;e < f;e++) {
        var g = {left:c.a.mb(b[e].left + d.left), top:c.a.mb(b[e].top + d.top)};
        0 === e ? a.moveTo(g.left, g.top) : a.lineTo(g.left, g.top);
      }
    }
  }});
  c.zb.T = c.Mb.T.extend({Zc:function(a, b, c) {
    b = this.c.qb();
    a.beginPath();
    this.dj(a, b, c);
    a.stroke();
  }});
  c.ca.T = c.Mb.T.extend({Zc:function(a, b, c) {
    b = this.c.qb();
    a.beginPath();
    this.dj(a, b, c);
    a.closePath();
    a.stroke();
    this.$c(a, this.Fb);
  }});
  c.jb.T = c.ca.T.extend({Zc:function(a, b, c) {
    b = this.c.Id();
    c = {left:b.left + c.left, top:b.top + c.top};
    b = this.Sa();
    this.Mj(a, c.left, c.top, b.px, b.py);
    this.$c(a, this.Fb);
  }, Mj:function(a, b, c, e, f) {
    var g = .5522848 * e, h = .5522848 * f;
    a.beginPath();
    a.moveTo(b - e, c);
    a.bezierCurveTo(b - e, c - h, b - g, c - f, b, c - f);
    a.bezierCurveTo(b + g, c - f, b + e, c - h, b + e, c);
    a.bezierCurveTo(b + e, c + h, b + g, c + f, b, c + f);
    a.bezierCurveTo(b - g, c + f, b - e, c + h, b - e, c);
    a.closePath();
    a.stroke();
  }, Sa:function() {
    var a = this.c;
    return a.h().Pa(a.width / 2, a.height / 2);
  }});
  c.La.T = c.jb.T.extend({Sa:function() {
    var a = this.c, b = a.s;
    return a.h().Pa(b, b);
  }});
  c.Lb.T = c.ca.T.extend({Zc:function(a, b, d) {
    b = this.c;
    var e = b.h().O(b.bd());
    b = this.Sa();
    var f = e.left + d.left;
    d = e.top + d.top;
    a.beginPath();
    a.rect(c.a.mb(f), c.a.mb(d), c.a.mb(b.px), c.a.mb(b.py));
    a.stroke();
    this.$c(a, this.Fb);
  }, Sa:function() {
    var a = this.c;
    return a.h().Pa(a.width, a.height);
  }});
  c.Pc.T = c.ca.T.extend({Zc:function(a, b, c) {
    b = this.c;
    var e = b.Id();
    c = {left:e.left + c.left, top:e.top + c.top};
    e = this.Sa();
    this.cn(a, c.left, c.top, e.px, b.bc, b.Tb);
    a.stroke();
    this.$c(a, b.Ho());
  }, cn:function(a, b, c, e, f, g) {
    var h = Math.PI / 180;
    g = h * -g;
    f = h * -f;
    a.save();
    a.translate(b, c);
    a.beginPath();
    a.arc(0, 0, e, g, f);
    a.save();
    a.rotate(f);
    a.lineTo(0, 0);
    a.restore();
    a.rotate(g);
    a.lineTo(e, 0);
    a.closePath();
    a.restore();
  }, Sa:function() {
    var a = this.c, b = a.s;
    return a.h().Pa(b, b);
  }});
  c.pd.Ma = c.Ma.extend({o:function(a) {
    this.c = a;
  }, ud:function() {
    if (this.c) {
      Array.prototype.push.call(arguments, this.c.ya());
      for (var a = this.c.ha(), b = 0, c = a.length;b < c;b++) {
        var e = a[b].K;
        e && e.Ve.apply(e, arguments);
      }
    }
  }, remove:function() {
    for (var a = this.c.ha(), b = 0, c = a.length;b < c;b++) {
      var e = a[b].K;
      e && e.remove.apply(e, arguments);
    }
  }, za:function(a) {
    for (var b = this.c.ha(), c = 0, e = b.length;c < e;c++) {
      var f = b[c].K;
      f && f.za.apply(f, arguments);
    }
  }, show:function() {
    for (var a = this.c.ha(), b = 0, c = a.length;b < c;b++) {
      var e = a[b].K;
      e && e.show.apply(e, arguments);
    }
  }, F:function() {
    for (var a = this.c.ha(), b = 0, c = a.length;b < c;b++) {
      var e = a[b].K;
      e && e.F.apply(e, arguments);
    }
  }, refresh:function() {
    for (var a = this.c.ha(), b = 0, c = a.length;b < c;b++) {
      var e = a[b].K;
      e.S(this.c.ya());
      e && e.refresh.apply(e, arguments);
    }
  }, Ze:function() {
    for (var a = this.c.ha(), b = 0, c = a.length;b < c;b++) {
      var e = a[b].K;
      e.S(this.c.ya());
      e && e.Ze.apply(e, arguments);
    }
  }, $b:function() {
  }});
  c.Yj = c.U.extend({$:[c.V], o:function(a, b) {
    if (this.c = a) {
      this.jd = b, this.jd || (this.jd = {});
    }
  }, Wa:function() {
    var a = this.c.h();
    if (a) {
      this.map = a;
      if (!a.A.ni) {
        var b = c.b.M("div");
        b.style.cssText = "position:absolute;top:0px;left:0px;z-index:2000;";
        a.A.dd.appendChild(b);
        a.A.ni = b;
      }
      this.Ia = a.A.ni;
      this.jd.symbol && (this.kd = this.c.ya(), this.c.S(this.jd.symbol));
      this.Qa = [];
      a.bind("zoomend", this.Td, this);
      a.bind("zoomstart", this.aj, this);
      a.bind("moveend", this.Td, this);
      a.bind("resize", this.Td, this);
    }
  }, start:function() {
    if (this.c && this.c.h() && !this.c.tc) {
      this.Wa();
      var a = this.c;
      a instanceof c.na ? this.Fl() : (a instanceof c.La ? this.Bl() : a instanceof c.Lb ? this.Il() : a instanceof c.jb ? this.Cl() : (a instanceof c.ca || a instanceof c.zb) && this.Hl(), this.tc = !0);
    }
  }, stop:function() {
    this.tc = !1;
    var a = this.map;
    if (a && this.c) {
      a.I("zoomend", this.Td, this);
      a.I("zoomstart", this.aj, this);
      a.I("resize", this.Td, this);
      for (var a = 0, b = this.Qa.length;a < b;a++) {
        c.b.ma(this.Qa[a]);
      }
      this.Qa = [];
      this.jd.symbol && (this.c.S(this.kd), delete this.kd);
    }
  }, Wb:function() {
    return c.a.f(this.tc) ? !1 : this.tc;
  }, va:function(a) {
    this.c && this.c.oa(a, {target:this.c});
  }, ci:function(a, b) {
    b || (b = {});
    var d = c.b.M("div"), e = b.cursor;
    e || (e = "move");
    d.style.cssText = "display:block;position: absolute; top:" + (a.top - 5) + "px;left:" + (a.left - 5) + "px;cursor:" + e + ";";
    d.innerHTML = '<div title="' + b.Kb + '" style="display:block;width:11px;height:11px;background:url(' + c.host + '/engine/images/dd-via.png) 0px 0px no-repeat;"></div>';
    return d;
  }, oc:function(a, b) {
    b || (b = {Kb:""});
    var d = this.ci(a, b), e = this.map.la;
    c.b.Za(d, "mousedown", function(a) {
      var g = this;
      b.Zb && b.Zb.call(g);
      document.onmouseup = function(a) {
        a = a || window.event;
        document.onmousemove = null;
        document.onmouseup = null;
        c.b.stopPropagation(a);
        b.Va && b.Va.call(g);
        return !1;
      };
      document.onmousemove = function(a) {
        a = a || window.event;
        g.xm();
        var f = g.map.Dg(c.b.Gb(a, e));
        d.style.top = f.top - 5 + "px";
        d.style.left = f.left - 5 + "px";
        c.b.stopPropagation(a);
        b.tb && b.tb.call(g, f);
        return !1;
      };
      c.b.stopPropagation(a);
      return !1;
    }, this);
    this.If(d, b);
    return d;
  }, Pf:function(a) {
    a || (a = {});
    var b = this.c, c = this.map, e = c.O(b.Ba());
    this.oc(e, {Kb:"\u62d6\u52a8\u4ee5\u79fb\u52a8\u56fe\u5f62", Zb:function() {
      a.Zb && a.Zb.call(this);
    }, tb:function(e) {
      e = c.od(e);
      b.Hc(e);
      b.Fa();
      a.tb && a.tb.call(this);
      this.va("positionchanging");
    }, Va:function() {
      a.Va && a.Va.call(this);
      this.va("positionchanged");
    }, Ua:function() {
      return c.O(b.Ba());
    }});
  }, Fl:function() {
    this.Pf();
  }, Bl:function() {
    function a() {
      var a = c.O(b.Ba()), e = c.Pa(b.s, 0);
      return {left:a.left + e.px, top:a.top};
    }
    var b = this.c, c = this.map, e = a(), f = this.oc(e, {Kb:"\u62d6\u52a8\u4ee5\u8c03\u6574\u5706\u5f62\u534a\u5f84", tb:function(a) {
      var e = c.O(b.Ba());
      a = c.md(Math.abs(a.left - e.left), Math.abs(a.top - e.top));
      b.Jg(a);
      this.va("shapechanging");
    }, Va:function() {
      this.va("shapechanged");
    }, Ua:function() {
      return a();
    }});
    this.Pf({Zb:function() {
      f.style.display = "none";
    }, Va:function() {
      var b = a();
      f.style.top = b.top - 5 + "px";
      f.style.left = b.left - 5 + "px";
      f.style.display = "";
    }});
  }, Cl:function() {
    function a() {
      var a = c.O(b.Ba()), e = c.Pa(Math.round(b.width / 2), Math.round(b.height / 2));
      return {left:a.left + e.px, top:a.top + e.py};
    }
    var b = this.c, c = this.map, e = a(), f = this.oc(e, {Kb:"\u62d6\u52a8\u4ee5\u8c03\u6574\u692d\u5706\u5927\u5c0f", tb:function(a) {
      var e = c.O(b.Ba()), f = a.left - e.left;
      a = a.top - e.top;
      0 <= f && 0 <= a && (f = c.md(Math.abs(f), 0), a = c.md(0, Math.abs(a)), b.ce(2 * f), b.ae(2 * a));
      this.va("shapechanging");
    }, Va:function() {
      this.va("shapechanged");
    }, Ua:function() {
      return a();
    }});
    this.Pf({Zb:function() {
      f.style.display = "none";
    }, Va:function() {
      var b = a();
      f.style.top = b.top - 5 + "px";
      f.style.left = b.left - 5 + "px";
      f.style.display = "";
    }});
  }, Il:function() {
    function a() {
      var a = c.O(b.bd()), e = c.Pa(Math.round(b.width), Math.round(b.height));
      return {left:a.left + e.px, top:a.top + e.py};
    }
    var b = this.c, c = this.map, e = a(), f = this.oc(e, {Kb:"\u62d6\u52a8\u4ee5\u8c03\u6574\u77e9\u5f62\u5927\u5c0f", tb:function(a) {
      var e = c.O(b.bd()), f = a.left - e.left;
      a = a.top - e.top;
      0 <= f && 0 <= a && (f = c.md(Math.abs(f), 0), a = c.md(0, Math.abs(a)), b.ce(f), b.ae(a));
      this.va("shapechanging");
    }, Va:function() {
      this.va("shapechanged");
    }, Ua:function() {
      return a();
    }}), e = c.O(b.bd());
    this.oc(e, {Kb:"\u62d6\u52a8\u4ee5\u79fb\u52a8\u56fe\u5f62", Zb:function() {
      f.style.display = "none";
    }, tb:function(a) {
      a = c.od(a);
      b.xj(a);
      b.Fa();
      this.va("positionchanging");
    }, Va:function() {
      var b = a();
      f.style.top = b.top - 5 + "px";
      f.style.left = b.left - 5 + "px";
      f.style.display = "";
      this.va("positionchanged");
    }, Ua:function() {
      return c.O(b.bd());
    }});
  }, Hl:function() {
    function a(a) {
      var d = g.O(a), e = this.oc(d, {Kb:"\u62d6\u52a8\u4ee5\u8c03\u6574" + n + "\u9876\u70b9", tb:function(c) {
        b();
        c = g.od(c);
        a.x = c.x;
        a.y = c.y;
        f.Fa();
        f.Ka();
        this.va("shapechanging");
      }, Va:function() {
        this.va("shapechanged");
        this.Ye([l]);
      }, Ua:function() {
        return g.O(a);
      }});
      c.b.Za(e, "mouseover", function() {
        k.style.top = parseInt(e.style.top) - 2 + "px";
        k.style.left = parseInt(e.style.left) + 12 + "px";
        k.style.display = "block";
        k.source = e;
      }, this);
      return e;
    }
    function b() {
      k.style.display = "none";
    }
    function d() {
      var a = f.u(), a = g.l().C(a);
      return g.O(a);
    }
    function e(a, b, c) {
      if (!a || !b) {
        return !1;
      }
      c = c ? Math.abs(c) : 0;
      return Math.abs(a.x - b.x) <= c && Math.abs(a.y - b.y) <= c ? !0 : !1;
    }
    for (var f = this.c, g = f.h(), h = [], k = null, l = null, m = null, n = f instanceof c.ca ? "\u591a\u8fb9\u5f62" : "\u591a\u6298\u7ebf", q = f.qb(), p = 0, v = q.length;p < v;p++) {
      h.push(a.call(this, q[p]));
    }
    (function() {
      l = this.oc(d(), {Kb:"\u62d6\u52a8\u4ee5\u79fb\u52a8" + n, Zb:function() {
        b();
        for (var a = 0, c = h.length;a < c;a++) {
          h[a].style.display = "none";
        }
      }, tb:function(a) {
        var b = d();
        a = {left:a.left + 5 - b.left, top:a.top + 5 - b.top};
        for (var b = f.qb(), c = 0, e = b.length;c < e;c++) {
          var h = g.O(b[c]), h = g.od({left:h.left + a.left, top:h.top + a.top});
          b[c].x = h.x;
          b[c].y = h.y;
        }
        f.Fa();
        f.rg();
        this.va("positionchanging");
      }, Va:function() {
        this.Ye(h);
        for (var a = 0, b = h.length;a < b;a++) {
          h[a].style.display = "";
        }
        this.va("positionchanged");
      }, Ua:function() {
        return d();
      }});
    }).call(this);
    (function() {
      k = c.b.M("div");
      k.style.cssText = "display:none;position: absolute; cursor: pointer;top:-9999px;left:0px;";
      k.innerHTML = '<div title="\u70b9\u51fb\u5220\u9664\u7aef\u70b9" style="display:block;width:14px;height:14px;background:url(' + c.host + '/engine/images/close.gif) 0px 0px no-repeat;"></div>';
      c.b.Za(k, "click", function(a) {
        var d = k.source;
        b();
        if (!d) {
          return c.b.stopPropagation(a), !1;
        }
        var e = c.a.qj(d, h);
        if (0 > e) {
          return c.b.stopPropagation(a), !1;
        }
        f.qb().splice(e, 1);
        h.splice(e, 1);
        c.b.ma(d);
        f.Fa();
        f.Ka();
        l && this.Ye([l]);
        this.va("shapechanged");
        c.b.stopPropagation(a);
        return !1;
      }, this);
      c.b.Za(k, "mouseout", function(a) {
        b();
        k.source = null;
        c.b.stopPropagation(a);
        return !1;
      }, this);
      this.If(k, {Ua:function() {
        b();
      }});
    }).call(this);
    m = this.ci({left:0, top:0}, {Kb:"\u70b9\u51fb\u540e\u589e\u52a0\u8282\u70b9", cursor:"pointer"});
    m.style.display = "none";
    c.b.Za(m, "click", function() {
      var b = c.b.Sd(m), d = g.P().resolutions[g.w], b = g.od({left:b.left + 5, top:b.top + 5}), d = c.Oc.yh(b, f, 2 * d);
      0 <= d && (h.splice(d + 1, 0, a.call(this, b)), q.splice(d + 1, 0, b), f.Ig(q), f.Fa(), this.va("shapechanged"));
    }, this);
    c.b.Za(g.la, "mousemove", function(a) {
      var b = g.P().resolutions[g.w];
      a = c.b.Gb(a, g.la);
      var d = g.transform(a), b = 2 * b, h = c.Oc.yh(d, f, b), k = f.qb();
      0 <= h && !e(d, k[h], b) && !e(d, k[h + 1], b) ? (a = g.Dg(a), m.style.left = a.left - 5 + "px", m.style.top = a.top - 5 + "px", m.style.display = "") : m.style.display = "none";
    }, this);
    this.If(m, {Ua:function() {
      m.style.display = "none";
      return null;
    }});
  }, aj:function() {
    this.Ia.style.display = "none";
  }, Td:function() {
    this.refresh();
    this.Ia.style.display = "";
  }, refresh:function() {
    this.Qa && this.Ye(this.Qa);
  }, Ye:function(a) {
    if (a) {
      for (var b = 0, c = a.length;b < c;b++) {
        if (a[b] && a[b].Ua) {
          var e = a[b].Ua();
          e && (a[b].style.left = e.left - 5 + "px", a[b].style.top = e.top - 5 + "px");
        }
      }
    }
  }, xm:function() {
    this.c && (this.c.kc(), this.c.Yh());
  }, If:function(a, b) {
    a && (this.Qa || (this.Qa = []), a.Ua = b.Ua, this.Qa.push(a), this.Ia.appendChild(a));
  }, up:function(a) {
    if (this.Qa) {
      for (var b = -1, d = 0, e = this.Qa.length;d < e;d++) {
        if (this.Qa[d] == a) {
          b = d;
          break;
        }
      }
      0 < b && this.Qa.splice(b, 1);
    }
    a && c.b.ma(a);
  }});
  c.Ha = {};
  c.Ha.Pan = {ta:function(a) {
    if (c.a.Ld(a)) {
      return a = this.l().C(a), a = this.wi(a), this.tg(a), this;
    }
  }, tg:function(a) {
    this.ja({left:a.left, top:a.top});
    this.gd({left:-a.left, top:-a.top});
    this.fireEvent("moving");
    this.ub({target:this});
    return this;
  }, Oh:function(a) {
    function b() {
      if (c.a.aa(m)) {
        if (t.yd) {
          var a = m[u].y, d = m[u].x;
          t.ja({left:d, top:a});
          t.gd({left:-d, top:-a});
          u++;
          u <= w - 1 ? (0 !== u % 3 || c.D.ap || t.Cc({target:t}), setTimeout(b, 8 + u)) : t.li = setTimeout(function() {
            t.ub({target:t});
            t.Ji = !1;
          }, 50);
        } else {
          t.yd = !0, t.ub({target:t});
        }
      }
    }
    a || (a = {left:0, top:0});
    a.left || (a.left = 0);
    a.top || (a.top = 0);
    var d = 0 <= a.left ? 1 : -1, e = 0 <= a.top ? 1 : -1, f = Math.abs(a.left);
    a = Math.abs(a.top);
    var g = Math.ceil(f / 10 - 1), h = Math.ceil(a / 10 - 1), k = (g - 1) / 19;
    0 >= k && (k = 1);
    var l = (h - 1) / 19;
    0 >= l && (l = 1);
    for (var m = [], n = 1, q = 1, p = 0, v = 0, r = 0;;) {
      n = g - p * k;
      q = h - p * l;
      if (0 > n || v > f) {
        n = 0;
      }
      if (0 > q || r > a) {
        q = 0;
      }
      if (0 >= n && 0 >= q) {
        break;
      }
      m.push({x:Math.round(n) * d, y:Math.round(q) * e});
      p++;
      v += n;
      r += q;
    }
    var w = m.length, t = this, u = 0;
    t.li && clearTimeout(t.li);
    t.Ji = !0;
    b();
  }};
  c.Ha.Zoom = {vb:function(a, b) {
    this.L && this.L.vb(!0);
    this.sc(function(a) {
      a && a.vb && a.vb();
    }, this.Hd());
    this.ym();
    this.ml(a, b);
    this.fireEvent("zoomstart", {target:this});
  }, Ea:function(a) {
    this.Cm();
    this.L && this.L.clear();
    this.ll();
    this.bn();
    this.Te = a;
    this.L && this.L.Ea();
    this.sc(function(a) {
      a && a.Ea && a.Ea();
    }, this.Hd());
    this.qn();
    this.fireEvent("zoomend", {target:this});
  }, bn:function() {
    var a = this.ja();
    c.b.Sd(this.A.dd, {left:0, top:0});
    this.Xd();
    this.Qb && (this.Qb.style.left = a.left + "px", this.Qb.style.top = a.top + "px");
  }, Cm:function() {
    this.Qb = this.A.Qd.cloneNode(!0);
    this.A.dd.insertBefore(this.Qb, this.A.ed);
  }, Uh:function(a) {
    a < this.Ta && (a = this.Ta);
    a > this.pa && (a = this.pa);
    return a;
  }, iq:function(a) {
    function b(a) {
      a && a.Ea();
    }
    if (this.options.enableZoom) {
      var c = a.pixel, e = this.Uh(this.w + 1);
      e === this.w ? (a = {top:(c.top - this.height / 2) / 2, left:(this.width / 2 - c.left) / 2}, this.gd(a), this.ja(a), this.L && this.L.Ea(), this.sc(b, this.Hd())) : this.zoom(e, a.pixel);
    }
  }, zoom:function(a, b) {
    if (this.options.enableZoom && (this.yd = !1, a = this.Uh(a), this.Te !== a)) {
      this.Kj = !0;
      b || (b = {top:this.height / 2, left:this.width / 2});
      this.xg();
      var c = this.N.resolutions;
      this.w = a;
      var e = c[this.Te] / c[a];
      a < this.Te ? (c = c[a + 1] / c[a], c = {top:-(b.top - this.height / 2) * (1 - c), left:-(b.left - this.width / 2) * (1 - c)}) : (c = c[a - 1] / c[a], c = {top:(b.top - this.height / 2) * (c - 1), left:(b.left - this.width / 2) * (c - 1)});
      this.gd(c);
      this.vb(e, b, a);
      var f = this;
      this.Jj && clearTimeout(this.Jj);
      this.Jj = setTimeout(function() {
        f.Kj = !1;
        f.Ea(a);
      }, 150);
    }
  }, ml:function(a, b) {
    if (!c.D.mg) {
      var d = this.ja(), e = d.top, f = d.left, d = this.A.Qd;
      this.A.Qd.className = "MAP_ZOOM_ANIMATED";
      var g = c.b.Zl(d), f = Math.round(this.width / 2 - f), e = Math.round(this.height / 2 - e);
      null !== g && "" !== g || !b ? b || c.b.Fg(d, f + "px " + e + "px") : (g = {top:b.top - this.height / 2, left:b.left - this.width / 2}, f += g.left, e += g.top, c.b.Fg(d, f + "px " + e + "px"));
      c.b.sj(d, " scale(" + a + "," + a + ")");
    }
  }, ll:function() {
    if (!c.D.mg) {
      var a = this.A.Qd;
      a.className = "";
      c.b.Fg(a, "");
      c.b.sj(a, "");
      a.style.top = "0px";
      a.style.left = "0px";
    }
  }, Yo:function() {
    return 150;
  }};
  c.Ha.pk = {$a:function(a, b) {
    return c.a.Ld(a) && c.a.Ld(b) && this.l() ? c.J.Ee(a, b) ? 0 : this.l().Ra(a, b) : null;
  }, Bb:function(a) {
    return a.Bb(this.l());
  }, nb:function(a) {
    return a.nb(this.l());
  }, buffer:function(a, b, d) {
    function e() {
      var a = "distance=" + b;
      return a = a + "&encoding=utf-8" + ("&data=" + encodeURIComponent(JSON.stringify(g.Xa())));
    }
    var f = {fillSymbol:{fillOpacity:0}, strokeSymbol:{stroke:"#800040", strokeWidth:2, strokeOpacity:1, strokeDasharray:"--"}}, g = a;
    a = null;
    if (g.type === g.TYPE_POINT) {
      a = new c.Circle(g.H, b), a.S(f), d({success:!0, data:a});
    } else {
      if (g.type === g.TYPE_CIRCLE) {
        a = new c.Circle(g.H, g.s + b), a.S(f), d({success:!0, data:a});
      } else {
        a = c.host + "/enginerest/geometry/buffer";
        var h = e();
        (new c.a.Ga(a, 0, h, function(a) {
          a = c.a.ld(a);
          a.success || d(a);
          (a = c.i.Zf(a.data)) ? (a.S(f), d({success:!0, data:a})) : d({success:!1, data:null});
        })).Vd();
      }
    }
  }, ta:function(a, b, d, e) {
    function f() {
      for (var a = [], c = 0, e = b.length;c < e;c++) {
        a.push(JSON.stringify(b[c].Xa()));
      }
      c = "geo1=" + JSON.stringify(g.Xa());
      c += "&geos=[" + a.join(",") + "]";
      return c += "&relation=" + d;
    }
    if (!(!b || !b.length || 0 > d || 7 < d)) {
      var g = a;
      a = c.host + "/enginerest/geometry/relation";
      var h = f();
      (new c.a.Ga(a, 0, h, function(a) {
        a = eval("(" + a + ")");
        e(a);
      })).Vd();
    }
  }, lg:function(a) {
    if (a) {
      var b = a.layers;
      if (b && 0 != b.length) {
        var d = a.success;
        a = new c.La(a.coordinate, a.radius);
        for (var e = [], f = 0, g = b.length;f < g;f++) {
          var h = b[f], k = h.Hb();
          if (h && h.h() && !(0 <= k.indexOf("mt__internal_layer"))) {
            for (var h = b[f].Wl(), k = 0, l = h.length;k < l;k++) {
              e.push(h[k]);
            }
          }
        }
        b = this.Dm(a, e);
        return d.call(this, {success:!0, data:b});
      }
    }
  }, Dm:function(a, b) {
    if (!(!a instanceof c.La) && b && b.length) {
      for (var d = [], e = 0, f = b.length;e < f;e++) {
        var g = b[e];
        this.xk(a, g) && d.push(g);
      }
      return d;
    }
  }, xk:function(a, b) {
    var d;
    switch(b.type) {
      case c.i.ih:
        d = this.qf(a, b);
        break;
      case c.i.jh:
        d = this.oh(a, b);
        break;
      case c.i.ok:
        d = this.ph(a, b);
        break;
      case c.i.Un:
        d = this.Bk(a, b);
        break;
      case c.i.Pn:
        d = this.vk(a, b);
        break;
      case c.i.Qn:
        d = this.wk(a, b);
        break;
      case c.i.Vn:
        d = this.Ck(a, b);
        break;
      case c.i.Rn:
        d = this.yk(a, b);
        break;
      case c.i.Sn:
        d = this.zk(a, b);
        break;
      case c.i.Tn:
        d = this.Ak(a, b);
        break;
      default:
        d = this.Ya(a, b);
    }
    return d;
  }, qf:function(a, b) {
    return this.Ya(a, b) ? !0 : !1;
  }, Dh:function(a, b) {
    var c = a.s, e = this.$a(a.u(), b);
    return c >= e;
  }, oh:function(a, b) {
    if (this.Ya(a, b)) {
      var d = a.u();
      if (c.Oc.Em(d, b)) {
        return !0;
      }
      d = b.cd();
      if (this.te(a, d)) {
        return !0;
      }
    }
    return !1;
  }, ph:function(a, b) {
    if (this.Ya(a, b)) {
      var c = b.Le();
      if (this.te(a, c)) {
        return !0;
      }
    }
    return !1;
  }, Bk:function(a, b) {
    if (this.Ya(a, b)) {
      var d = a.u(), e = this.l();
      if (!b || !e) {
        return !1;
      }
      e = b.ab(e);
      if (c.Oc.Qe(d, e) || this.te(a, b.xa())) {
        return !0;
      }
    }
    return !1;
  }, vk:function(a, b) {
    if (this.Nk(a.u(), b)) {
      return !0;
    }
    if (this.Ya(a, b)) {
      var c = a.s, e = b.s, f = this.$a(a.u(), b.u());
      return c + e >= f;
    }
    return !1;
  }, wk:function(a, b) {
    return this.Ya(a, b) && (a.u(), this.Ok(a, b) || this.Mk(a, b)) ? !0 : !1;
  }, Ck:function(a, b) {
    if (this.Ya(a, b)) {
      var c = a.u(), e = a.s, f = this.vh(b, 0), g = b.u();
      if (this.te(a, [g, f.startPoint, g, f.endPoint])) {
        return !0;
      }
      var e = this.vh(b, 2 * e), f = e.middlePoint, h = e.endPoint;
      if (this.pf(e.startPoint, f, c) || this.pf(f, h, c)) {
        return this.qf(a, g);
      }
    }
    return !1;
  }, yk:function(a, b) {
    var c = !1;
    if (this.Ya(a, b)) {
      var e = b.ha();
      if (e) {
        for (var f = 0, g = e.length;f < g;f++) {
          if (this.Xn(a, e[f])) {
            c = !0;
            break;
          }
        }
      }
    }
    return c;
  }, zk:function(a, b) {
    var c = !1;
    if (this.Ya(a, b)) {
      var e = b.ha();
      if (e) {
        for (var f = 0, g = e.length;f < g;f++) {
          if (this.oh(a, e[f])) {
            c = !0;
            break;
          }
        }
      }
    }
    return c;
  }, Ak:function(a, b) {
    var c = !1;
    if (this.Ya(a, b)) {
      var e = b.ha();
      if (e) {
        for (var f = 0, g = e.length;f < g;f++) {
          if (this.ph(a, e[f])) {
            c = !0;
            break;
          }
        }
      }
    }
    return c;
  }, Ya:function(a, b) {
    var d = this.l();
    if (!d) {
      return null;
    }
    if (!b) {
      return !1;
    }
    var e = a.ab(d), d = b.mc(d);
    return c.B.Od(e, d);
  }, te:function(a, b) {
    for (var c = !1, e = this.Ik(a, b), f = 0, g = e.length;f < g;f++) {
      var h = e[f], k = e[f + 1];
      if (this.Sk(h, k, a)) {
        c = !0;
        break;
      }
      if (this.Dk(h, k, a)) {
        c = !0;
        break;
      }
    }
    return c;
  }, Ik:function(a, b) {
    var c = [], e = this.l();
    if (!e) {
      return null;
    }
    for (var e = a.ab(e), f = 0, g = b.length;f < g;f++) {
      if (f < g - 1) {
        var h = b[f], k = b[f + 1], l = Math.max(h.x, k.x), m = Math.min(h.x, k.x), n = Math.max(h.y, k.y), q = Math.min(h.y, k.y);
        m > e.eq || l < e.fq || q > e.gq || n < e.hq || (c.push(h), c.push(k));
      }
    }
    return c;
  }, Sk:function(a, b, c) {
    return this.Dh(c, a) || this.Dh(c, b);
  }, Dk:function(a, b, d) {
    var e = d.u(), e = this.$k(a, b, e);
    return this.pf(a, b, e) ? (a = new c.na(e), this.qf(d, a)) : !1;
  }, $k:function(a, b, d) {
    var e = this.l();
    if (!(a && b && d && e)) {
      return null;
    }
    a = e.C(a);
    b = e.C(b);
    d = e.C(d);
    b = (a.y - b.y) / (a.x - b.x);
    a = a.y - b * a.x;
    d = (d.x + b * d.y - b * a) / (b * b + 1);
    a = new c.J(d, b * d + a);
    return e.W(a);
  }, pf:function(a, b, c) {
    if (!c) {
      return !1;
    }
    var e = Math.max(a.x, b.x), f = Math.min(a.x, b.x), g = Math.max(a.y, b.y);
    a = Math.min(a.y, b.y);
    return c.x <= e && c.y <= g && c.x >= f && c.y >= a ? !0 : !1;
  }, vh:function(a, b) {
    var c = {}, e = a.u(), f = a.s, g = a.Tb, h = this.sf(a.bc, f, e, b), k = this.sf(g / 2, f, e, b), e = this.sf(g, f, e, b);
    c.startPoint = h;
    c.middlePoint = k;
    c.endPoint = e;
    return c;
  }, sf:function(a, b, c, e) {
    var f = b * Math.sin(a) + e;
    a = b * Math.cos(a) + e;
    return this.l().ga(c, a, f);
  }, Nk:function(a, b) {
    return this.l().Ra(a, b.u()) <= b.s;
  }, Ok:function(a, b) {
    var c = this.qh(b), e = this.rf(b), f = e.leftFocus, e = e.rightFocus, g = this.l();
    return g.Ra(a, f) + g.Ra(a, e) <= c;
  }, Mk:function(a, b) {
    var c = a.u(), e = c.x, c = c.y, f = this.qh(b), g = this.rf(b), h = g.leftFocus, g = g.rightFocus, h = this.l().Ra(h, g) / 2, h = Math.sqrt(f * f - h * h);
    return 1 > e * e / (f + circleRadius) * (f + circleRadius) + c * c / (h + circleRadius) * (h + circleRadius);
  }, qh:function(a) {
    var b = a.u(), c = a.width, e = a.height, f = c / 2, g = this.l(), f = g.ga(b, -f, 0);
    c < e && (f = g.ga(b, 0, e / 2));
    a = this.rf(a);
    return g.Ra(f, a.leftFocus) + g.Ra(f, a.rightFocus);
  }, rf:function(a) {
    var b = a.u(), c = a.width;
    a = a.height;
    var e = c / 2, f = a / 2, g = this.l(), f = Math.sqrt(e * e - f * f), e = g.ga(b, -f, 0), f = g.ga(b, f, 0);
    c < a && (e = a / 2, f = c / 2, f = Math.sqrt(e * e - f * f), e = g.ga(b, 0, f), f = g.ga(b, 0, -f));
    b = {};
    b.leftFocus = e;
    b.rightFocus = f;
    return b;
  }};
  c.Ha.Qj = {lo:function(a) {
    this.g("contextmenu", this.rk, this);
    this.ia = new c.ec(a);
    this.ia.ua(this);
    return this;
  }, rk:function(a) {
    var b = this.Cg(c.b.Gb(a, this.la));
    a = this.nc(b);
    b = {coordinate:b, pixel:a};
    this.ia.Kg = a;
    this.ia.sb.beforeopen && this.ia.Ae(b);
    return this;
  }, ta:function(a) {
    a || (a = this.rn);
    this.ia.Rp(a);
  }, Pb:function(a) {
    this.ia.tj(a);
    return this;
  }, kc:function() {
    this.ia.kc();
  }};
  c.Ha.Tj = {al:function(a) {
    a ? c.b.Yd(this.la, "mousedown mouseup mouseover mouseout mousemove click dblclick contextmenu keypress", this.wh) : c.b.Za(this.la, "mousedown mouseup mouseover mouseout mousemove click dblclick contextmenu keypress", this.wh, this);
  }, wh:function(a) {
    this.Jk(this, a, "keypress" === a.type && 13 === a.keyCode ? "click" : a.type);
  }, Jk:function(a, b, d) {
    var e = {Ue:b};
    "contextmenu" === d && c.b.preventDefault(b);
    a.oa(d, e, !0);
  }, Sl:function() {
    this.dragging.draggable.enable();
  }, Ql:function() {
    this.dragging.draggable.disable();
  }, Pb:function() {
    this.doubleClickZoom = !0;
  }, ta:function() {
    this.doubleClickZoom = !1;
  }};
  c.Ha.nk = {ta:function(a) {
    function b(a) {
      for (var b = 0, c = a.length;b < c;b++) {
        if (a[b] && a[b].Xb()) {
          var e = a[b].getAllGeometries();
          d(e);
        }
      }
    }
    function d(a) {
      if (a) {
        for (var b = 0, d = a.length;b < d;b++) {
          if (a[b].Xb()) {
            var e = a[b].eb();
            c.B.Od(e, k) && (a[b].ea() instanceof c.sa && c.i.TYPE_POINT === a[b].type ? (e = a[b].Xa({attributes:!1}), y.push(e)) : (e = a[b].Xa({attributes:!1}), x.push(e)));
          }
        }
      }
    }
    function e(a) {
      var b = p.wc(v.C({x:k.xmin, y:k.ymax}), l), c = p.wc(v.C({x:k.xmax, y:k.ymin}), l);
      a.Me("%s", "%s", "%s");
      for (var d = b.x < c.x, e = b.y < c.y, f = [], g = b.x;d ? g <= c.x : g >= c.x;d ? g++ : g--) {
        for (var h = b.y;e ? h <= c.y : h >= c.y;e ? h++ : h--) {
          f.push('"' + a.ao(h, g, l) + '"');
        }
      }
      A.tiles = f;
      return A;
    }
    function f(a) {
      var b = p.wc(v.C({x:k.xmin, y:k.ymax}), l), c = p.wc(v.C({x:k.xmax, y:k.ymin}), l);
      return {info:{tileSize:{height:p.tileSize.height, width:p.tileSize.width}, padding:{height:p.padding.height, width:p.padding.width}, zoomLevel:l, url:a.Me("%s", "%s", "%s"), nw:{x:b.x, y:b.y, ox:b.offsetLeft, oy:b.offsetTop}, se:{x:c.x, y:c.y, ox:c.offsetLeft, oy:c.offsetTop}}, Lm:t};
    }
    var g = a.success, h = a.error, k = a.extent, l = a.zoomLevel, m = a.geometries, n = a.resultType, q = a.ignoreBase, p = this.P();
    if (p) {
      var v = this.l();
      k || (k = this.eb());
      c.a.f(l) && (l = this.w);
      l < p.minZoomLevel ? l = p.minZoomLevel : l > p.maxZoomLevel && (l = p.maxZoomLevel);
      a = {projection:p.projection, res:p.resolutions[l], extent:k.Xa()};
      var r = {}, w = this.L;
      if (w) {
        var w = f(w), t = w.Lm;
        if (3E3 < t) {
          if (1E4 < t) {
            alert("\u622a\u56fe\u5927\u5c0f\u9884\u8ba1\u4f1a\u8d85\u8fc7150M\uff0c\u8bf7\u7f29\u5c0f\u622a\u56fe\u8303\u56f4\u540e\u518d\u7ee7\u7eed\u622a\u56fe");
            return;
          }
          if (!confirm("\u622a\u56fe\u6587\u4ef6\u5927\u5c0f\u9884\u8ba1\u4f1a\u8d85\u8fc750M\uff0c\u8bf7\u786e\u5b9a\u662f\u5426\u7ee7\u7eed\u622a\u56fe\uff1f")) {
            return;
          }
        }
        q || (r.base = w.info);
      }
      if (0 < this.Kc.length) {
        for (var u = [], z = this.Kc, q = 0, w = z.length;q < w;q++) {
          u.push(f(z[q]).info);
        }
        r.tilelayers = u;
      }
      if (0 < this.rc.length) {
        for (var A = [], u = this.rc, q = 0, w = u.length;q < w;q++) {
          A.push(e(u[q]));
        }
        r.dynlayers = A;
      }
      var x = [], y = [];
      m && 0 !== m.length ? d(m) : (0 < this.jc.length && b(this.jc), 0 < this.cc.length && b(this.cc));
      r.geos = x.concat(y);
      a.layers = r;
      m = c.host + "/snapservice/snap";
      a = "config=" + encodeURIComponent(JSON.stringify(a));
      (new c.a.Ga(m, 0, a, function(a) {
        a = c.a.ld(a);
        if (!a || !a.success) {
          h && h(a);
        } else {
          if (a.success) {
            var b = null, b = "picture" === n ? c.host + "/snapservice/snapshots/" + a.data : c.host + "/snapservice/snapshots/fetch.html?url=" + a.data;
            g(b);
          }
        }
      })).Vd();
    }
  }};
  c.Map = c.Map = c.U.extend({$:[c.V, c.Ha.Pan, c.Ha.Zoom, c.Ha.pk, c.Ha.Qj, c.Ha.Tj, c.Ha.nk, c.Ha.In], options:{enableMapSliding:!0, enableZoom:!0, enableInfoWindow:!0, zoomMode:"pointer"}, Ed:{Kn:"loadmap", ck:"lodconfigchanged", kk:"resize"}, exceptionDefs:{"en-US":{NO_BASE_TILE_LAYER:"Map has no baseTileLayer, pls specify a baseTileLayer by setBaseTileLayer method before loading.", INVALID_LODCONFIG:"LodConfig of Map is invalid.", INVALID_OPTION:"Invalid options provided.", INVALID_CENTER:"Invalid Center", 
  INVALID_LAYER_ID:"Invalid id for the layer", DUPLICATE_LAYER_ID:"the id of the layer is duplicate with another layer"}, "zh-CN":{NO_BASE_TILE_LAYER:"\u5730\u56fe\u6ca1\u6709\u8bbe\u7f6e\u57fa\u7840\u56fe\u5c42,\u8bf7\u5728\u8c03\u7528Map.Load\u4e4b\u524d\u8c03\u7528setBaseTileLayer\u8bbe\u5b9a\u57fa\u7840\u56fe\u5c42", INVALID_LODCONFIG:"LOD\u914d\u7f6e\u65e0\u6548.", INVALID_OPTION:"\u65e0\u6548\u7684option.", INVALID_CENTER:"\u65e0\u6548\u7684\u4e2d\u5fc3\u70b9", INVALID_LAYER_ID:"\u56fe\u5c42\u7684id\u65e0\u6548", 
  DUPLICATE_LAYER_ID:"\u91cd\u590d\u7684\u56fe\u5c42id"}}, o:function(a, b) {
    if (!b) {
      throw Error(this.ob.INVALID_OPTION);
    }
    if (!b.center) {
      throw Error(this.ob.INVALID_CENTER);
    }
    this.loaded = !1;
    this.Ia = a;
    c.a.fb(this.Ia) ? this.la = document.getElementById(this.Ia) : this.la = a;
    b = c.a.wj(this, b);
    this.N = null;
    this.A = {};
    this.L = null;
    this.Kc = [];
    this.cc = [];
    this.Rb = null;
    this.jc = [];
    this.rc = [];
    this.uf = [];
    this.w = b.zoomLevel;
    this.pa = b.maxZoomLevel;
    this.Ta = b.minZoomLevel;
    this.H = b.center;
    this.yd = !0;
    this.zm();
  }, Ln:function() {
    if (!this.loaded) {
      if (!this.L || !this.L.P) {
        throw Error(this.ob.NO_BASE_TILE_LAYER);
      }
      var a = this;
      this.uj(this.L.P(), function() {
        a.qk();
      });
      return this;
    }
  }, Kp:function() {
  }, wp:function() {
  }, Ub:function() {
    return c.a.f(this.width) || c.a.f(this.height) ? this.ag() : {width:this.width, height:this.height};
  }, eb:function() {
    if (!this.P()) {
      return null;
    }
    var a = this.l();
    if (!a) {
      return null;
    }
    var b = this.N.resolutions[this.w];
    if (c.a.f(b)) {
      return null;
    }
    var d = this.Ub(), e = d.width / 2, f = d.height / 2, g = this.Ba(), d = a.W({x:g.x - e * b, y:g.y + f * b}), a = a.W({x:g.x + e * b, y:g.y - f * b});
    return new c.B(d, a);
  }, u:function() {
    return this.N && this.loaded ? this.N.gb.W(this.wb) : this.H;
  }, Eg:function(a) {
    if (!this.N || !this.loaded) {
      return this.H = a, this;
    }
    a = this.l().C(a);
    var b = this.wi(a);
    this.Hc(a);
    this.ja(b);
    this.ub();
    return this;
  }, Cc:function(a) {
    1 < 2 * Math.random() && this.Xd();
    this.L && this.L.Cc();
    this.sc(function(b) {
      b && b.Cc(a);
    }, this.cc);
    this.fireEvent("moving");
  }, ub:function(a) {
    this.L && this.L.ub();
    this.Xd();
    this.sc(function(b) {
      b && b.ub(a);
    }, this.Kc, [this.Rb], this.rc);
    this.fireEvent("moveend");
  }, wi:function(a) {
    var b = this.Ba(), b = this.ge(b);
    a = this.ge(a);
    return {left:a.left - b.left, top:b.top - a.top};
  }, Xo:function() {
    return this.w;
  }, pn:function(a) {
    this.zoom(a);
    return this;
  }, Ie:function() {
    return this.pa;
  }, ln:function(a) {
    var b = this.P();
    a > b.maxZoomLevel && (a = b.maxZoomLevel);
    this.pa = a;
    return this;
  }, Je:function() {
    return this.Ta;
  }, mn:function(a) {
    var b = this.P();
    a < b.minZoomLevel && (a = b.minZoomLevel);
    this.Ta = a;
    return this;
  }, En:function() {
    this.zoom(this.w + 1);
    return this;
  }, Fn:function() {
    this.zoom(this.w - 1);
    return this;
  }, dn:function(a, b) {
    if (!this.N || !this.loaded) {
      return this.H = a, this.w = b, this;
    }
    this.w != b ? (this.Eg(a), this.zoom(b)) : this.Eg(a);
    return this;
  }, bm:function(a) {
    if (!(a || a instanceof c.B)) {
      return this.w;
    }
    if (a.xmin == a.xmax && a.ymin == a.ymax) {
      return this.pa;
    }
    try {
      for (var b = this.l().C({x:Math.abs(a.xmin - a.xmax), y:Math.abs(a.ymin - a.ymax)}), d = this.P().resolutions, e = a = -1, f = this.Ta, g = this.pa;f < g && !(b.x / d[f] >= this.width && -1 == a && (a = f), b.y / d[f] >= this.height && -1 == e && (e = f), -1 < a && -1 < e);f++) {
      }
      b = a < e ? a : e;
      -1 === b && (b = a < e ? e : a);
      return -1 === b ? this.pa : b - 2;
    } catch (h) {
      return this.w;
    }
  }, Eo:function() {
    return this.L;
  }, Dp:function(a) {
    if (a && a.P) {
      this.L && (this.ep(this.L), this.xg());
      a.Wa(this, -1);
      this.L = a;
      var b = this;
      this.L.bind(a.Ed.Wg, function() {
        b.xg();
      });
      this.uj(this.L.P(), function(a) {
        b.loaded && b.L.load();
        a && b.fireEvent(b.Ed.ck);
      });
      return this;
    }
  }, ea:function(a) {
    return a && this.Bc && this.Bc[a] ? this.Bc[a] : null;
  }, Vc:function(a) {
    if (!a) {
      return this;
    }
    if (!c.a.isArray(a)) {
      return this.Vc([a]);
    }
    this.Bc || (this.Bc = {});
    for (var b = 0, d = a.length;b < d;b++) {
      var e = a[b], f = e.Hb();
      if (c.a.f(f)) {
        throw Error(this.ob.INVALID_LAYER_ID + ":" + f);
      }
      if (this.Bc[f]) {
        throw Error(this.ob.DUPLICATE_LAYER_ID + ":" + f);
      }
      this.Bc[f] = e;
      e instanceof c.Tg ? (e.Wa(this, this.rc.length), this.rc.push(e), this.loaded && e.load()) : e instanceof c.pe ? (e.Wa(this, this.Kc.length), this.Kc.push(e), this.loaded && e.load()) : e instanceof c.sa ? (e.Wa(this, this.cc.length), this.cc.push(e), this.loaded && e.load()) : e instanceof c.Aa && (e.Wa(this, this.jc.length), this.jc.push(e), this.Rb ? this.zg() : (this.Rb = new c.Aa.Rg, this.Rb.Wa(this), this.loaded && this.Rb.load()));
    }
    return this;
  }, zg:function(a) {
    this.loaded && this.Rb && this.Rb.$d(a);
  }, yg:function(a) {
    a instanceof c.qd || (a = this.ea(a));
    if (!a) {
      return this;
    }
    var b = a.h();
    if (b && b == this) {
      return a instanceof c.sa ? this.yf(a, this.cc) : a instanceof c.Aa ? this.yf(a, this.jc) : a instanceof c.pe && this.yf(a, this.Kc), delete this.Bc[a.Hb()], this;
    }
  }, yf:function(a, b) {
    if (a && b) {
      var d = c.a.qj(a, b);
      if (-1 < d) {
        b.splice(d, 1);
        this.loaded && a.Ud();
        for (var d = 0, e = b.length;d < e;d++) {
          b[d].za && b[d].za(b[d].Ph + d);
        }
      }
    }
  }, co:function(a, b) {
    if (!b) {
      return this;
    }
    var c = this[a] = new b(this);
    this.uf.push(c);
    this.options[a] && c.enable();
    return this;
  }, Zn:function() {
    for (var a = 0, b = this.uf.length;a < b;a++) {
      this.uf[a].disable();
    }
  }, Yl:function() {
    var a = this.options.coordinateType;
    a || (a = "gcj02");
    return a;
  }, nc:function(a) {
    var b = this.l();
    if (!a || !b) {
      return null;
    }
    a = b.C(a);
    return this.O(a);
  }, Cg:function(a) {
    var b = this.l();
    if (!a || !b) {
      return null;
    }
    a = this.transform(a);
    return b.W(a);
  }, hd:function(a) {
    this.gd(a);
    this.Xd();
    this.L && this.L.hd();
    this.sc(function(a) {
      a && a.hd();
    }, this.Hd());
  }, fireEvent:function(a, b) {
    b || (b = {});
    b.target = this;
    this.oa(a, b);
  }, qk:function() {
    this.Te = this.w;
    this.Am();
    this.al();
    this.Hm();
    this.loaded = !0;
    this.uk();
  }, Hm:function() {
    this.L && this.L.load();
    this.sc(function(a) {
      a && a.load();
    }, this.Hd());
  }, Hd:function() {
    return [].concat(this.Kc).concat([this.Rb]).concat(this.cc).concat(this.rc);
  }, sc:function(a) {
    if (!(2 > arguments.length)) {
      for (var b = Array.prototype.slice.call(arguments, 1), c = [], e = 0, f = b.length;e < f;e++) {
        c = c.concat(b[e]);
      }
      b = 0;
      for (e = c.length;b < e;b++) {
        a.call(a, c[b]);
      }
    }
  }, qn:function() {
    this.A.hf.style.display = "";
    this.A.Mf.style.display = "";
  }, ym:function() {
    this.A.hf.style.display = "none";
    this.A.Mf.style.display = "none";
  }, P:function() {
    return this.N;
  }, l:function() {
    var a = this.P();
    return a ? a.gb : null;
  }, uj:function(a, b) {
    if (!a || !a.load) {
      throw Error(this.ob.INVALID_LODCONFIG);
    }
    if (this.N && this.N.Ee(a, this.w)) {
      b(!1);
    } else {
      this.N = a;
      this.Tf = this.N.origin.right >= this.N.origin.left ? 1 : -1;
      this.Uf = this.N.origin.top >= this.N.origin.bottom ? 1 : -1;
      var c = this;
      a.load(function() {
        c.rl();
        b(!0);
      });
    }
  }, rl:function() {
    if (!this.pa || this.pa > this.N.maxZoomLevel) {
      this.pa = this.N.maxZoomLevel;
    }
    if (!this.Ta || this.Ta < this.N.minZoomLevel) {
      this.Ta = this.N.minZoomLevel;
    }
    this.pa < this.Ta && (this.pa = this.Ta);
    if (!this.w || this.w > this.pa) {
      this.w = this.pa;
    }
    this.w < this.Ta && (this.w = this.Ta);
    this.H = this.u();
    this.wb = this.N.gb.C(this.H);
  }, ag:function() {
    if (!this.la) {
      return null;
    }
    var a = this.la;
    return {width:parseInt(a.offsetWidth, 0), height:parseInt(a.offsetHeight, 0)};
  }, vj:function(a) {
    a && (this.width = a.width, this.height = a.height, a = this.A, a.Pi.style.width = this.width + "px", a.Pi.style.height = this.height + "px", a.ed.style.width = this.width + "px", a.ed.style.height = this.height + "px", a.Of.style.width = this.width + "px", a.Of.style.height = this.height + "px");
  }, Ba:function() {
    return this.wb;
  }, Hc:function(a) {
    this.wb = a;
  }, xg:function() {
    this.Qb && (this.Qb.innerHTML = "", c.b.ma(this.Qb), delete this.Qb);
  }, gd:function(a) {
    a = this.transform({left:this.width / 2 + a.left, top:this.height / 2 + a.top});
    this.Hc(a);
  }, ja:function(a) {
    if (a) {
      var b = c.b.Sd(this.A.dd);
      c.b.Sd(this.A.dd, {left:b.left + a.left, top:b.top + a.top});
    } else {
      return c.b.Sd(this.A.dd);
    }
  }, transform:function(a) {
    var b = this.N.resolutions[this.w], d = this.Ba();
    return new c.J(d.x + this.Tf * (a.left - this.width / 2) * b, d.y + this.Uf * (this.height / 2 - a.top) * b);
  }, od:function(a) {
    return this.transform(this.Rf(a));
  }, ge:function(a) {
    var b = this.N.resolutions[this.w], c = this.Ba();
    return {top:Math.round(this.height / 2 + this.Uf * (c.y - a.y) / b), left:Math.round(this.width / 2 + this.Tf * (a.x - c.x) / b)};
  }, O:function(a) {
    a = this.ge(a);
    return this.Dg(a);
  }, Dg:function(a) {
    if (!a) {
      return null;
    }
    var b = this.ja();
    return {left:a.left - b.left, top:a.top - b.top};
  }, Rf:function(a) {
    if (!a) {
      return null;
    }
    var b = this.ja();
    return {left:a.left + b.left, top:a.top + b.top};
  }, ul:function(a, b, d) {
    var e = this.P();
    if (!e) {
      return null;
    }
    var f = e.gb, e = e.resolutions[this.w];
    b = f.W({x:a.x - b.left * e, y:a.y + b.top * e});
    a = f.W({x:a.x + d.left * e, y:a.y - d.top * e});
    return new c.B(b, a);
  }, Pa:function(a, b) {
    var c = this.P();
    if (!c) {
      return null;
    }
    var e = c.gb;
    if (!e) {
      return null;
    }
    var f = this.u(), g = e.ga(f, a, b), h = this.w, k = c.resolutions, c = a ? (e.C({x:g.x, y:f.y}).x - e.C(f).x) / k[h] : 0, e = b ? (e.C({x:g.x, y:f.y}).y - e.C(g).y) / k[h] : 0;
    return {px:Math.round(Math.abs(c)), py:Math.round(Math.abs(e))};
  }, md:function(a, b) {
    var c = this.P();
    if (!c) {
      return null;
    }
    var e = c.gb;
    if (!e) {
      return null;
    }
    var f = this.u(), g = this.Ba(), c = c.resolutions[this.w], g = e.W({x:g.x + a * c, y:g.y + b * c});
    return e.Ra(g, f);
  }, ei:function() {
    if (!this.Mc) {
      var a = this.A.hf;
      this.Mc = c.j.Qf();
      this.Xd();
      a.appendChild(this.Mc);
    }
  }, Xd:function() {
    var a = this.Mc;
    a && c.j.wg(this, a);
  }, zm:function() {
    var a;
    if (c.a.fb(this.Ia)) {
      if (a = document.getElementById(this.Ia), !a) {
        throw Error("invalid container id: '" + this.Ia + "'");
      }
    } else {
      if (!this.Ia || !this.Ia.appendChild) {
        throw Error("invalid container element");
      }
      a = this.Ia;
    }
    this.la = a;
    a.innerHTML = "";
    var b = c.b.M("div"), d = c.b.M("div");
    d.style.cssText = "z-index:3002";
    b.appendChild(d);
    d = c.b.M("div");
    d.style.cssText = "position:absolute;overflow:hidden;";
    d.className = "MAP_TILE_BACK";
    a.appendChild(d);
    a = c.b.M("div");
    a.id = "_mapPlatform";
    a.style.cssText = "position:absolute;top:0px;left:0px;";
    d.appendChild(a);
    d.appendChild(b);
    var e = c.b.M("div");
    e.id = "_mapViewPort";
    e.style.cssText = "position:absolute;top:0px;left:0px;z-index:10;-moz-user-select:none;-webkit-user-select: none;";
    a.appendChild(e);
    var f = c.b.M("div");
    f.style.cssText = "position:absolute;top:0px;left:0px;";
    f.style.border = "none";
    var g = f.cloneNode(!1), h = f.cloneNode(!1), k = f.cloneNode(!1), l = f.cloneNode(!1), m = f.cloneNode(!1);
    f.style.zIndex = 10;
    f.id = "mapContainer";
    m.style.zIndex = 100;
    l.style.zIndex = 200;
    h.style.zIndex = 3E3;
    k.style.zIndex = 3E3;
    g.style.zIndex = 3001;
    e.appendChild(f);
    k.appendChild(g);
    k.appendChild(h);
    a.appendChild(k);
    e.appendChild(m);
    e.appendChild(l);
    c.D.Kd && (e.onselectstart = function() {
      return !1;
    }, e.ondragstart = function() {
      return !1;
    }, e.setAttribute("unselectable", "on"), f.onselectstart = function() {
      return !1;
    }, f.ondragstart = function() {
      return !1;
    }, f.setAttribute("unselectable", "on"), b.onselectstart = function() {
      return !1;
    }, b.ondragstart = function() {
      return !1;
    }, b.setAttribute("unselectable", "on"), d.setAttribute("unselectable", "on"), a.setAttribute("unselectable", "on"));
    k = this.A;
    k.Of = b;
    k.Pi = d;
    k.ed = e;
    k.dd = a;
    k.Qd = f;
    k.ee = g;
    k.vg = h;
    k.hf = l;
    k.Mf = m;
    this.ja({left:0, top:0});
    this.vj(this.ag());
  }, No:function() {
    return this.A.ed;
  }, Am:function() {
    var a = this;
    a.aq = setInterval(function() {
      var b = a.ag();
      if (a.width !== b.width || a.height !== b.height) {
        var c = a.height, e = a.width;
        a.vj(b);
        a.hd({left:(b.width - e) / 2, top:(b.height - c) / 2});
        a.oa(a.Ed.kk, {target:a});
      }
    }, 800);
  }});
  c.Map.prototype.uk = function() {
    for (var a = c.Map.prototype, b = 0, d = a.we.length;b < d;b++) {
      a.we[b].call(this);
    }
  };
  c.Map.Ef = function(a) {
    var b = Array.prototype.slice.call(arguments, 1);
    this.prototype.we = this.prototype.we || [];
    this.prototype.we.push("function" === typeof a ? a : function() {
      this[a].apply(this, b);
    });
  };
  c.Map.Hi({oo:function(a) {
    c.a.fb(a) && 0 !== a.length && (window.carto ? this.Mi(a) : c.Im(function() {
      this.Mi(a);
    }, this));
  }, Mi:function(a) {
    -1 !== a.indexOf(".mss", a.length - 4) ? c.a.Ga.ta(a, function(a) {
      this.lj(a);
    }, this) : this.lj(a);
  }, lj:function(a) {
    this.Sh = (new window.carto.RendererJS).render(a);
    this.fireEvent("cartocssloaded");
  }, pl:function(a) {
    if (!this.Sh || !a || !a.ea()) {
      return null;
    }
    var b = a.ea().Hb();
    return b ? this.Sh.findLayer({name:"#" + b}).getStyle(a.ig(), {zoom:this.w}) : null;
  }});
  c.Map.Yb({enableCartoCSS:!0});
  c.Map.Yb({dragging:!0});
  c.Map.lf = c.dc.extend({wd:function() {
    if (!this.draggable) {
      var a = this.map;
      if (!a) {
        return;
      }
      this.Sb = a.la;
      c.D.Ri || (this.draggable = new c.dc.lf(this.Sb));
      this.draggable.g("dragstart", this.Qk, this);
      this.draggable.g("dragging", this.Rk, this);
      this.draggable.g("dragend", this.Pk, this);
    }
    this.draggable.enable();
  }, Zd:function() {
    this.draggable.disable();
  }, Qk:function(a) {
    this.map.yd = !1;
    var b = this.map;
    this.vn = (new Date).getTime();
    var c = this.map.ja();
    this.Bj = c.left;
    this.Cj = c.top;
    this.Qm = a.mousePos.left;
    this.Rm = a.mousePos.top;
    this.wn = this.Qm;
    this.xn = this.Rm;
    b.fireEvent("movestart");
  }, Rk:function(a) {
    var b = this.map, c = this.Bj + a.mousePos.left - this.wn;
    a = this.Cj + a.mousePos.top - this.xn;
    var e = this.map.ja();
    this.map.ja({left:c - e.left, top:a - e.top});
    b.gd({left:-(c - e.left), top:-(a - e.top)});
    this.map.Cc({target:b});
    b.fireEvent("moving");
  }, Pk:function() {
    this.map.yd = !0;
    var a = this.map, b = (new Date).getTime() - this.vn, c = this.map.ja(), e = c.left - this.Bj, c = c.top - this.Cj;
    280 > b && 5 < Math.abs(c) && 5 < Math.abs(e) ? a.Oh({top:c * Math.ceil(500 / b), left:e * Math.ceil(500 / b)}) : a.ub({target:a});
    a.fireEvent("moveend");
  }});
  c.Map.xd("addHandler", "dragging", c.Map.lf);
  c.Map.Yb({doubleClickZoom:!0});
  c.Map.Uj = c.dc.extend({wd:function() {
    this.map.g("dblclick", this.zh, this);
  }, Zd:function() {
    this.map.I("dblclick", this.zh, this);
  }, zh:function(a) {
    if (this.map.doubleClickZoom) {
      var b = this.map.w;
      this.map.zoom(a.Ue.shiftKey ? Math.ceil(b) - 1 : Math.floor(b) + 1, c.b.Gb(a, this.map.la));
    }
  }});
  c.Map.xd("addHandler", "doubleClickZoom", c.Map.Uj);
  c.Map.Yb({scrollWheelZoom:!0, wheelDebounceTime:40});
  c.Map.mk = c.dc.extend({wd:function() {
    c.b.Za(this.map.la, "mousewheel", this.Ah, this);
  }, Zd:function() {
    c.b.Yd(this.map.la, "mousewheel", this.Ah);
  }, Ah:function(a) {
    var b = this.map, d = b.la;
    if (!b.Kj) {
      var e = 0, e = e + (0 < (a.wheelDelta ? a.wheelDelta : a.detail) ? 1 : -1);
      a.detail && (e *= -1);
      var f = c.b.Gb(a, d);
      this.Hj && clearTimeout(this.Hj);
      this.Hj = setTimeout(function() {
        b.zoom(b.w + e, f);
      }, 40);
      return !1;
    }
  }});
  c.Map.xd("addHandler", "scrollWheelZoom", c.Map.mk);
  c.Map.Yb({eventToGeometry:!0, mouseoverTarget:[]});
  c.Map.Zj = c.dc.extend({wd:function() {
    this.map.g("mousedown mouseup mousemove click dblclick contextmenu", this.Eh, this).g("moving", this.dl, this).g("moveend", this.cl, this);
  }, Zd:function() {
    this.map.I("mousedown mouseup mousemove click dblclick contextmenu", this.Eh, this);
  }, dl:function() {
    this.Zd();
  }, cl:function() {
    this.wd();
  }, Eh:function(a) {
    var b = a.originalEvent.type, d = this.map.Cg(c.b.Gb(a, this.map.la)), e = this.map.md(10, 0), f = [], f = f.concat(this.map.jc);
    this.options = {coordinate:d, radius:e, layers:f, success:c.a.bind(function(d) {
      if (!d.success) {
        return !1;
      }
      d = d.data;
      if ("mousemove" === b) {
        var e = g.map.options.mouseoverTarget;
        if (c.a.aa(e)) {
          for (var f = 0, m = e.length;f < m;f++) {
            var n = e[f];
            if (d && 0 < d.length) {
              for (var q = !0, p = 0, v = d.length;p < v;p++) {
                var r = d[p];
                if (n === r) {
                  q = !1;
                  break;
                }
              }
              q && n.qg(a);
            } else {
              n.qg(a);
            }
          }
        }
        if (d) {
          f = 0;
          for (m = d.length;f < m;f++) {
            r = d[f], r.Zi(a);
          }
          g.map.options.mouseoverTarget = d;
        }
      } else {
        if (d) {
          for (f = 0, m = d.length;f < m;f++) {
            r = d[f], r.Wi(a);
          }
        }
      }
    }, this)};
    if ("mousemove" === b) {
      this.Gi && clearTimeout(this.Gi);
      var g = this;
      this.Gi = setTimeout(function() {
        g.map.lg(g.options);
      }, 15);
    } else {
      this.map.lg(this.options);
    }
  }});
  c.Map.xd("addHandler", "eventToGeometry", c.Map.Zj);
  c.InfoWindow = c.le = c.U.extend({exceptionDefs:{"en-US":{MUST_PROVIDE_OBJECT:"You must provide object which infowindow add to."}, "zh-CN":{MUST_PROVIDE_OBJECT:"\u5fc5\u987b\u63d0\u4f9b\u6dfb\u52a0\u4fe1\u606f\u6846\u7684\u5bf9\u8c61\u3002"}}, yb:{template:'<div class="MAP_CONTROL_api MAP_CONTROL_msg" style="z-index:10;cursor:default;display:none;padding:0 0 35px 15px;"><div style="width:345px; height:auto !important;height:150px;min-height:150px; border:1px solid #999; background:#fff;"><div style="font-size:14px; height:30px; line-height:30px; background:#f9f9f9; border-bottom:1px solid #ccc; font-weight:bold; padding-left:15px;"><span style="display:block; float:left;"></span><div style="position:relative;float:right;height:30px;width:20px;padding-top:10px;line-height: 0px;"><a href="javascript:void(0)" class="MAP_CONTROL_close" onclick="this.parentNode.parentNode.parentNode.parentNode.m.hide()"><img width="10px" height="10px" src="' + 
  c.host + '/engine/images/tip_close.gif" style="border:none;"/></a></div></div><div style="padding:10px; line-height:20px; color:#444"></div></div><div class="MAP_CONTROL_api MAP_CONTROL_jiantou"></div></div>'}, o:function(a) {
    a && this.be(a);
    return this;
  }, ua:function(a) {
    var b;
    a instanceof c.Map ? b = a : b = a.h();
    if (!b) {
      throw Error(this.ob.ONLY_MAP_OR_GEOMETRY_CAN_ADD_MENU);
    }
    this.target = a;
    this.qe(b);
    return this;
  }, Ae:function(a) {
    var b = this.Lc.beforeopen;
    b && (2 == b.length ? b(a, c.a.bind(this.show, this)) : (b(a), this.show()));
    return this;
  }, qe:function(a) {
    if (this.map = a) {
      this.map.A.ee.innerHTML = c.le.template, this.fe = this.map.A.ee.childNodes[0], this.fe.m = this, this.fd = this.fe.childNodes[0].childNodes[1], this.fd.Df || (this.xf(), c.b.Za(this.fd, "mousedown", this.stopPropagation), c.b.Za(this.fd, "dblclick", this.stopPropagation), this.map.g("zoomstart", this.vb, this), this.map.g("zoomend", this.Ea, this), this.fd.Df = !0);
    }
  }, xf:function() {
    c.b.Yd(this.fd, "mousedown", this.stopPropagation);
    c.b.Yd(this.fd, "dblclick", this.stopPropagation);
    this.map.I("zoomstart", this.vb, this);
    this.map.I("zoomend", this.Ea, this);
  }, stopPropagation:function(a) {
    c.b.stopPropagation(a);
  }, vb:function() {
    this.map.A.ee.style.display = "none";
  }, Ea:function() {
    this.visible && (this.map.A.ee.style.display = "", this.Ui());
  }, be:function(a) {
    a && (this.Lc ? (this.Lc.title = a.title, this.Lc.content = a.content, a.beforeopen && (this.Lc.beforeopen = a.beforeopen)) : this.Lc = a);
  }, F:function() {
    this.visible = !1;
    this.fe.style.display = "none";
  }, Ki:function() {
    return this.visible;
  }, show:function(a) {
    if (this.map && this.map.options.enableInfoWindow) {
      this.F();
      this.visible = !0;
      var b = this.map, c = this.fe;
      c.style.display = "";
      this.map.A.ee.style.display = "";
      var e = this.Lc;
      e.width && (c.childNodes[0].style.width = e.width + "px");
      var f = c.childNodes[0].childNodes[0].childNodes[0], g = c.childNodes[0].childNodes[1];
      e.title ? (f.style.display = "", f.innerHTML = e.title) : f.style.display = "none";
      e.content && (g.innerHTML = e.content);
      f = this.Ui(a);
      e = this.map.Ub();
      a = e.width;
      e = e.height;
      if (0 !== a && 0 !== e) {
        var f = b.Rf(f), h = g = 0;
        0 > f.left ? g = -(f.left - parseInt(c.clientWidth) / 2) : f.left + parseInt(c.clientWidth) - 35 > a && (g = a - (f.left + 3 * parseInt(c.clientWidth) / 2));
        0 > f.top ? h = -f.top + 10 : f.top > e && (h = e - f.top - parseInt(c.clientHeight) - 30);
        0 === h && 0 === g || b.Oh({left:g, top:h});
        return this;
      }
    }
  }, Ui:function(a) {
    var b = this.tf(a);
    a = this.fe;
    b = {top:parseInt(b.top - parseInt(a.clientHeight)), left:parseInt(b.left - parseInt(a.clientWidth) / 2 + 38)};
    a.style.top = b.top + "px";
    a.style.left = b.left + "px";
    return b;
  }, tf:function(a) {
    var b;
    a || (a = this.Kg);
    if (a) {
      a instanceof c.Coordinate ? b = this.nc(a) : b = a;
    } else {
      a = this.target.u();
      b = this.map.l();
      if (!a || !b) {
        return null;
      }
      a = b.C(a);
      a = this.map.O(a);
      b = {left:a.left, top:a.top};
    }
    return b;
  }});
  c.Menu = c.ec = c.U.extend({exceptionDefs:{"en-US":{ONLY_MAP_OR_GEOMETRY_CAN_ADD_MENU:"The menu only can add to  map or geometry."}, "zh-CN":{ONLY_MAP_OR_GEOMETRY_CAN_ADD_MENU:"\u53ea\u6709Map\u6216Geometry\u5bf9\u8c61\u624d\u80fd\u6dfb\u52a0\u83dc\u5355\u3002"}}, yb:{template:'<div style="position:absolute;cursor:pointer;display:none;width:130px; background:#F0F0F0; color:#3C7796; border:solid 1px #CCCCCC; "><ul style="list-style:none; padding:0px; margin:0px;"></ul></div>', cssMenuItem:"padding:0; display:block; margin:1px; height:24px; line-height:24px;color:#3C7796; font-size:12px; padding:0px 0px 0px 21px;", 
  cssMenuItem_over:"border:solid 1px #CCCCCC; padding:0; display:block; margin:1px; height:22px; line-height:22px; color:#3C7796; font-size:12px; padding:0px 0px 0px 20px;"}, o:function(a) {
    a && this.be(a);
    return this;
  }, ua:function(a) {
    var b;
    a instanceof c.Map ? b = a : b = a.h();
    if (!b) {
      throw Error(this.ob.ONLY_MAP_OR_GEOMETRY_CAN_ADD_MENU);
    }
    this.target = a;
    this.qe(b);
    return b;
  }, Ae:function(a) {
    var b = this.sb.beforeopen;
    b && (2 == b.length ? b(a, c.a.bind(this.show, this)) : (b(a), this.show()));
    return this;
  }, qe:function(a) {
    this.map = a;
    this.map.A.vg.innerHTML = c.Menu.template;
    this.Rd = this.map.A.vg.firstChild;
    this.Rd.Df || (this.kc(), this.xf(a), a.g("zoomstart", this.F, this), a.g("zoomend", this.F, this), a.g("movestart", this.F, this), a.g("dblclick", this.F, this), a.g("click", this.F, this), this.Rd.Df = !0);
  }, xf:function(a) {
    a.I("zoomstart", this.F);
    a.I("zoomend", this.F);
    a.I("movestart", this.F);
    a.I("dblclick", this.F);
    a.I("click", this.F);
  }, be:function(a) {
    a && (a.width || (a.width = 240), this.sb ? (this.sb.width = a.width, this.sb.items = a.items, a.beforeopen && (this.sb.beforeopen = a.beforeopen)) : this.sb = a);
  }, tj:function(a) {
    if (a) {
      return this.sb.items = a, this;
    }
  }, jm:function() {
    return this.sb;
  }, kc:function() {
    this.ia && this.ia.F();
    return this;
  }, vp:function() {
    delete this.sb;
    this.ia && this.ia.F();
    return this;
  }, F:function() {
    this.Ki() && (this.Rd.style.display = "none", this.zc && this.zc("closemenu") && this.oi("closemenu", {target:this}));
  }, Ki:function() {
    return "none" != this.Rd.style.display;
  }, show:function(a) {
    var b = this.sb;
    a = this.tf(a);
    if (!c.a.f(a) && !c.a.f(b)) {
      this.Ek();
      this.F();
      var d = this, e = d.Rd;
      e.style.width = b.width + "px";
      var f = e.firstChild;
      f.innerHTML = "";
      for (var b = b.items, g = 0, h = b.length;g < h;g++) {
        var k = b[g], l = c.b.M("li");
        l.style.cssText = c.ec.cssMenuItem;
        c.b.ma(l, "mouseover", function() {
          this.style.cssText = c.ec.cssMenuItem_over;
        });
        c.b.ma(l, "mouseout", function() {
          this.style.cssText = c.ec.cssMenuItem;
        });
        l.callback = k.callback;
        l.index = g;
        c.b.ma(l, "click", function(a) {
          c.b.stopPropagation(a);
          a = this.callback({target:d, index:this.index});
          (c.a.f(a) || a) && d.F();
        });
        c.b.ma(l, "mousedown", function(a) {
          c.b.stopPropagation(a);
          return !1;
        });
        c.b.ma(l, "mouseup", function(a) {
          c.b.stopPropagation(a);
          return !1;
        });
        c.b.ma(l, "dblclick", function(a) {
          c.b.stopPropagation(a);
          return !1;
        });
        l.innerHTML = k.item;
        f.appendChild(l);
      }
      e.style.top = a.top + "px";
      e.style.left = a.left + "px";
      e.style.display = "";
      d.zc && d.zc("openmenu") && d.oa("openmenu", {target:d});
      return this;
    }
  }, Ek:function() {
    c.b.ma(this.map.A.vg.firstChild);
    this.qe(this.map);
  }, tf:function(a) {
    var b;
    a || (a = this.Kg);
    if (a) {
      a instanceof c.J ? b = this.nc(a) : b = a;
    } else {
      a = this.target.u();
      b = this.map.l();
      if (!a || !b) {
        return null;
      }
      a = b.C(a);
      a = this.map.O(a);
      b = {left:a.left, top:a.top};
    }
    return b;
  }});
  c.Control = c.ka = c.U.extend({exceptionDefs:{"en-US":{NEED_ID:"You must set id to Control."}, "zh-CN":{NEED_ID:"\u4f60\u5fc5\u987b\u4e3aControl\u8bbe\u7f6eid\u3002"}}, yb:{top_left:{top:"40", left:"60"}, top_right:{top:"40", right:"60"}, bottom_left:{bottom:"20", left:"60"}, bottom_right:{bottom:"20", right:"60"}, controls:{}, getControl:function(a) {
    var b = c.ka.controls, d;
    for (d in b) {
      if (d == a) {
        return b[d];
      }
    }
  }}, options:{position:this.top_left}, o:function(a) {
    this.be(a);
    return this;
  }, ua:function(a) {
    var b = this.options.id;
    if (!b) {
      throw Error(this.ob.NEED_ID);
    }
    this.remove();
    this.G = a;
    this.Fk = a.A.Of;
    this.lb = c.b.M("div");
    c.b.ba(this.lb, "z-index: 3003");
    if (a = this.Kf(a)) {
      this.Ih(), this.lb.appendChild(a), this.Fk.appendChild(this.lb);
    }
    c.ka.controls[b] = this;
    return this;
  }, Ih:function() {
    var a = this.options.position;
    a && c.b.ba(this.lb, "position:absolute");
    a.top && c.b.ba(this.lb, "top: " + a.top + "px");
    a.right && c.b.ba(this.lb, "right: " + a.right + "px");
    a.bottom && c.b.ba(this.lb, "bottom: " + a.bottom + "px");
    a.left && c.b.ba(this.lb, "left:" + a.left + "px");
  }, be:function(a) {
    a && (this.options = a);
    return this;
  }, jm:function() {
    return this.options;
  }, Po:function() {
    return this.options.position;
  }, setPosition:function(a) {
    var b = this.G;
    b && b.removeControl(this);
    this.options.position = a;
    b && b.addControl(this);
    this.Ih();
    return this;
  }, Fo:function() {
    return this.lb;
  }, remove:function() {
    if (!this.G) {
      return this;
    }
    c.b.ma(this.lb);
    this.Ud && this.Ud(this.G);
    this.G = null;
    return this;
  }, Yn:function() {
  }, $n:function(a, b, d) {
    if (a) {
      var e = a.ea(b);
      e || (e = d ? new c.Aa(b) : new c.sa(b), a.Vc(e));
      return e;
    }
  }});
  c.Map.Hi({addControl:function(a) {
    a.ua(this);
    return this;
  }, removeControl:function(a) {
    a.remove();
    return this;
  }});
  c.Control.Zoom = c.ka.Zoom = c.ka.extend({options:{id:"CONTROL_ZOOM", position:c.ka.top_right}, Kf:function(a) {
    this.Uc = c.b.cb("div", "display:inline-block;_zoom:1;*display:inline;");
    this.Kh = this.fc("\u653e\u5927", "control_zoom_button control_zoom_in", this.fl);
    this.Hk();
    this.Mh = this.fc("\u7f29\u5c0f", "control_zoom_button control_zoom_out", this.gl);
    this.Nh = this.Gk();
    this.vd();
    a.g("zoomend zoomlevelschange", this.vd, this);
    return this.Uc;
  }, Ud:function(a) {
    a.I("zoomend zoomlevelschange", this.vd, this);
  }, disable:function() {
    this.ue = !0;
    this.vd();
    return this;
  }, enable:function() {
    this.ue = !1;
    this.vd();
    return this;
  }, fl:function() {
    this.ue || (this.G.En(), this.Bf());
  }, gl:function() {
    this.ue || (this.G.Fn(), this.Bf());
  }, fc:function(a, b, d) {
    var e = c.b.cb("a", "", this.Uc);
    c.b.Ab(e, b);
    e.title = a;
    e.href = "#";
    c.b.g(e, "mousedown mousemove dblclick contextmenu", c.b.stopPropagation).g(e, "mouseover", this.Af, this).g(e, "mouseout", this.vf, this).g(e, "click", c.b.stop).g(e, "click", d, this);
    return e;
  }, Hk:function() {
    var a = c.b.cb("div", "", this.Uc);
    c.b.Ab(a, "control_zoomlevel_bg");
    this.Lh = c.b.cb("div", "", a);
    c.b.Ab(this.Lh, "control_zoomlevel_num");
    this.Jh();
    c.b.g(a, "mousedown mousemove click, dblclick contextmenu", c.b.stopPropagation).g(a, "mouseover", this.Af, this).g(a, "mouseout", this.vf, this);
    return a;
  }, Jh:function() {
    this.Lh.innerHTML = this.G.w;
  }, Gk:function() {
    var a = c.b.cb("div", "display: none");
    c.b.Ab(a, "control_zoomdrop");
    var b = c.b.cb("div", "", a), b = c.b.cb("div", "", b);
    c.b.Ab(b, "control_zoombar");
    var d = c.b.cb("div", "", b);
    c.b.Ab(d, "control_zoombar_background");
    this.Cf = c.b.cb("div", "", b);
    c.b.Ab(this.Cf, "control_zoom_slider");
    c.b.g(a, "mousemove dblclick contextmenu", c.b.stopPropagation).g(a, "mouseover", this.Af, this).g(a, "mouseout", this.vf, this).g(a, "click", c.b.stop).g(a, "click", this.bl, this).g(a, "mousedown", c.b.stop);
    this.options.position.bottom && 0 < this.options.position.bottom ? this.Uc.insertBefore(a, this.Uc.firstChild) : this.Uc.appendChild(a);
    return a;
  }, bl:function(a) {
    a = a.offsetY;
    7.2 >= a && (a = 0);
    a = this.G.pa - Math.round(a / 7.2);
    c.b.ba(this.Cf, "top: " + 7.2 * (this.G.pa - a) + "px");
    this.G.pn(a);
  }, Af:function() {
    c.b.ba(this.Nh, "display: block");
  }, vf:function() {
    c.b.ba(this.Nh, "display: none");
  }, vd:function() {
    this.ue ? (c.b.ba(this.Kh, "display: none"), c.b.ba(this.Mh, "display: none")) : (c.b.ba(this.Kh, "display: display:inline-block;_zoom:1;*display:inline;"), c.b.ba(this.Mh, "display: display:inline-block;_zoom:1;*display:inline;"));
    this.Bf();
  }, Bf:function() {
    this.Jh();
    c.b.ba(this.Cf, "top: " + 7.2 * (this.G.pa - this.G.w) + "px");
  }});
  c.Map.Yb({zoomControl:!0, zoomControlOptions:{id:"MAP_CONTROL_ZOOM", position:c.ka.top_right}});
  c.Map.Ef(function() {
    if (this.options.zoomControl) {
      var a = this.options.zoomControlOptions;
      a.id || (a.id = "MAP_CONTROL_ZOOM");
      a.position || (a.position = c.ka.top_right);
      this.Ij = new c.ka.Zoom(a);
      this.addControl(this.Ij);
      this.Ij.enable();
    }
  });
  c.Control.Attribution = c.ka.Pg = c.ka.extend({options:{id:"CONTROL_ATTRIBUTION", position:{bottom:"0", right:"0"}, content:'<a href="www.gis.com" target="_blank" style="text-decoration:none;cursor: pointer;color: #6490C4; ">@ X-GIS</a>'}, yb:{control_attribution_bg:"display: inline-block; background-color: #FAF7F5; opacity: 0.8;"}, Kf:function() {
    this.re = c.b.M("div");
    c.b.ba(this.re, c.ka.Pg.control_attribution_bg);
    c.b.g(this.re, "mousedown mousemove dblclick contextmenu", c.b.stopPropagation);
    this.ye();
    return this.re;
  }, Fp:function(a) {
    this.options.content = a;
    this.ye();
    return this;
  }, ye:function() {
    this.G && (this.re.innerHTML = this.options.content);
  }});
  c.Map.Yb({attributionControl:!0, attributionControlOptions:{id:"MAP_CONTROL_ATTRIBUTION", position:{bottom:"0", right:"0"}}});
  c.Map.Ef(function() {
    if (this.options.attributionControl) {
      var a = this.options.attributionControlOptions;
      a.id || (a.id = "MAP_CONTROL_ATTRIBUTION");
      a.position || (a.position = {bottom:"0", right:"0"});
      this.nl = new c.ka.Pg(a);
      this.addControl(this.nl);
    }
  });
  c.Control.Nav = c.ka.ik = c.ka.extend({options:{id:"CONTROL_NAV", position:c.ka.bottom_right}, Kf:function(a) {
    this.G = a;
    this.ve = c.b.M("div");
    this.fc("control_nav_button control_nav_left", this.Xk);
    this.fc("control_nav_button control_nav_up", this.Zk);
    this.fc("control_nav_button control_nav_right", this.Yk);
    this.fc("control_nav_button control_nav_down", this.Wk);
    this.Tc = c.b.cb("div", "", this.ve);
    c.b.Ab(this.Tc, "control_nav_bar control_nav_bg");
    c.b.g(this.ve, "mouseup", this.Gh, this);
    return this.ve;
  }, fc:function(a, b) {
    var d = c.b.cb("div", "", this.ve);
    c.b.Ab(d, a);
    c.b.g(d, "mousedown mousemove click dblclick contextmenu", c.b.stopPropagation).g(d, "mousedown", b, this);
    return d;
  }, Xk:function() {
    c.b.ba(this.Tc, "background-position:  -52px 0!important");
    this.xe("left", 1);
  }, Zk:function() {
    c.b.ba(this.Tc, "background-position: -104px 0!important");
    this.xe("top", 1);
  }, Yk:function() {
    c.b.ba(this.Tc, "background-position: -156px 0!important");
    this.xe("left", -1);
  }, Wk:function() {
    c.b.ba(this.Tc, "background-position: -208px 0!important");
    this.xe("top", -1);
  }, Gh:function() {
    this.Vk && clearInterval(this.Vk);
  }, xe:function(a, b) {
    var c = this;
    c.Fh = b;
    c.rh = a;
    this.Uk = setInterval(function() {
      "left" === c.rh ? c.G.tg({left:c.Fh, top:0}) : "top" === c.rh && c.G.tg({left:0, top:c.Fh});
    }, 10);
  }, Gh:function() {
    c.b.ba(this.Tc, "background-position:");
    clearInterval(this.Uk);
  }});
  c.Map.Yb({navControl:!0, navControlOptions:{id:"MAP_CONTROL_NAV", position:c.ka.bottom_right}});
  c.Map.Ef(function() {
    if (this.options.navControl) {
      var a = this.options.navControlOptions;
      a.id || (a.id = "MAP_CONTROL_NAV");
      a.position || (a.position = c.ka.bottom_right);
      this.Km = new c.ka.ik(a);
      this.addControl(this.Km);
    }
  });
  c.GeoUtils = c.Oc = {yh:function(a, b, d) {
    if (!a || !b) {
      return -1;
    }
    d = c.a.f(d) ? 0 : Math.abs(d);
    var e = b.xi(), e = c.B.expand(e, d);
    if (!this.Qe(a, e)) {
      return -1;
    }
    b = b.qb();
    for (e = 0;e < b.length - 1;e++) {
      var f = b[e], g = b[e + 1], h = a.x >= Math.min(f.x, g.x) - d && a.x <= Math.max(f.x, g.x) + d, k = a.y >= Math.min(f.y, g.y) - d && a.y <= Math.max(f.y, g.y) + d, l = null;
      f.x === g.x ? k && (l = f.x - a.x) : f.y === g.y ? h && (l = f.y - a.y) : h && k && (h = (f.y - g.y) / (f.x - g.x), k = f.y - h * f.x, l = 0 < Math.abs(g.x - f.x) - Math.abs(g.y - f.y) ? a.y - (a.x * h + k) : a.x - (a.y - k) / h);
      if (null !== l && l <= d && l >= -d) {
        return e;
      }
    }
    return -1;
  }, Qe:function(a, b) {
    return a && b instanceof c.B ? a.x >= b.xmin && a.x <= b.xmax && a.y >= b.ymin && a.y <= b.ymax : !1;
  }, Em:function(a, b) {
    var d = b.cd(), e = d.length, f = 0, g, h;
    g = d[0];
    for (var k = 1;k <= e;++k) {
      if (c.J(a, g)) {
        return !0;
      }
      h = d[k % e];
      if (!(a.y < Math.min(g.y, h.y) || a.y > Math.max(g.y, h.y))) {
        if (a.y > Math.min(g.y, h.y) && a.y < Math.max(g.y, h.y)) {
          if (a.x <= Math.max(g.x, h.x)) {
            if (g.y == h.y && a.x >= Math.min(g.x, h.x)) {
              return !0;
            }
            if (g.x == h.x) {
              if (g.x == a.x) {
                return !0;
              }
              ++f;
            } else {
              g = (a.y - g.y) * (h.x - g.x) / (h.y - g.y) + g.x;
              if (2E-10 > Math.abs(a.x - g)) {
                return !0;
              }
              a.x < g && ++f;
            }
          }
        } else {
          if (a.y == h.y && a.x <= h.x) {
            var l = d[(k + 1) % e];
            a.y >= Math.min(g.y, l.y) && a.y <= Math.max(g.y, l.y) ? ++f : f += 2;
          }
        }
      }
      g = h;
    }
    return 0 == f % 2 ? !1 : !0;
  }};
  c.fh = {rm:function(a, b) {
    var c = a.left - b.left, e = a.top - b.top;
    return c * c + e * e;
  }, sm:function(a, b, c) {
    var e = b.left;
    b = b.top;
    var f = c.left - e, g = c.top - b;
    if (0 !== f || 0 !== g) {
      var h = ((a.left - e) * f + (a.top - b) * g) / (f * f + g * g);
      1 < h ? (e = c.left, b = c.top) : 0 < h && (e += f * h, b += g * h);
    }
    f = a.left - e;
    g = a.top - b;
    return f * f + g * g;
  }, tn:function(a, b) {
    for (var c = a[0], e = [c], f, g = 1, h = a.length;g < h;g++) {
      f = a[g], this.rm(f, c) > b && (e.push(f), c = f);
    }
    c !== f && e.push(f);
    return e;
  }, Lg:function(a, b, c, e, f) {
    for (var g = e, h, k = b + 1;k < c;k++) {
      var l = this.sm(a[k], a[b], a[c]);
      l > g && (h = k, g = l);
    }
    g > e && (1 < h - b && this.Lg(a, b, h, e, f), f.push(a[h]), 1 < c - h && this.Lg(a, h, c, e, f));
  }, sn:function(a, b) {
    var c = a.length - 1, e = [a[0]];
    this.Lg(a, 0, c, b, e);
    e.push(a[c]);
    return e;
  }, yj:function(a, b, c) {
    if (2 >= a.length) {
      return a;
    }
    b = void 0 !== b ? b * b : 1;
    a = c ? a : this.tn(a, b);
    return a = this.sn(a, b);
  }};
  c.SpatialFilter = c.gh = c.U.extend({yb:{RELATION_INTERSECT:0, RELATION_CONTAIN:1, RELATION_DISJOINT:2, RELATION_OVERLAP:3, RELATION_TOUCH:4, RELATION_WITHIN:5, RELATION_CONTAINCENTER:7}, o:function(a, b) {
    this.c = a;
    this.Zm = b;
  }, Jo:function() {
    return this.c;
  }, Xa:function() {
    return {geometry:this.c.Xa(), relation:this.Zm};
  }});
  c.Query = c.Mn = c.U.extend({bp:function() {
  }, jj:function() {
  }});
  c.RemoteQuery = c.On = c.U.extend({o:function(a) {
    a && (this.host = a.host, this.port = a.port, this.og = a.mapdb);
  }, check:function() {
    return this.og ? !0 : !1;
  }, fm:function() {
    return this.host && this.port ? this.host + ":" + this.port : c.host;
  }, lg:function(a) {
    if (a) {
      var b = {spatialFilter:new c.gh(new c.La(a.coordinate, a.radius), c.gh.Nn), condition:a.condition, symbol:!0, page:0, count:1E4};
      a.fromCoordinateType && (b.fromCoordinateType = a.fromCoordinateType);
      a.toCoordinateType && (b.toCoordinateType = a.toCoordinateType);
      a.queryFilter = b;
      this.jj(a);
    }
  }, jj:function(a) {
    if (!a || !this.check()) {
      throw Error("invalid options for RemoteQuery's query method.");
    }
    if (!a.layers) {
      throw Error("layers is not specified in query options.");
    }
    var b = a.layers;
    c.a.aa(b) && (b = b.join(","));
    if (0 === b.length) {
      throw Error("layers is not specified in query options.");
    }
    if (!c.a.Pe(a.success)) {
      throw Error("success callback function is not specified in query options.");
    }
    var b = "http://" + this.fm() + "/enginerest/rest/databases/" + this.og + "/layers/" + b + "/data?op=query", d = a.queryFilter;
    d || (d = {symbol:!0, fields:"*", page:0, count:10});
    var d = this.Yf(d), e = new c.a.Ga(b, 0, d, function(b) {
      b ? ((b = c.a.ld(b)) ? b.success ? (b = b.data, c.a.aa(b) ? (b = c.i.Zf(b), a.success({success:!0, data:b})) : a.success({success:!0, data:[]})) : c.a.Pe(a.error) && a.error(b) : c.a.Pe(a.error) && a.error({success:!1, errCode:c.Pj.Vj, error:""}), e = null) : c.a.Pe(a.error) && a.error({success:!1, errCode:c.Pj.Vj, error:""});
    });
    e.Vd();
  }, Yf:function(a) {
    var b;
    b = "encoding=utf-8&mapdb=" + this.og;
    a.toCoordinateType && (b += "&coordinateType=" + this.Yl());
    a.symbol && (b += "&needsymbol=true");
    a.layers && (b += "&layer=" + a.layers);
    c.a.fa(a.page) && (b += "&page=" + a.page);
    c.a.fa(a.count) && (b += "&count=" + a.count);
    if (a.spatialFilter) {
      var d = a.spatialFilter;
      d.c && (a.toCoordinateType && d.c.Gp(a.toCoordinateType), b += "&spatialFilter=" + encodeURIComponent(JSON.stringify(a.spatialFilter.Xa())));
    }
    a.condition && (b += "&attributeCond=" + encodeURIComponent(a.condition));
    a.fields && (b += "&fields=" + a.fields);
    return b;
  }});
  window.seegoo = {};
  window.seegoo.maps = window.Z;
})();

